[
    {
        "section_number": "1.1",
        "section_title": "Scope",
        "granularity_level": 2,
        "content": "This document defines the protocols and procedures that shall be used by devices implementing the\nHands-Free Profile. The most common examples of such devices are in-car Hands-Free units used\ntogether with cellular phones, or wearable wireless headsets.\n\nThe profile defines how two devices supporting the Hands-Free Profile shall interact with each other on a\npoint-to-point basis.\n\nAn implementation of the Hands-Free Profile typically enables a headset, or an embedded hands-free\nunit to connect, wirelessly, to a cellular phone for the purposes of acting as the cellular phone’s audio\ninput and output mechanism and allowing typical telephony functions to be performed without access to\nthe actual phone.\n\n##### **1.2 Profile Dependencies**\n\nIn Figure 1.1, the Bluetooth profile structure and the dependencies of the profiles are depicted. A profile is\ndependent upon another profile if it re-uses parts of that profile, by explicitly referencing it. Dependency is\nillustrated in Figure 1.1.\n\nAs indicated in Figure 1.1, the Hands-Free Profile is dependent upon both RFCOMM [4] and the Generic\nAccess Profile (Volume 3, Part C in [1]). Details are provided in Sections 6 (RFCOMM) and 7 (Generic\nAccess Profile).\n\nBluetooth SIG Proprietary Page **11 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n##### **1.3 Symbols and Conventions**\n\n**1.3.1** **Requirement Status Symbols**\nIn this document, the following symbols are used:\n\n- \"M\" for mandatory to support\n\n- \"O\" for optional to support\n\n- \"X\" for excluded (used for capabilities that may be supported by the device, but the Hands-Free\nProfile shall not use these capabilities)\n\n- \"C\" for conditional to support\n\n- \"N/A\" for not applicable (in the given context this capability is not defined)\n\nSome capabilities or features (identified as “X”), mandated according to the relevant Bluetooth\nspecifications, are excluded with respect to this profile because they might degrade the operation of\ndevices in the particular use case. Therefore, features or capabilities labeled “X” shall never be activated\nwhile operating in a use case where they are labeled as such.\n\n**1.3.2** **Naming Conventions**\nIn this document, the following naming conventions are used:\n\nWhere “Core Specification” is said it refers to the Bluetooth Core Specification Version 4.2 or later\nadopted by the Bluetooth SIG.\n\nWhere “LMP link” is said, it means a Link Manager (LM) level link over which only Link Manager Protocol\n(LMP) commands are conveyed.\n\nWhere “RFCOMM connection” is said, it means the presence of an emulated serial port as specified in\n\n[4].\n\n- Where “Service Level Connection” is said, it means a synchronized high-level protocol connection\ninvolving a portion of the protocol stack. In this specific case, it refers to the presence of a RFCOMM\nconnection, and assumes that the HF (Hands-Free unit) has synchronized itself to the state of the AG\n(Audio Gateway) using the specified Service Level Connection initialization procedure.\n\n- Where “Service Level Connection initialization” is said, it means the execution of the set of AT\ncommands and responses specified by the profile necessary to synchronize the state of the HF with\nthat of the AG.\n\n- Where “Service Level Connection establishment” is said, it means the combined process of\nestablishing the RFCOMM connection, as well as the necessary device synchronization using Service\nLevel Connection initialization.\n\n- Where “Synchronous Connection” is said, it means a SCO or eSCO logical link intended for\nsupporting a full duplex Audio Connection.\n\n- Where “Audio Connection” is said, it means a Synchronous Connection including the means to\nprovide a complete audio path between two devices assuming roles within this profile.\n\n- Where “Codec Connection” is said, it means a Synchronous Connection established after profile level\nnegotiation of Codec and related configuration.\n\nBluetooth SIG Proprietary Page **12 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n- Where “Wide Band Speech Connection” is said, it means a Codec Connection where the media being\ntransported consists of encoded frames derived from speech (or other audio) sampled at 16 kHz. The\nformat of the media transported over the Synchronous Connection shall be negotiated during the\nestablishment of the Codec Connection.\n\n- Where “mSBC” or “Modified SBC” is said, it means a modified version of the A2DP SBC codec that is\nused as the mandatory codec for Wide Band Speech Connections. Section 5.7.4 contains a complete\ndefinition of the modifications which comprise mSBC.\n\n- Where “Super Wide Band Speech Connection” is stated, it means a Codec Connection where the\nmedia being transported consists of encoded frames derived from speech (or other audio) sampled at\n32 kHz. The format of the media transported over the Synchronous Connection shall be negotiated\nduring the establishment of the Codec Connection.\n\n- Where “LC3-SWB” is stated, it means the LC3 codec that is used as the mandatory codec for Super\nWide Band Speech Connections. The complete definition of the codec can be found in the LC3\nSpecification [10].\n\n- Where “incoming call” is said, it means a call connection in the direction “Phone Network=>AG”, such\nthat it is initiated by the Network to which the AG is attached.\n\n- Where ‘outgoing call’ is said, it means a call connection in the direction ”AG=>Phone Network”, such\nthat it is initiated by the AG towards the Network to which it is attached.\n\n- Where ‘legacy device’ is said, it means a device that is compatible with an earlier version, v0.96, v1.0\nor v1.5, of this specification; see Section 5.3.2.\n\n**1.3.3** **Signaling Diagram Conventions**\nFigure 1.2 shows conventions used to describe procedures in signaling diagrams.\n\nBluetooth SIG Proprietary Page **13 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n|A|Col2|B|Col4|\n|---|---|---|---|\n|||||\n||Current state/condition|Current state/condition|Current state/condition|\n|||||\n||Optional state/condition|Optional state/condition|Optional state/condition|\n|||||\n\nBluetooth SIG Proprietary Page **14 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n##### **1.4 Language**\n\n**1.4.1** **Language conventions**\nIn the development of a specification, the Bluetooth SIG has established the following conventions for use\nof the terms _“shall”_, _“shall not”_, “ _should”_, _“should not”_, “ _may”_, _“must”_, and _“can”_ . In this Bluetooth\nspecification, the terms in Table 1.1 have the specific meanings given in that table, irrespective of other\nmeanings that exist.\n\n|Term|Definition|\n|---|---|\n|shall|—used to express what is required by the specification and is to be implemented exactly<br>as written without deviation|\n|shall not|—used to express what is forbidden by the specification|\n|should|—used to express what is recommended by the specification without forbidding anything|\n|should not|—used to indicate that something is discouraged but not forbidden by the specification|\n|may|—used to indicate something that is permissible within the limits of the specification|\n|must|—used to indicate either:<br>1. an indisputable statement of fact that is always true regardless of the circumstances<br>2. an implication or natural consequence if a separately-stated requirement is followed|\n|can|—used to express a statement of possibility or capability|"
    },
    {
        "section_number": "2.1",
        "section_title": "Protocol Stack",
        "granularity_level": 2,
        "content": "|Application<br>(Audio port emulation)|Col2|Col3|\n|---|---|---|\n|Hands-Free control|Hands-Free control|Hands-Free control|\n|RFCOMM|RFCOMM|SDP|\n|LMP|L2CAP|L2CAP|\n|Baseband|Baseband|Baseband|\n\n|s profile.|Col2|Col3|\n|---|---|---|\n|Application <br>(Audio driver)|Application <br>(Audio driver)|Application <br>(Audio driver)|\n|Hands-Free control|Hands-Free control|Hands-Free control|\n|RFCOMM <br>S|RFCOMM <br>S|DP|\n|LMP|L2CAP|L2CAP|\n|Baseband|Baseband|Baseband|\n\n**Audio Gateway side** **Hands-Free side**\n\nThe Baseband, LMP and L2CAP are the OSI layer 1 and 2 Bluetooth protocols. RFCOMM is the\nBluetooth serial port emulation entity. SDP is the Bluetooth Service Discovery Protocol. See [1] for more\ndetails on these topics.\n\nHands-Free control is the entity responsible for Hands-Free unit specific control signaling; this signaling is\nAT command based.\n\nAlthough not shown in the model above, it is assumed by this profile that Hands-Free Control has access\nto some lower layer procedures (for example, Synchronous Connection establishment).\n\nThe audio port emulation layer shown in Figure 2.1 is the entity emulating the audio port on the Audio\nGateway, and the audio driver is the driver software in the Hands-Free unit.\n\n##### **2.2 Configuration and Roles**\n\nFigure 2.2 shows typical configurations of devices for which the Hands-Free Profile is applicable:\n\nBluetooth SIG Proprietary Page **17 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nThe following roles are defined for this profile:\n\n**Audio Gateway (AG)** - This is the device that is the gateway of the audio, both for input and output.\nTypical devices acting as Audio Gateways are cellular phones.\n\n**Hands-Free unit (HF)** - This is the device acting as the Audio Gateway’s remote audio input and output\nmechanism. It also provides some remote control means.\n\nThese terms are used in the rest of this document to designate these roles.\n\n##### **2.3 User Requirements and Scenarios**\n\nThe following rules apply to this profile:\n\na) The profile states the mandatory and optional features when the “Hands-Free Profile” is active in the\n\nAudio Gateway and the Hands-Free unit.\n\nb) The profile mandates the usage of CVSD (see Volume 2, Part B, Section 9 in [1]) for transmission of\n\naudio (over the Bluetooth link). The resulting audio is monophonic, with a quality that, under normal\ncircumstances, does not have perceived audio degradation.\n\nc) Between the Hands-Free unit and the Audio Gateway, only one Audio Connection per Service Level\n\nConnection at a time is supported.\n\nd) Both the Audio Gateway and the Hands-Free unit may initiate Audio Connection establishment and\n\nrelease. Valid speech data shall exist on the Synchronous Connection in both directions after the\nAudio Connection is established. Since it is only the AG that knows if Wide Band Speech or Super\nWide Band Speech should be used, it should always be the AG that establishes the Synchronous\nConnection with the required codec.\n\ne) Whenever an “Audio Connection” exists, a related “Service Level Connection” shall also exist.\n\nf) The presence of a “Service Level Connection” shall not imply that an “Audio Connection” exists.\nReleasing a “Service Level Connection” shall also release any existing “Audio Connection” related to\nit.\n\n##### **2.4 Profile Fundamentals**\n\nIf an LMP link is not already established between the Hands-Free unit and the Audio Gateway, the LMP\nlink shall be set up before any other procedure is performed.\n\nThere are no fixed Central or Peripheral roles in the profile.\n\nThe Audio Gateway and Hands-Free unit provide serial port emulation. For the serial port emulation,\nRFCOMM (see [4]) is used. The serial port emulation is used to transport the user data including modem\ncontrol signals and AT command from the Hands-Free unit to the Audio Gateway. The AT commands are\nparsed by the Audio Gateway and responses are sent to the Hands-Free unit via the Bluetooth serial port\nconnection.\n\n##### **2.5 Conformance**\n\nEach capability of this specification shall be supported in the specified manner. This specification may\nprovide options for design flexibility, because, for example, some products do not implement every portion\nof the specification. For each implementation option that is supported, it shall be supported as specified.\n\nBluetooth SIG Proprietary Page **18 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n## **3 Application Layer**\n\nThis section describes the feature requirements for units complying with HFP.\n\nTable 3.1 shows the feature requirements for this profile.\n\n|Col1|Feature|Support in HF|Support in<br>AG|\n|---|---|---|---|\n|1.|Connection management|M|M|\n|2.|Phone status information|M**(note 1)**|M|\n|3.|Audio Connection handling|M|M|\n|4|Accept an incoming voice call|M|M|\n|5.|Reject an incoming voice call|M|O|\n|6.|Terminate a call|M|M|\n|7.|Audio Connection transfer during an ongoing call|M|M|\n|8.|Place a call with the phone number supplied by the HF|O|M|\n|9.|Place a call using memory dialing|O|M|\n|10.|Place a call to the last number dialed|O|M|\n|11.|Call waiting notification|O|M|\n|12.|Three-way calling|O**(note 2)**|O**(note 3)**|\n|13.|Calling Line Identification (CLI)|O|M|\n|14.|Echo canceling (EC) and noise reduction (NR)|O|O|\n|15.|Voice recognition activation|O|O|\n|16.|Attach a Phone number for a voice tag|O|O|\n|17.|Ability to transmit DTMF codes|O|M|\n|18.|Remote audio volume control|O|O|\n|19.|Respond and Hold|O|O|\n|20.|Subscriber Number Information|O|M|\n|21a.|Enhanced Call Status|O|M|\n|21b.|Enhanced Call Controls|O|O|\n|22.|Individual Indicator Activation|O|M|\n\nBluetooth SIG Proprietary Page **19 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n|Col1|Feature|Support in HF|Support in<br>AG|\n|---|---|---|---|\n|23|Wide Band Speech|O|O|\n|24|Codec Negotiation|O**(note 4)**|O**(note 4)**|\n|25|HF Indicators|O|O|\n|26|Super Wide Band Speech|O|O|\n|Note 1: The HF shall support at least the two indicators \"service\" and \"call\".<br>Note 2: If \"Three-way calling\" is supported by the HF, it shall support AT+CHLD values 1 and 2. The HF may<br>additionally support AT+CHLD values 0, 3 and 4.<br>Note 3: If \"Three-way calling\" is supported by the AG, it shall support AT+CHLD values 1 and 2.<br> <br>The AG may additionally support AT+CHLD values 0, 3, and 4.<br>Note 4: If Wide Band Speech or Super Wide Band Speech is supported, Codec Negotiation shall also be<br>supported.|Note 1: The HF shall support at least the two indicators \"service\" and \"call\".<br>Note 2: If \"Three-way calling\" is supported by the HF, it shall support AT+CHLD values 1 and 2. The HF may<br>additionally support AT+CHLD values 0, 3 and 4.<br>Note 3: If \"Three-way calling\" is supported by the AG, it shall support AT+CHLD values 1 and 2.<br> <br>The AG may additionally support AT+CHLD values 0, 3, and 4.<br>Note 4: If Wide Band Speech or Super Wide Band Speech is supported, Codec Negotiation shall also be<br>supported.|Note 1: The HF shall support at least the two indicators \"service\" and \"call\".<br>Note 2: If \"Three-way calling\" is supported by the HF, it shall support AT+CHLD values 1 and 2. The HF may<br>additionally support AT+CHLD values 0, 3 and 4.<br>Note 3: If \"Three-way calling\" is supported by the AG, it shall support AT+CHLD values 1 and 2.<br> <br>The AG may additionally support AT+CHLD values 0, 3, and 4.<br>Note 4: If Wide Band Speech or Super Wide Band Speech is supported, Codec Negotiation shall also be<br>supported.|Note 1: The HF shall support at least the two indicators \"service\" and \"call\".<br>Note 2: If \"Three-way calling\" is supported by the HF, it shall support AT+CHLD values 1 and 2. The HF may<br>additionally support AT+CHLD values 0, 3 and 4.<br>Note 3: If \"Three-way calling\" is supported by the AG, it shall support AT+CHLD values 1 and 2.<br> <br>The AG may additionally support AT+CHLD values 0, 3, and 4.<br>Note 4: If Wide Band Speech or Super Wide Band Speech is supported, Codec Negotiation shall also be<br>supported.|\n\nBluetooth SIG Proprietary Page **20 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nTable 3.2 maps each feature to the procedures used for that feature. All procedures are mandatory if the\nfeature is supported.\n\n|Col1|Feature|Procedure|Ref.|\n|---|---|---|---|\n|1.|Connection<br>management|Service Level Connection establishment|4.2|\n|1.|Connection<br>management|Service Level Connection release|4.3|\n|2.|Phone status<br>information|Transfer of Registration Status<br>Transfer of Signal Strength Indication<br>Transfer of Roaming Status Indication<br>Transfer of Battery Level Indication<br>Query of Operator Selection<br>Extended Audio Gateway Error Codes<br>Transfer of Call, Call Setup and Call<br>Held Status|4.4<br>4.5<br>4.6<br>4.7<br>4.8<br>4.9<br>4.10|\n|3.|Audio Connection<br>handling|Audio Connection set up<br>Audio Connection release<br>Codec Connection setup|4.11<br>4.12|\n|4.|Accept an incoming<br>voice call|Answer an incoming call|4.13|\n|5.|Reject an incoming<br>voice call|Reject an incoming call|4.14|\n|6.|Terminate a call|Terminate a call process|4.15|\n|7.|Audio Connection<br>transfer during an<br>ongoing call|Audio Connection transfer towards the<br>HF<br>Audio Connection transfer towards the<br>AG|4.16<br>4.17|\n|8.|Place a call with the<br>phone number supplied<br>by the HF|Place a call with the phone number<br>supplied by the HF|4.18|\n|9.|Place a call using<br>memory dialing|Memory dialing from the HF|4.19|\n|10.|Place a call to the last<br>number dialed|Last number re-dial from the HF|4.20|\n|11.|Call waiting notification|Call waiting notification activation|4.21|\n|12.|Three-way calling|Three-way call handling|4.22|\n|13.|Calling Line<br>Identification (CLI)|Calling Line Identification (CLI)<br>notification|4.23|\n\nBluetooth SIG Proprietary Page **21 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n|Col1|Feature|Procedure|Ref.|\n|---|---|---|---|\n|14.|Echo canceling (EC)<br>and noise reduction<br>(NR)|HF requests turning off the AG’s EC<br>and NR|4.24|\n|15.|Voice recognition<br>activation|Voice recognition activation|4.25|\n|16.|Attach a phone number<br>for a voice tag|Attach a voice tag to a phone number|4.27|\n|17.|Ability to transmit<br>DTMF codes|Transmit DTMF code|4.28|\n|18.|Remote audio volume<br>control|Remote audio volume control<br>Volume level synchronization|4.29|\n|19.|Response and Hold|Query response and hold status<br>Put an incoming call on hold from HF<br>Put an incoming call on hold from AG<br>Accept a held incoming call from HF<br>Accept a held incoming call from AG<br>Reject a held incoming call from HF<br>Reject a held incoming call from AG<br>Held incoming call terminated by caller|4.30<br>4.30<br>4.30<br>4.30<br>4.30<br>4.30<br>4.30<br>4.30|\n|20.|Subscriber Number<br>Information|Subscriber Number Information|4.31|\n|21a.|Enhanced Call Status|Query Call List|4.32|\n|21b.|Enhanced Call Control|Release Specified Call<br>Private Consult Mode|4.33<br>4.33|\n|22.|Individual Indicator<br>Activation|Indicators Activation and Deactivation|4.34|\n|23|Wide Band Speech|Wide Band Speech|10<br>11<br>12|\n|24|Codec Negotiation|Codec Negotiation|4.11|\n|25|HF Indicators|HF Indicators|4.35|\n|26|Super Wide Band<br>Speech|Super Wide Band Speech|Appendix E|\n\nTable 3.3 shows the codec requirements for this profile.\n\nBluetooth SIG Proprietary Page **22 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n|Col1|Codec|Support in HF|Support in<br>AG|\n|---|---|---|---|\n|1.|CVSD|M|M|\n|2.|mSBC|C.1|C.1|\n|3.|LC3-SWB|C.2|C.2|\n|**C.1**: Mandatory if Wide Band Speech is supported, or excluded otherwise<br>C.2: Mandatory if Super Wide Band Speech is supported, or excluded otherwise|**C.1**: Mandatory if Wide Band Speech is supported, or excluded otherwise<br>C.2: Mandatory if Super Wide Band Speech is supported, or excluded otherwise|**C.1**: Mandatory if Wide Band Speech is supported, or excluded otherwise<br>C.2: Mandatory if Super Wide Band Speech is supported, or excluded otherwise|**C.1**: Mandatory if Wide Band Speech is supported, or excluded otherwise<br>C.2: Mandatory if Super Wide Band Speech is supported, or excluded otherwise|\n\nTable 3.4 shows a summary of the mapping of codec requirements on link features for this profile.\n\n|Col1|Feature|Support in HF|Support in<br>AG|\n|---|---|---|---|\n|1.|D0 – CVSD on SCO link (HV1)|M|M|\n|2.|D1 – CVSD on SCO link (HV3)|M|M|\n|3.|S1 – CVSD eSCO link (EV3)|M|M|\n|4.|S2 – CVSD on EDR eSCO link (2-EV3)|M|M|\n|5.|S3 – CVSD on EDR eSCO link (2-EV3)|M|M|\n|6.|S4 – CVSD on EDR eSCO link (2-EV3)|M|M|\n|7.|T1 – mSBC on eSCO link (EV3)|C1|C1|\n|8.|T2 – mSBC on EDR eSCO link (2-EV3)|C1|C1|\n|9.|T1 – LC3-SWB on eSCO link (EV3)|C2|C2|\n|10.|T2 – LC3-SWB on EDR eSCO link (2-EV3)|C2|C2|\n|C1: Mandatory if Wide Band Speech is supported, excluded otherwise<br>C2: Mandatory if Super Wide Band Speech is supported, excluded otherwise|C1: Mandatory if Wide Band Speech is supported, excluded otherwise<br>C2: Mandatory if Super Wide Band Speech is supported, excluded otherwise|C1: Mandatory if Wide Band Speech is supported, excluded otherwise<br>C2: Mandatory if Super Wide Band Speech is supported, excluded otherwise|C1: Mandatory if Wide Band Speech is supported, excluded otherwise<br>C2: Mandatory if Super Wide Band Speech is supported, excluded otherwise|\n\nBluetooth SIG Proprietary Page **23 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n## **4 Hands-Free Control Interoperability Requirements**\n\n##### **4.1 Introduction**\n\nThe interoperability requirements for the Hands-Free Control entity are completely contained in this\nsection. Sections 4.2 through 4.29 specify the requirements for the procedures directly related to the\napplication layer features.\n\nThe procedures listed in this section are primarily based on the use of a minimum set of AT commands as\nthe control protocol. Section 5 specifies these AT commands and their result codes.\n\nSection 4.2 specifies how Service Level Connections are handled in general and specifically states how\nthe layers beneath the Hands-Free Control entity are used to establish and release a Service Level\nConnection.\n\n##### **4.2 Service Level Connection Establishment**\n\nUpon a user action or an internal event, either the HF or the AG may initiate a Service Level Connection\nestablishment procedure.\n\nA Service Level Connection establishment requires the existence of a RFCOMM connection, that is, a\nRFCOMM data link channel between the HF and the AG.\n\nBoth the HF and the AG may initiate the RFCOMM connection establishment. If there is no RFCOMM\nsession between the AG and the HF, the initiating device shall first initialize RFCOMM.\n\nThe RFCOMM connection establishment shall be performed as described in Generic Access Profile\n(Volume 3, Part C, Section 7.3 in [1]) and Section 6.1.1.\n\n**4.2.1** **Service Level Connection Initialization**\nWhen an RFCOMM connection has been established, the Service Level Connection Initialization\nprocedure shall be executed."
    },
    {
        "section_number": "4.3",
        "section_title": "Service Level Connection Release",
        "granularity_level": 2,
        "content": "This section describes the procedure for releasing a Service Level Connection.\n\nThe disconnection of a Service Level Connection shall result in the immediate removal of the\ncorresponding RFCOMM data link channel between the HF and the AG. Also, an existing audio\nconnection has to be removed as a consequence of the removal of the Service Level Connection. The\nremoval of the L2CAP and link layers is optional.\n\nAn established Service Level Connection shall be released using a “Service Level Connection removal”\nprocedure.\n\n- Either the HF or AG shall initiate the “Service Level Connection release” procedure due to an explicit\nuser request.\n\n- The “Service Level Connection release” procedure shall be initiated if the Bluetooth functionality is\ndisabled in either the HF or AG.\n\n- The “Service Level Connection release” procedure may be initiated if an “Audio Connection transfer\ntowards the AG”, as stated in Section 4.17, is performed during an ongoing call in the AG. In the case\nthat the Service Level Connection is removed, the AG shall attempt to re-establish the Service Level\nConnection once the call is dropped.\n\nAs a precondition for this procedure, an ongoing Service Level Connection between the AG and the HF\nshall exist.\n\nBluetooth SIG Proprietary Page **28 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n##### **4.4 Transfer of Registration Status**\n\nThe AT+CMER command, as described in Section 5, enables the “Registration status update” function in\nthe AG.\n\nThe AT+BIA command, as described in Section 5.3, allows the HF to deactivate/reactivate individual\nindicators.\n\nWhen the CMER function is enabled and the registration status indicator has not been deactivated by the\nAT+BIA command, the AG shall send the +CIEV unsolicited result code with the corresponding service\nindicator and value whenever the AG's registration status changes. The HF shall be capable of\ninterpreting the information provided by the +CIEV result code to determine the service availability status\nas listed in Section 5.2.\n\nIf the CMER function is disabled or the indicator has been deactivated by the AT+BIA command, the AG\nshall not send the unsolicited result code.\n\n|HF AG<br>Established Service Level Connection<br>Internal e<br>Sta<br>gistration +CIEV: … The AG re<br>n the Reg|Col2|AG|Col4|\n|---|---|---|---|\n|HF <br>AG <br>+CIEV: …<br>  gistration<br> n <br>The AG re<br>the Reg<br>Internal e<br>Sta<br>Established Service Level Connection|HF <br>AG <br>+CIEV: …<br>  gistration<br> n <br>The AG re<br>the Reg<br>Internal e<br>Sta<br>Established Service Level Connection|AG|The AG re<br>the Reg<br>Internal e<br>Sta|\n|HF <br>AG <br>+CIEV: …<br>  gistration<br> n <br>The AG re<br>the Reg<br>Internal e<br>Sta<br>Established Service Level Connection|Established Service Level Connection|Established Service Level Connection|Established Service Level Connection|\n|HF <br>AG <br>+CIEV: …<br>  gistration<br> n <br>The AG re<br>the Reg<br>Internal e<br>Sta<br>Established Service Level Connection|+CIEV: …|+CIEV: …|+CIEV: …|\n\n##### **4.5 Transfer of Signal Strength Indication**\n\nThe AT+CMER command, as described in Section 5, enables the “Signal strength Indication” function in\nthe AG.\n\nThe AT+BIA command, as described in Section 5.3, allows the HF to deactivate/reactivate individual\nindicators.\n\nWhen the CMER function is enabled and the indicator has not been deactivated by the AT+BIA\ncommand, the AG shall send the +CIEV unsolicited result code with the corresponding signal strength\nindicator and value whenever the AG's signal strength changes. The HF shall be capable of interpreting\nthe information provided by the +CIEV result code to determine the signal strength as listed in Section\n5.2.\n\nIf the CMER function is disabled or the indicator has been deactivated by the AT+BIA command, the AG\nshall not send the unsolicited result code.\n\nBluetooth SIG Proprietary Page **29 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nInternal event: Signal\nstrength Status changes\n\nthe signal strength Status\n\n|HF|Col2|\n|---|---|\n|||\n||Established service level connection|\n||+CIEV: <Signal strength Ind>,<Value>|\n\nAs a result, the AG shall send the +CIEV unsolicited result code with the corresponding signal strength\nvalue whenever its signal strength changes.\n\n##### **4.6 Transfer of Roaming Status Indication**\n\nThe AT+CMER command, as described in Section 5, enables the “Roaming Status Indication” function in\nthe AG.\n\nThe AT+BIA command, as described in Section 5.3, allows the HF to deactivate/reactivate individual\nindicators.\n\nWhen the CMER function is enabled and the indicator has not been deactivated by the AT+BIA\ncommand, the AG shall send the +CIEV unsolicited result code with the corresponding roaming status\nindicator and value whenever the AG's roaming status changes. The HF shall be capable of interpreting\nthe information provided by the +CIEV result code to determine the roaming status as listed in Section\n5.2.\n\nIf the CMER function is disabled or the indicator has been deactivated by the AT+BIA command, the AG\nshall not send the unsolicited result code.\n\nBluetooth SIG Proprietary Page **30 of 143**\n\n|Col1|HF|Col3|AG<br>blished Service Level<br>Internal even<br>Roaming Stat<br>changes<br><RoamingInd>,<Value><br>[The AG reports the cha<br>the Roaming Statu|\n|---|---|---|---|\n|||+CIEV:<br>Esta|+CIEV:<br>Esta|\n|||||\n\n**Hands-Free Profile /** Profile Specification\n\n##### **4.7 Transfer of Battery Level Indication of AG**\n\nThe AT+CMER command, as described in Section 5 enables the “Battery Level Indication” function in the\nAG.\n\nThe AT+BIA command, as described in Section 5.3, allows the HF to deactivate/reactivate individual\nindicators.\n\nWhen the CMER function is enabled and the indicator has not been deactivated by the AT+BIA\ncommand, the AG shall send the +CIEV unsolicited result code with the corresponding battery level\nindicator and value whenever the AG's battery level changes. The HF shall be capable of interpreting the\ninformation provided by the +CIEV result code to determine the battery level as listed in Section 5.2.\n\nIf the CMER function is disabled or the indicator has been deactivated by the AT+BIA command, the AG\nshall not send the unsolicited result code.\n\nInternal event: Battery level\n\nthe Battery Status\n\n|HF|Col2|\n|---|---|\n|||\n||Established service level connection|\n||+CIEV: <Battery level Ind>,<Value>|\n\nBluetooth SIG Proprietary Page **31 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n##### **4.8 Query Operator Selection**\n\nThe HF shall execute this procedure to find out the name of the currently selected Network operator by\nAG.\n\nThe following precondition applies for this procedure:\n\n- An ongoing connection between the AG and the HF shall exist. If this connection did not exist, the AG\nshall establish a connection using “Service Level Connection set up” procedure described in\nSection 4.2.\n\nto be sent once)\n\nNetwork Name\n\n|H<br>ork<br>needs<br>rent|F A|G<br>The AG r<br>current N<br>operator<br>alphanum|\n|---|---|---|\n|H<br>   rent<br>    ork<br> <br>  needs|Established  service level connection|Established  service level connection|\n|H<br>   rent<br>    ork<br> <br>  needs|+COPS: <mode>, 0, <operator><br>AT+COPS?<br>OK<br>AT+COPS=3,0<br>OK|+COPS: <mode>, 0, <operator><br>AT+COPS?<br>OK<br>AT+COPS=3,0<br>OK|\n\n- HF shall send AT+COPS=3,0 command to set name format to long alphanumeric. Long alphanumeric\nis defined as a maximum of 16 characters. The value of 3 as the first parameter indicates that this\ncommand is only affecting the format parameter (the second parameter). The second parameter, 0, is\nthe value required to set the format to “long alphanumeric.”\n\n- Upon an internal event or user-initiated action, HF shall send the AT+COPS? (Read) command to\nfind the currently selected operator.\n\n- AG shall respond with +COPS response indicating the currently selected operator. If no operator is\nselected, <format> and <operator> are omitted.\n\n##### **4.9 Report Extended Audio Gateway Error Results Code**\n\nThe HF shall execute this procedure to enable/disable Extended Audio Gateway Error result codes in the\nAG.\n\nBluetooth SIG Proprietary Page **32 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nThe following precondition applies for this procedure:\n\n- An ongoing connection between the AG and the HF shall exist. If this connection did not exist, the AG\nshall establish a connection using “Service Level Connection set up” procedure described in\nSection 4.2.\n\n- The HF shall issue the AT+CMEE command to enable/disable the “Extended Audio Gateway Error\nResult Code” in the AG. The parameter <n> controls the activation/deactivation of the “Extended\nError result code” notification.\n\n- Whenever there is an error relating to the functionality of the AG as a result of AT command, the AG\nshall send +CME ERROR: <err> response to the HF.\n\n##### **4.10 Transfer of Call, Call Setup, and Held Call Status**\n\nThe AT+CMER command, as described in Section 5, enables the “Call Status indicators update” function\nin the AG.\n\nThe AT+BIA command, as described in Section 5.3, allows the HF to deactivate/reactivate individual\nindicators. The AT+BIA command shall have no effect on the Call, Call Setup, or Held Call indicators.\nThese indicators cannot be deactivated using the AT+BIA command.\n\nWhen the CMER function is enabled, the AG shall issue a +CIEV unsolicited result code with the\ncorresponding call indicator and value whenever the AG's current call status changes. Likewise, the AG\nshall issue a +CIEV unsolicited result code with the corresponding callsetup indicator and value whenever\nthe AG's current call setup status changes. The AG shall also issue a +CIEV unsolicited result code with\ncorresponding callheld indicator and value whenever the AG’s current held call status changes.\n\nIf the CMER function is disabled, the AG shall not send the unsolicited result code.\n\nThe HF shall be capable of interpreting the information provided by the +CIEV result code to determine\nthe call status as listed in Section 5.2.\n\nFurthermore, the HF may also be capable of interpreting the optional callsetup state information provided\nby the +CIEV result code as listed in Section 5.2.\n\nThe HF shall be able to accept unknown indicators provided by the +CIEV result code. The HF may\nignore unknown indicators provided by the +CIEV result code.\n\nBluetooth SIG Proprietary Page **33 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nNote: Although the HF is required to parse the +CIEV result codes, the HF is not required to provide\nUser Interface indicators for the +CIEV result codes."
    },
    {
        "section_number": "4.11",
        "section_title": "Audio Connection Setup",
        "granularity_level": 2,
        "content": "Upon user action or an internal event, either the HF or the AG may initiate the establishment of an audio\nconnection as needed. Further internal actions may be needed by the HF or the AG to internally route,\nmodify sample rate, frame and/or sample alignment of the audio paths. More formally stated, the\nrequirements for audio connection setup are:\n\n- The HF shall be capable of initiating an audio connection during a call process.\n\n- The HF may be capable of initiating an audio connection while no call is in process.\n\n- The AG shall be capable of initiating an audio connection during a call process.\n\n- The AG may be capable of initiating an audio connection while no call is in process.\n\nIncoming call audio handling is further described in Section 4.12.\n\nOutgoing call audio handling is further described in Sections 4.17, 4.18, and 4.19.\n\nAn Audio Connection set up procedure always means the establishment of a Synchronous Connection\nand it is always associated with an existing Service Level Connection.\n\nIn principle, setting up an Audio Connection by using the procedure described in this section is not\nnecessarily related to any call process.\n\nAs a precondition for this procedure, an ongoing Service Level Connection between the AG and the HF\nshall exist. If this connection does not exist, the initiator of the procedure shall autonomously establish the\nService Level Connection using the proper procedure as described in Section 4.2.\n\nBoth the initiator and the acceptor shall notify the presence of the new Audio Connection."
    },
    {
        "section_number": "4.12",
        "section_title": "Audio Connection Release",
        "granularity_level": 2,
        "content": "Upon a user action or an internal event, either the HF or the AG may release an existing Audio\nConnection. More formally stated, the requirements for audio connection release are:\n\n- The HF shall be capable of releasing an audio connection during a call process.\n\n- If the HF has the ability to set up an audio connection with no call in process, the HF shall be capable\nof releasing the audio connection while no call is in process.\n\n- The AG shall be capable of releasing an audio connection during a call process.\n\n- If the AG has the ability to set up an audio connection with no call in process, the AG shall be capable\nof releasing the audio connection while no call is in process.\n\nAs a precondition for this procedure, an ongoing Audio Connection between the AG and the HF shall\nexist.\n\nAn Audio Connection release always means the disconnection of its corresponding Synchronous\nConnection.\n\nWhen the audio connection is released, the audio path shall be routed to the AG. [3]\n\n3 In principle, removing an Audio Connection by using the procedure described in this section is not necessarily related to any call\nprocess\n\nBluetooth SIG Proprietary Page **43 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n##### **4.13 Answer an Incoming Call**\n\nUpon an incoming call, the AG shall send a sequence of unsolicited RING alerts to the HF. The RING\nalert shall be repeated for as long as the call acceptance is pending, or until the incoming call is\ninterrupted for any reason.\n\nThe HF shall produce a local alerting in reaction to the RING.\n\nIf the AG's SDP record (or +BRSF message) indicates \"In-band ring tone\" is supported, the AG shall send\nin-band ring tones unless subsequently changed using procedures defined in Section 4.13.4.\n\nThe AG may abort the incoming call when necessary. It shall then stop sending the RING alert to the HF."
    },
    {
        "section_number": "4.14",
        "section_title": "Reject an Incoming Call",
        "granularity_level": 2,
        "content": "In case of an incoming call, the AG shall alert the HF by either one of the two procedures described in\nSections 4.13.1 and 4.13.2.\n\nInstead of answering the call, the user may reject the incoming call process by user action at the HF or\nthe AG. These two procedures are described in the following sections."
    },
    {
        "section_number": "4.15",
        "section_title": "Terminate a Call Process",
        "granularity_level": 2,
        "content": "An ongoing call process may be terminated by either the HF or the AG, by means of a user action or any\nother event."
    },
    {
        "section_number": "4.16",
        "section_title": "Audio Connection Transfer towards the HF",
        "granularity_level": 2,
        "content": "The audio paths of an ongoing call may be transferred from the AG to the HF. This procedure represents\na particular case of an “Audio Connection set up” procedure, as described in Section 4.11.\n\nThe call connection transfer from the AG to the HF is initiated by user action either on the HF or on the\nAG. This shall result in either the HF or the AG, respectively, initiating an “Audio Connection set up”\nprocedure with the audio paths of the current call being routed to the HF.\n\nThis procedure is only applicable if there is no current Audio Connection established between the HF and\nthe AG. In fact, if the Audio Connection already exists, this procedure is not necessary because the audio\npath of the AG is assumed to be already routed towards the HF.\n\nThe following preconditions apply for this procedure:\n\n- An ongoing Service Level Connection between the AG and the HF shall exist. If this connection does\nnot exist, the initiator of the “Audio Connection transfer towards the HF” procedure shall\nautonomously establish the Service Level Connection using the proper procedure as described in\nSection 4.2.\n\n- An ongoing call exists in the AG, with the audio paths routed to the AG means.\n\nBluetooth SIG Proprietary Page **51 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n##### **4.17 Audio Connection Transfer towards the AG**\n\nThe audio paths of an ongoing call may be transferred from the HF to the AG. This procedure represents\na particular case of an “Audio Connection release” procedure, as described in Section 4.12.\n\nThe call connection transfer from the HF to the AG is initiated by a user action in the HF or due to an\ninternal event or user action on the AG side. This results in an “Audio Connection release” procedure\nbeing initiated either by the HF or the AG respectively, with the current call kept and its audio paths\nrouted to the AG.\n\nIf, as a consequence of an HF initiated “Audio Connection transfer towards the AG” procedure, the\nexisting Service Level Connection is autonomously removed by the AG, the AG shall attempt to\nre-establish the Service Level Connection once the current call ends.\n\nAs a precondition for this procedure, an ongoing call process shall exist in the AG. The audio paths of the\nongoing call shall be available in the HF via an Audio Connection established between the AG and the\nHF.\n\nBluetooth SIG Proprietary Page **52 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n##### **4.18 Place a Call with the Phone Number Supplied by the HF**\n\nThe HF may initiate outgoing voice calls by providing the destination phone number to the AG. To start\nthe call set-up, the HF shall initiate the Service Level Connection establishment (if necessary) and send a\nproper ATDdd…dd; command to the AG. The AG shall then start the call establishment procedure using\nthe phone number received from the HF and issues the +CIEV result code, with the value (callsetup=2) to\nnotify the HF that the call set-up has been successfully initiated.\n\nSee Section 5 for more information on the ATDdd…dd; command.\n\nAs a precondition for this procedure, an ongoing Service Level Connection between the AG and the HF\nshall exist. If this connection does not exist, the HF shall autonomously establish the Service Level\nConnection using the proper procedure as described in Section 4.2.\n\nIf an Audio Connection is not established, the AG shall establish the proper Audio Connection and route\nthe audio paths of the outgoing call to the HF immediately following the commencement of the ongoing\ncall set up procedure.\n\nOnce the AG is informed that the alerting of the remote party has begun, the AG shall issue the +CIEV\nresult code, with the value indicating (callsetup=3). If the wireless network does not provide the AG of an\nindication of alerting the remote party, the AG may not send this indication.\n\nUpon call connection the AG shall send the +CIEV result code, with the value indicating (call=1).\n\nIf the normal outgoing call establishment procedure is interrupted for any reason, the AG shall issue the\n+CIEV result code, with the value indicating (callsetup=0), to notify the HF of this condition (see Section\n4.15.2).\n\nIf the AG supports the “Three-way calling” feature and if a call is already ongoing in the AG, performing\nthis procedure shall result in a new call being placed to a third party with the current ongoing call put on\nhold. For details on how to handle multiparty calls refer to Section 4.22.2.\n\nBluetooth SIG Proprietary Page **53 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n|HF AG<br>Established Service Level Connection<br>(or optionally an Audio Connection)<br>er initiated action:<br>ace call with the digits entered<br>ATDdd…dd<br>OK<br>Outgoin<br>+CIEV: (callsetup = 2) success<br>AG shal<br>Audio Connection set up establis<br>present<br>Established Audio Connection<br>The audio paths of the The au<br>outgoing call are available at are rou<br>the HF<br>+CIEV: (callsetup = 3)<br>Remote<br>… and bein<br>Remote<br>+CIEV: (call = 1)<br>Call active Call acti<br>+CIEV: (callsetup = 0)|Col2|AG|Col4|\n|---|---|---|---|\n|AG<br>er initiated action:<br>ace call with the digits entered <br>ATDdd…dd<br>Audio Connection set up<br>OK<br>Outgoin<br>success<br>+CIEV: (callsetup = 3)<br>AG shal<br>establis<br>present<br>Established Audio Connection<br>The audio paths of the<br>outgoing call are available at<br>the HF<br>The au<br>are rou<br>Established Service Level Connection<br>(or optionally an Audio Connection)<br>Remote<br>and bein<br>+CIEV: (call = 1)<br>Remote<br>+CIEV: (callsetup = 2)<br>+CIEV: (callsetup = 0)<br>**… **<br>Call acti<br>Call active<br>HF|AG<br>er initiated action:<br>ace call with the digits entered <br>ATDdd…dd<br>Audio Connection set up<br>OK<br>Outgoin<br>success<br>+CIEV: (callsetup = 3)<br>AG shal<br>establis<br>present<br>Established Audio Connection<br>The audio paths of the<br>outgoing call are available at<br>the HF<br>The au<br>are rou<br>Established Service Level Connection<br>(or optionally an Audio Connection)<br>Remote<br>and bein<br>+CIEV: (call = 1)<br>Remote<br>+CIEV: (callsetup = 2)<br>+CIEV: (callsetup = 0)<br>**… **<br>Call acti<br>Call active<br>HF|AG|Outgoin<br>success<br>AG shal<br>establis<br>present<br>The au<br>are rou<br>Remote<br>and bein<br>Remote<br>Call acti|\n|AG<br>er initiated action:<br>ace call with the digits entered <br>ATDdd…dd<br>Audio Connection set up<br>OK<br>Outgoin<br>success<br>+CIEV: (callsetup = 3)<br>AG shal<br>establis<br>present<br>Established Audio Connection<br>The audio paths of the<br>outgoing call are available at<br>the HF<br>The au<br>are rou<br>Established Service Level Connection<br>(or optionally an Audio Connection)<br>Remote<br>and bein<br>+CIEV: (call = 1)<br>Remote<br>+CIEV: (callsetup = 2)<br>+CIEV: (callsetup = 0)<br>**… **<br>Call acti<br>Call active<br>HF|Established Service Level Connection<br>(or optionally an Audio Connection)|Established Service Level Connection<br>(or optionally an Audio Connection)|Established Service Level Connection<br>(or optionally an Audio Connection)|\n|AG<br>er initiated action:<br>ace call with the digits entered <br>ATDdd…dd<br>Audio Connection set up<br>OK<br>Outgoin<br>success<br>+CIEV: (callsetup = 3)<br>AG shal<br>establis<br>present<br>Established Audio Connection<br>The audio paths of the<br>outgoing call are available at<br>the HF<br>The au<br>are rou<br>Established Service Level Connection<br>(or optionally an Audio Connection)<br>Remote<br>and bein<br>+CIEV: (call = 1)<br>Remote<br>+CIEV: (callsetup = 2)<br>+CIEV: (callsetup = 0)<br>**… **<br>Call acti<br>Call active<br>HF|ATDdd…dd<br>Audio Connection set up<br>OK<br>+CIEV: (callsetup = 2)|ATDdd…dd<br>Audio Connection set up<br>OK<br>+CIEV: (callsetup = 2)|ATDdd…dd<br>Audio Connection set up<br>OK<br>+CIEV: (callsetup = 2)|\n|AG<br>er initiated action:<br>ace call with the digits entered <br>ATDdd…dd<br>Audio Connection set up<br>OK<br>Outgoin<br>success<br>+CIEV: (callsetup = 3)<br>AG shal<br>establis<br>present<br>Established Audio Connection<br>The audio paths of the<br>outgoing call are available at<br>the HF<br>The au<br>are rou<br>Established Service Level Connection<br>(or optionally an Audio Connection)<br>Remote<br>and bein<br>+CIEV: (call = 1)<br>Remote<br>+CIEV: (callsetup = 2)<br>+CIEV: (callsetup = 0)<br>**… **<br>Call acti<br>Call active<br>HF|Established Audio Connection|Established Audio Connection|Established Audio Connection|\n|AG<br>er initiated action:<br>ace call with the digits entered <br>ATDdd…dd<br>Audio Connection set up<br>OK<br>Outgoin<br>success<br>+CIEV: (callsetup = 3)<br>AG shal<br>establis<br>present<br>Established Audio Connection<br>The audio paths of the<br>outgoing call are available at<br>the HF<br>The au<br>are rou<br>Established Service Level Connection<br>(or optionally an Audio Connection)<br>Remote<br>and bein<br>+CIEV: (call = 1)<br>Remote<br>+CIEV: (callsetup = 2)<br>+CIEV: (callsetup = 0)<br>**… **<br>Call acti<br>Call active<br>HF|+CIEV: (callsetup = 3)<br>+CIEV: (call = 1)<br>+CIEV: (callsetup = 0)<br>**… **|+CIEV: (callsetup = 3)<br>+CIEV: (call = 1)<br>+CIEV: (callsetup = 0)<br>**… **|+CIEV: (callsetup = 3)<br>+CIEV: (call = 1)<br>+CIEV: (callsetup = 0)<br>**… **|\n\n##### **4.19 Memory Dialing from the HF**\n\nThe HF may initiate outgoing voice calls using the memory dialing feature of the AG. To start the call setup, the HF shall initiate the Service Level Connection establishment (if necessary) and send an\nATD>Nan…; command to the AG. The AG shall then start the call establishment procedure using the\nphone number stored in the AG memory location given by Nan…; and issue the +CIEV result code, with\nthe value (callsetup=2) to notify the HF that the call set-up has been successfully initiated.\n\nSee Section 5 for more information on the ATD>Nan… command.\n\nAs a precondition for this procedure, an ongoing Service Level Connection between the AG and the HF\nshall exist. If this connection does not exist, the HF shall autonomously establish the Service Level\nConnection using the proper procedure as described in Section 4.2.\n\nIf an Audio Connection is not established, the AG shall establish the proper Audio Connection and route\nthe audio paths of the outgoing call to the HF immediately following the commencement of the ongoing\ncall set up procedure.\n\nOnce alerting of the remote party begins, the AG shall issue the +CIEV result code, with the value\nindicating (callsetup=3).\n\nUpon call connection the AG shall send the +CIEV result code, with the value indicating (call=1).\n\nIf the normal outgoing call establishment procedure is interrupted for any reason, the AG shall issue the\n+CIEV result code, with the value indicating (callsetup=0), to notify the HF of this condition (see\nSection 4.15.2).\n\nBluetooth SIG Proprietary Page **54 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nIf the AG supports the “Three-way calling” feature and if a call is already ongoing in the AG, performing\nthis procedure shall result in a new call being placed to a third party with the current ongoing call put on\nhold. For details on how to handle multiparty calls refer to Section 4.22.2.\n\nIf there is no number stored for the memory location given by the HF, the AG shall respond with ERROR.\n\n|HF AG<br>Established Service Level Connection<br>(or optionally an Audio Connection)<br>er initiated action: Place call<br>ng memory dialing ATD>nnn…<br>OK<br>Outgoin<br>+CIEV: (callsetup = 2) success<br>AG shall<br>Audio Connection set up connecti<br>connecti<br>Established Audio Connection<br>The au<br>call are<br>he audio paths of the outgoing<br>all are available at the HF<br>+CIEV: (callsetup = 3)<br>Remote<br>… and bein<br>Remote<br>+CIEV: (call = 1)<br>Call active<br>Call acti<br>+CIEV: (callsetup = 0)|HF|Col3|Col4|AG|Col6|\n|---|---|---|---|---|---|\n|HF<br>AG<br>ATD>nnn… <br>Audio Connection set up <br>OK <br>Outgoin<br>success<br>+CIEV: (callsetup = 3) <br>AG shall<br>connecti<br>connecti<br>Established Audio Connection <br>he audio paths of the outgoing<br>all are available at the HF<br>The au<br>call are<br>Established Service Level Connection<br>(or optionally an Audio Connection) <br>Remote<br>and bein<br>+CIEV: (call = 1) <br>Remote<br>+CIEV: (callsetup = 2) <br>+CIEV: (callsetup = 0) <br>**… **<br>Call acti<br>Call active <br>er initiated action: Place call<br>ng memory dialing|HF|Established Service Level Connection<br>(or optionally an Audio Connection)|Established Service Level Connection<br>(or optionally an Audio Connection)|Established Service Level Connection<br>(or optionally an Audio Connection)|Outgoin<br>success<br>AG shall<br>connecti<br>connecti<br>The au<br>call are<br>Remote<br>and bein<br>Remote<br>Call acti|\n|HF<br>AG<br>ATD>nnn… <br>Audio Connection set up <br>OK <br>Outgoin<br>success<br>+CIEV: (callsetup = 3) <br>AG shall<br>connecti<br>connecti<br>Established Audio Connection <br>he audio paths of the outgoing<br>all are available at the HF<br>The au<br>call are<br>Established Service Level Connection<br>(or optionally an Audio Connection) <br>Remote<br>and bein<br>+CIEV: (call = 1) <br>Remote<br>+CIEV: (callsetup = 2) <br>+CIEV: (callsetup = 0) <br>**… **<br>Call acti<br>Call active <br>er initiated action: Place call<br>ng memory dialing|HF|ATD>nnn… <br>Audio Connection set up <br>OK <br>+CIEV: (callsetup = 2)|ATD>nnn… <br>Audio Connection set up <br>OK <br>+CIEV: (callsetup = 2)|ATD>nnn… <br>Audio Connection set up <br>OK <br>+CIEV: (callsetup = 2)|ATD>nnn… <br>Audio Connection set up <br>OK <br>+CIEV: (callsetup = 2)|\n|HF<br>AG<br>ATD>nnn… <br>Audio Connection set up <br>OK <br>Outgoin<br>success<br>+CIEV: (callsetup = 3) <br>AG shall<br>connecti<br>connecti<br>Established Audio Connection <br>he audio paths of the outgoing<br>all are available at the HF<br>The au<br>call are<br>Established Service Level Connection<br>(or optionally an Audio Connection) <br>Remote<br>and bein<br>+CIEV: (call = 1) <br>Remote<br>+CIEV: (callsetup = 2) <br>+CIEV: (callsetup = 0) <br>**… **<br>Call acti<br>Call active <br>er initiated action: Place call<br>ng memory dialing|HF|Established Audio Connection|Established Audio Connection|Established Audio Connection|Established Audio Connection|\n|HF<br>AG<br>ATD>nnn… <br>Audio Connection set up <br>OK <br>Outgoin<br>success<br>+CIEV: (callsetup = 3) <br>AG shall<br>connecti<br>connecti<br>Established Audio Connection <br>he audio paths of the outgoing<br>all are available at the HF<br>The au<br>call are<br>Established Service Level Connection<br>(or optionally an Audio Connection) <br>Remote<br>and bein<br>+CIEV: (call = 1) <br>Remote<br>+CIEV: (callsetup = 2) <br>+CIEV: (callsetup = 0) <br>**… **<br>Call acti<br>Call active <br>er initiated action: Place call<br>ng memory dialing|HF|+CIEV: (callsetup = 3) <br>+CIEV: (call = 1) <br>+CIEV: (callsetup = 0) <br>**… **|+CIEV: (callsetup = 3) <br>+CIEV: (call = 1) <br>+CIEV: (callsetup = 0) <br>**… **|+CIEV: (callsetup = 3) <br>+CIEV: (call = 1) <br>+CIEV: (callsetup = 0) <br>**… **|+CIEV: (callsetup = 3) <br>+CIEV: (call = 1) <br>+CIEV: (callsetup = 0) <br>**… **|\n\n##### **4.20 Last Number Re-Dial from the HF**\n\nThe HF may initiate outgoing voice calls by recalling the last number dialed by the AG. To start the call\nset-up, the HF shall initiate the Service Level Connection establishment (if necessary) and send an\nAT+BLDN command to the AG. The AG shall then start the call establishment procedure using the last\nphone number dialed by the AG, and issues the +CIEV result code, with the value (callsetup=2), to notify\nthe HF that the call set-up has been successfully initiated.\n\nSee Section 5 for more information on the AT+BLDN command.\n\nAs a precondition for this procedure, an ongoing Service Level Connection between the AG and the HF\nshall exist. If this connection does not exist, the HF shall autonomously establish the Service Level\nConnection using the proper procedure as described in Section 4.2.\n\nIf an Audio Connection is not established, the AG shall establish the proper Audio Connection and route\nthe audio paths of the outgoing call to the HF immediately following the commencement of the ongoing\ncall set-up procedure.\n\nOnce alerting of the remote party begins, the AG shall issue the +CIEV result code, with the value\nindicating (callsetup=3).\n\nBluetooth SIG Proprietary Page **55 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nUpon call connection the AG shall send the +CIEV result code, with the value indicating (call=1).\n\nIf the normal outgoing call establishment procedure is interrupted for any reason, the AG shall issue the\n+CIEV result code, with the value indicating (callsetup=0), to notify the HF of this condition (see\nSection 4.15.2).\n\nIf the AG supports the “Three-way calling” feature and if a call is already ongoing in the AG, performing\nthis procedure shall result in a new call being placed to a third party with the current ongoing call put on\nhold. For details on how to handle multiparty calls refer to Section 4.22.2.\n\nIf there is no number stored for the memory location given by the HF, the AG shall respond with ERROR.\n\nUser initiated action:\n\nPlace call to the last\nnumber dialed\n\n|HF|Col2|Col3|AG|Col5|\n|---|---|---|---|---|\n|utgoing<br>   HF<br> e|Established Service Level Connection<br>(or optionally an Audio Connection)|Established Service Level Connection<br>(or optionally an Audio Connection)|Established Service Level Connection<br>(or optionally an Audio Connection)|Outgoing<br>successfu<br>AG shall in<br>establishm<br>not presen<br>The audio<br>routed to<br>Remote p<br>and being<br>Remote p<br>Call active|\n|utgoing<br>   HF<br> e|AT+BLDN <br>Audio Connection set up <br>OK <br>+CIEV: (callsetup = 2)|AT+BLDN <br>Audio Connection set up <br>OK <br>+CIEV: (callsetup = 2)|AT+BLDN <br>Audio Connection set up <br>OK <br>+CIEV: (callsetup = 2)|AT+BLDN <br>Audio Connection set up <br>OK <br>+CIEV: (callsetup = 2)|\n|utgoing<br>   HF<br> e|Established Audio Connection|Established Audio Connection|Established Audio Connection|Established Audio Connection|\n|utgoing<br>   HF<br> e|+CIEV: (callsetup = 3)<br>+CIEV: (call = 1)<br>+CIEV: (callsetup = 0)<br>**… **|+CIEV: (callsetup = 3)<br>+CIEV: (call = 1)<br>+CIEV: (callsetup = 0)<br>**… **|+CIEV: (callsetup = 3)<br>+CIEV: (call = 1)<br>+CIEV: (callsetup = 0)<br>**… **|+CIEV: (callsetup = 3)<br>+CIEV: (call = 1)<br>+CIEV: (callsetup = 0)<br>**… **|\n\n##### **4.21 Call Waiting Notification Activation**\n\nThe HF may issue the AT+CCWA command to enable the “Call Waiting notification” function in the AG.\nOnce the “Call Waiting notification” is enabled, the AG shall send the corresponding +CCWA unsolicited\nresult code to the HF whenever an incoming call is waiting during an ongoing call. It is always assumed\nthat the “call waiting” service is already active in the network.\n\nOnce the HF issues the AT+CCWA command, the AG shall respond with OK. It shall then keep the “Call\nWaiting notification” enabled until either the AT+CCWA command is issued to disable “Call Waiting\nnotification,” or the current Service Level Connection between the AG and the HF is dropped for any\nreason.\n\nSee Section 5 for more information on the AT+CCWA command.\n\nBluetooth SIG Proprietary Page **56 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nAs a precondition for this procedure, an ongoing Service Level Connection between the AG and the HF\nshall exist. If this connection does not exist, the HF shall autonomously establish the Service Level\nConnection using the proper procedure as described in Section 4.2.\n\n##### **4.22 Three-Way Call Handling**\n\nProper management of several concurrent calls shall be accomplished by performing the procedures\ndescribed in [2] but with some limitations stated in this specification. For more details, refer to Section 5.\n\nThe HF device cannot always assume that the \"call hold and/or multiparty\" services are available in the\nnetwork. If the AG determines that a requested action by the HF device cannot be performed due to the\ninability of the network to support that feature or lack of subscriber subscription, the AG shall return a\n+CME error.\n\nThere are two +CME ERROR codes that are used to indicate network related failure reasons to the HF:\n\n- 30 - No Network Service. Indicates that an AT+CHLD command cannot be implemented due to\nnetwork limitations.\n\n- 31 - Network Timeout. Indicates that an AT+CHLD command cannot be implemented due to network\nproblems.\n\nIn general, when the user deals with multiple concurrent calls, the HF shall issue the corresponding\nAT+CHLD command as a result of user actions. This command allows the control of multiple concurrent\ncalls and provides means for holding calls, releasing calls, switching between two calls, and adding a call\nto a multiparty conference.\n\nWhen this feature is supported, the HF and AG are only mandated to implement the “basic Three-Way\ncalling” commands AT+CHLD = 1 and 2.\n\nThis section covers two cases. In one case, the third party call is received in the AG, and notification is\nsent to the HF via a Call Waiting notification. In the second case, the third party call is placed from the HF.\n\nSee Section 5 for more information on the AT+CHLD command.\n\nThe following preconditions apply for these procedures:\n\nBluetooth SIG Proprietary Page **57 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n- As a precondition for this procedure, an ongoing Service Level Connection between the AG and the\nHF shall exist. If this connection does not exist, the initiator of the procedure shall autonomously\nestablish the Service Level Connection using the proper procedure as described in Section 4.2.\n\n- An ongoing call in the AG shall exist."
    },
    {
        "section_number": "4.23",
        "section_title": "Calling Line Identification (CLI) Notification",
        "granularity_level": 2,
        "content": "The HF may issue the AT+CLIP command to enable the “Calling Line Identification notification” function\nin the AG.\n\nIf the calling subscriber number information is available from the network, the AG shall issue the +CLIP\nunsolicited result code just after every RING indication when the HF is alerted in an incoming call. See\nSection 4.13 for more details.\n\nOnce the HF issues the AT+CLIP command, the AG shall respond with OK. The AG shall then keep the\n“Calling Line Identification notification” enabled until either the AT+CLIP command is issued by the HF to\ndisable it, or the current Service Level Connection between the AG and the HF is dropped for any reason.\n\nSee Section 5 for more information on the AT+CLIP command.\n\nAs a precondition for this procedure, an ongoing Service Level Connection between the AG and the HF\nshall exist. If this connection does not exist, the HF shall autonomously establish the Service Level\nConnection using the proper procedure as described in Section 4.2.\n\n|HF AG<br>Established Service Level Connection<br>Internal event or user requested:<br>Enable CLI notification<br>The HF requests enabling CLI AT+CLIP=1<br>notification<br>OK The AG<br>n|Col2|AG|Col4|\n|---|---|---|---|\n|HF <br>AG <br>AT+CLIP=1 <br>Internal event or user requested:<br>Enable CLI notification<br>The AG<br>n<br>OK<br>The HF requests enabling CLI<br>notification<br>Established Service Level Connection|HF <br>AG <br>AT+CLIP=1 <br>Internal event or user requested:<br>Enable CLI notification<br>The AG<br>n<br>OK<br>The HF requests enabling CLI<br>notification<br>Established Service Level Connection|AG|The AG<br>n|\n|HF <br>AG <br>AT+CLIP=1 <br>Internal event or user requested:<br>Enable CLI notification<br>The AG<br>n<br>OK<br>The HF requests enabling CLI<br>notification<br>Established Service Level Connection|Established Service Level Connection|Established Service Level Connection|Established Service Level Connection|\n|HF <br>AG <br>AT+CLIP=1 <br>Internal event or user requested:<br>Enable CLI notification<br>The AG<br>n<br>OK<br>The HF requests enabling CLI<br>notification<br>Established Service Level Connection|AT+CLIP=1 <br>OK|AT+CLIP=1 <br>OK|AT+CLIP=1 <br>OK|\n\nBluetooth SIG Proprietary Page **60 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n##### **4.24 The HF Requests Turning off the AG’s EC and NR**\n\nThe HF may disable the echo canceling and noise reduction functions resident in the AG via the\nAT+NREC command.\n\nIf the HF supports embedded EC and/or NR functions, it shall support the AT+NREC command as\ndescribed in the procedures in this section. Moreover, if the HF has these functions enabled, it shall\nperform this procedure before any Audio Connection between the HF and the AG is established.\n\nBy default, if the AG supports its own embedded echo canceling and/or noise reduction functions, it shall\nhave them activated until the AT+NREC command is received. From then on, and until the current\nService Level Connection between the AG and HF is dropped for any reason, the AG shall disable these\nfunctions every time an Audio Connection between the HF and the AG is used for audio routing.\n\nIf the AG does not support any echo canceling and noise reduction functions, it shall respond with the\nERROR indicator on reception of the AT+NREC command.\n\nSee Section 5 for more information on the AT+NREC command.\n\nAs a precondition for this procedure, an ongoing Service Level Connection between the AG and the HF\nshall exist. If this connection does not exist, the HF shall autonomously establish the Service Level\nConnection using the proper procedure as described in Section 4.2.\n\nThe HF sends the AT+NREC command and AG confirms with either OK or ERROR indication.\n\n##### **4.25 Voice Recognition Activation / Enhanced Voice Recognition** **Activation**\n\nThe HF, via the AT+BVRA command, or the AG autonomously, may activate/deactivate the voice\nrecognition function resident in the AG. The Enhanced Voice Recognition Status and Voice Recognition\nText features enhance the use of the AT+BVRA command. This is described in detail in Section 5.3.\nBeyond the audio routing and voice recognition activation capabilities, the rest of the voice recognition\nfunctionality is implementation dependent.\n\nWhenever the AG supports a voice recognition function, it shall support the AT+BVRA command as\ndescribed in the procedures in this section.\n\nBluetooth SIG Proprietary Page **61 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nIf the HF issues the AT+BVRA command, the AG shall respond with the OK result code if it supports\nvoice recognition, then initiate an Audio Connection to the HF (if the Audio Connection does not already\nexist) and begin the voice input sequence.\n\nIf the AG does not support voice recognition, the AG shall respond with the ERROR indication.\n\nWhen the voice recognition function is activated from the AG, it shall inform the HF via the +BVRA: 1\nunsolicited result code and the AG shall initiate an Audio Connection to the HF (if the Audio Connection\ndoes not already exist) and begin the voice input sequence.\n\nOnce activated, depending upon the voice recognition implementation, the AG shall then keep the voice\nrecognition function enabled:\n\n- For the duration of time supported by the implementation (“momentary on” voice recognition\nimplementation). In this case, the AG shall notify the HF by sending a +BVRA: 0 unsolicited result\ncode.\n\n- Or until the AT+BVRA command is issued to disable voice recognition from the HF.\n\n- Or until the current Service Level Connection between the AG and the HF is dropped for any reason.\n\nSee Section 5 for more information on the AT+BVRA command and the +BVRA result code.\n\nIf the Enhanced Voice Recognition Status or Voice Recognition Text features are supported, the\nAT+BVRA command is extended with the value 2. The value 2 shall only be used if both the AG and the\nHF support the Enhanced Voice Recognition Status feature. It indicates that the HF is ready to accept\naudio when the Audio Connection is first established.\n\nThe HF may send this value during an ongoing VR (Voice Recognition) session to terminate audio output\nfrom the AG (if there is any) and prepare the AG for new audio input.\n\nThe syntax of the +BVRA command is extended with <vrecstate> and <textualRepresentation>.\n\nFor example, <vrecstate> of 5 (b101) means that the AG is listening to the audio input and processing at\nthe same time.\n\nExamples that build on one another for textual representation:\n\n1. +BVRA: 1,1,12AA,1,1,“Message 1 from Janina”: A new text is sent from the AG to the HF. The AG\n\nnow has the text:\n12AA: Message 1 from Janina\n\n2. +BVRA: 1,1,12AB,1,1,“Message 2 from Melissa”: A new text is sent from the AG to the HF with a new\n\n<textID>. The AG now has the text:\n12AA: Message 1 from Janina\n12AB: Message 2 from Melissa\n\n3. +BVRA: 1,1,12AB,1,2,“Message 3 from Melissa”: A new text is sent from the AG to the HF with the\n\nsame <textID> as example 2. Since the textID is the same as in example 2 and the operation is\nreplace, the text from example 2 is replaced by the new text. So the AG now has the texts:\n12AA: Message 1 from Janina\n12AB: Message 3 from Melissa\n\nBluetooth SIG Proprietary Page **62 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n4. +BVRA: 1,1,12AB,1,3,“ with new stuff”: A new text is sent from the AG to the HF and gets attached to\n\nthe old text. Since the textID is the same as in example 3 and the operation is append, the new text is\nappended to the text from example 3. The AG now has the texts:\n12AA: Message 1 from Janina\n12AB: Message 3 from Melissa with new stuff\n\nFor more information, refer to Section 5.3.\n\nA precondition for these procedures is that an ongoing Service Level Connection between the AG and the\nHF shall exist. If this connection does not exist, the initiator of the procedure shall autonomously establish\nthe Service Level Connection using the proper procedure as described in Section 4.2."
    },
    {
        "section_number": "4.27",
        "section_title": "Attach a Phone Number for a Voice Tag",
        "granularity_level": 2,
        "content": "This procedure is applicable to HFs supporting internal voice recognition functionality. It provides a\nmeans to read numbers from the AG for the purpose of creating a unique voice tag and storing the\nnumber and its linked voice tag in the HF’s memory. The HF may then use its internal Voice Recognition\nto dial the linked phone numbers when a voice tag is recognized by using the procedure “Place a call with\nthe phone number supplied by the HF” described in Section 4.18.\n\nUpon an internal event or user action, the HF may request a phone number from the AG by issuing the\nAT+BINP=1 command. Depending on the current status of the AG, it may either accept or reject this\nrequest.\n\nIf the AG accepts the request, it shall obtain a phone number and send the phone number back to the HF\nby issuing the +BINP response.\n\nIf the AG rejects the request from the HF, it shall issue the ERROR result code to indicate this\ncircumstance to the HF.\n\nBluetooth SIG Proprietary Page **67 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nWhen this procedure is executed multiple times (to retrieve multiple AG phone numbers to be linked to\nvoice tags), it is the responsibility of the AG to provide the next phone number to be passed to the HF\neach time the procedure is executed.\n\nSee Section 5 for more information on the AT+BINP command and the +BINP response.\n\nAs a precondition for this procedure, an ongoing Service Level Connection between the AG and the HF\nshall exist. If this connection does not exist, the HF shall autonomously establish the Service Level\nConnection using the proper procedure as described in Section 4.2.\n\n|HF|Col2|AG|Col4|\n|---|---|---|---|\n|l event<br>  action|l event<br>  action|l event<br>  action|AG obtain<br>phone num<br>ERROR if th<br>is rejected|\n|l event<br>  action|Established Service Level Connection|Established Service Level Connection|Established Service Level Connection|\n|l event<br>  action|AT+BINP=1 <br>OK<br>               ERROR <br>                  +BINP: <Phone number>|AT+BINP=1 <br>OK<br>               ERROR <br>                  +BINP: <Phone number>|AT+BINP=1 <br>OK<br>               ERROR <br>                  +BINP: <Phone number>|\n\n##### **4.28 Transmit DTMF Codes**\n\nDuring an ongoing call, the HF transmits the AT+VTS command to instruct the AG to transmit a specific\nDTMF code to its network connection.\n\nSee Section 5 for more information on the AT+VTS command.\n\nThe following preconditions apply for this procedure:\n\n- An ongoing Service Level Connection between the AG and the HF shall exist. If this connection does\nnot exist, the HF shall autonomously establish the Service Level Connection using the proper\nprocedure as described in Section 4.2.\n\n- An ongoing call in the AG exists.\n\nBluetooth SIG Proprietary Page **68 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n|HF AG<br>Established Service Level Connection<br>User initiated action:<br>The user pushes a key Ong<br>AT+VTS=…<br>OK The AG g<br>code tow|Col2|AG|Col4|\n|---|---|---|---|\n|HF <br>AG <br>AT+VTS=… <br>User initiated action:<br>The user pushes a key<br>OK<br>The AG g<br>code tow<br>Ong<br>Established Service Level Connection|HF <br>AG <br>AT+VTS=… <br>User initiated action:<br>The user pushes a key<br>OK<br>The AG g<br>code tow<br>Ong<br>Established Service Level Connection|AG|The AG g<br>code tow<br>Ong|\n|HF <br>AG <br>AT+VTS=… <br>User initiated action:<br>The user pushes a key<br>OK<br>The AG g<br>code tow<br>Ong<br>Established Service Level Connection|Established Service Level Connection|Established Service Level Connection|Established Service Level Connection|\n|HF <br>AG <br>AT+VTS=… <br>User initiated action:<br>The user pushes a key<br>OK<br>The AG g<br>code tow<br>Ong<br>Established Service Level Connection|AT+VTS=… <br>OK|AT+VTS=… <br>OK|AT+VTS=… <br>OK|\n\n##### **4.29 Remote Audio Volume Control**"
    },
    {
        "section_number": "4.30",
        "section_title": "Response and Hold",
        "granularity_level": 2,
        "content": "This procedure allows the user to put an incoming call on hold and then accept or reject the call from the\nHF or AG. This feature is specific to the limited markets where PDC and CDMA networks support this\nfunction."
    },
    {
        "section_number": "4.31",
        "section_title": "Subscriber Number Information",
        "granularity_level": 2,
        "content": "This procedure allows HF to query the AG subscriber number.\n\nInformation\n\n|HF|Col2|AG|Col4|\n|---|---|---|---|\n|to get<br> mber|to get<br> mber|to get<br> mber|AG send<br>Number|\n|to get<br> mber|Established Service Level Connection|Established Service Level Connection|Established Service Level Connection|\n|to get<br> mber|AT+CNUM<br>+CNUM:,<number>,<type>[,, <service>]<br>OK<br>        +CNUM:,<number>,<type>[,, <service>]<br>**       . . .**|AT+CNUM<br>+CNUM:,<number>,<type>[,, <service>]<br>OK<br>        +CNUM:,<number>,<type>[,, <service>]<br>**       . . .**|AT+CNUM<br>+CNUM:,<number>,<type>[,, <service>]<br>OK<br>        +CNUM:,<number>,<type>[,, <service>]<br>**       . . .**|\n\nThis procedure illustrates AG response to the query of an empty subscriber number.\n\nInformation\n\n|HF|Col2|AG|Col4|\n|---|---|---|---|\n|to get<br>  mber|to get<br>  mber|to get<br>  mber||\n|to get<br>  mber|Established Service Level Connection|Established Service Level Connection|Established Service Level Connection|\n|to get<br>  mber|AT+CNUM<br>OK|AT+CNUM<br>OK|AT+CNUM<br>OK|\n\nBluetooth SIG Proprietary Page **79 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nThe following precondition applies for this procedure:\n\n- An ongoing Service Level Connection between the HF and AG shall exist. If this connection does not\nexist, the HF shall establish a connection using the “Service Level Connection set up” procedure\ndescribed in Section 4.2.\n\n- The HF shall send the AT+CNUM command to query the AG subscriber number information.\n\n- If the subscriber number information is available, the AG shall respond with the +CNUM response. If\nmultiple numbers are available, the AG shall send a separate +CNUM response for each available\nnumber.\n\n- The AG shall signal the completion of the AT+CNUM action command with an OK response. The OK\nwill follow zero or more occurrences of the +CNUM response. (See Figure 4.57 and Figure 4.58).\n\n##### **4.32 Enhanced Call Status Mechanisms**"
    },
    {
        "section_number": "4.33",
        "section_title": "Enhanced Call Control Mechanisms",
        "granularity_level": 2,
        "content": "As stated earlier, the Enhanced Call Control mechanism is simply an extension of the current AT+CHLD\ncommand. These extensions are defined as additional arguments to the AT+CHLD command. The new\narguments for this command include an index of a specific call as indicated in the +CLCC response."
    },
    {
        "section_number": "4.34",
        "section_title": "Indicators Activation and Deactivation",
        "granularity_level": 2,
        "content": "The HF shall execute this procedure to change the subset of indicators that shall be sent by the AG.\n\nThe following preconditions apply for this procedure:\n\nAn ongoing Service Level Connection between the AG and the HF shall exist. If this connection does not\nexist, the HF shall autonomously establish the Service Level Connection using the proper procedure as\ndescribed in Section 4.2.\n\nBluetooth SIG Proprietary Page **82 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nFigure 4.65 does not imply a mandatory order for CIND fields, nor does it imply a mandatory set of CIND\nindicator fields.\n\nThe HF shall issue the AT+BIA command if it needs to change the activated/deactivated status of\nindicators in the AG.\n\nThe AG shall send the OK result code to the HF after processing a correctly formatted command.\n\nThe AG shall send the ERROR result code to the HF if the command is incorrectly formatted.\n\nFollowing the successful processing of an AT+BIA command, the AG shall not send the indicators that\nare deactivated.\n\nThe AG shall send the activated indicators response only if the event reporting is enabled.\n\nThe effect of the AT+BIA command shall persist during the current Service Level Connection only. When\nan Service Level Connection is terminated and a new Service Level Connection is established all\nindicators are activated by default.\n\nIt is valid to send the AT+BIA command while the event reporting is disabled. If the event reporting is\nenabled before the Service Level Connection is terminated, the AG shall send only the indicators that\nwere activated by the most recently processed AT+BIA command.\n\nIf the event reporting (CMER) is disabled and then re-enabled, the AG shall send only the indicators that\nwere activated by the most recently processed AT+BIA command, or all indicators in the case where no\nAT+BIA was sent by the HF.\n\nThe AT+BIA command has no impact on the response to the “AT+CIND?” read command (see Section\n5.2).\n\nA restriction to the AT+BIA command applies to the indicators call, call status and held call. The AG shall\nalways consider these indicators activated, even if the HF requests their deactivation.\n\nIt is mandatory for the AG to support the AT+BIA command.\n\nIt is optional for the HF to support the AT+BIA command.\n\nBluetooth SIG Proprietary Page **83 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nIt is optional for HF device to use the AT+BIA command.\n\nSee Section 5.2 for more information on the AT+CMER (event reporting) command.\n\n##### **4.35 HF Indicators**\n\nThe HF Indicator feature is used to allow a Hands-Free device to notify the values of certain HF indicators\nto an Audio Gateway. The HF may share information such as Battery Level or Enhanced Driver Safety\non/off using this feature.\n\nAs described in Section 4.2.1, the devices shall determine if the HF Indicators feature is supported by\nverifying the remote’s BRSF bits."
    },
    {
        "section_number": "5.1",
        "section_title": "General",
        "granularity_level": 2,
        "content": "For the exchange of the commands and unsolicited results codes, the format, syntax and procedures of\n3GPP 27.007 [2] shall be taken as reference. The following rules specifically apply for the HFP\nspecification:\n\n- Only one command (or unsolicited result code) per command line needs to be expected.\n\n- The AG, by default, shall not echo the command characters.\n\n- The AG shall always transmit result codes using verbose format.\n\n- The characters below shall be used for AT commands and result codes formatting:\n\n**<cr>** corresponds to the _carriage return (0/13)_ as stated in [5].\n\n**<lf>** corresponds to the _line feed (0/10)_ as stated in [5].\n\n- The format of an AT command from the HF to the AG shall be:\n\n<AT command><cr>\n\n- The format of the OK code from the AG to the HF shall be:\n\n<cr><lf>OK<cr><lf>\n\n- The format of the generic ERROR code from the AG to the HF shall be:\n\n<cr><lf>ERROR<cr><lf>\n\n- The format of an unsolicited result code from the AG to the HF shall be:\n\n<cr><lf><result code><cr><lf>\n\nThe Hands-Free Profile uses a subset of AT commands and result codes from existing standards; these\nare listed in Section 5.2. Section 5.3 lists the new Bluetooth defined AT commands and result codes not\nre-used from any existing standard.\n\nIn general, the AG shall use the OK code, as described in Section 5.2, for acknowledgement of the proper\nexecution of a command and respond with the proper error indication to any unknown command received\nfrom the HF.\n\nIt is mandatory for the AG to properly respond to any error condition and for the HF to properly process\nthe corresponding error indication code received from the AG. The code ERROR, as described in Section\n5.2, shall be used as error indication for this purpose.\n\nThe HF shall always ignore any unknown or unexpected indication code received from the AG for AT\ncommands defined in this specification. Handling of AT commands not defined in this specification is left\nto the implementation. The only exception is the case in which the AG issues a “Mobile Equipment Error”\nindication using the +CME ERROR: result code (see [2]). In this case, the HF shall interpret this result\ncode in the same way as if it was a generic ERROR code.\n\nAs a general rule, when an AT command or result code of this specification is implemented, support for\nthe associated parameters described in this specification, and all their corresponding possible values,\nshall be considered mandatory unless otherwise explicitly stated in each particular case.\n\nBluetooth SIG Proprietary Page **87 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n##### **5.2 AT Capabilities Re-Used from GSM 07.07 and 3GPP 27.007**\n\nThe re-used AT commands and unsolicited result codes for implementing the functionality described in\nthis specification are listed below:\n\n- ATA\n\nStandard call answer AT command. See Annex G in [2].\n\n- ATDdd…dd;\n\nStandard AT command intended for placing a call to a phone number. Only voice calls are covered in\n\nthis specification. See Section 6.2 in [2].\n\n- ATD>nnn...;\n\nExtension of the standard ATD command, intended for memory dialing. Only voice calls are covered\nin this specification. See Section 6.3 in [2].\n\n- ERROR\n\nStandard error indication code. It shall be issued on detection of any syntax, format or procedure\nerror condition. The “Mobile Equipment Error” report code “+CME ERROR:” is covered below. See\nAnnex B in [2].\n\n- OK\n\nStandard acknowledgement to the execution of a command. See Annex B in [2].\n\n- NO CARRIER, BUSY, NO ANSWER, DELAYED, REMOVED FROM THE NETWORK\n\nExtended response indication codes for AT commands. These codes shall be issued from the AG to\nthe HF as responses to AT commands from the HF to the AG or from the AG as unsolicited result\ncodes. These are in addition to the +CME ERROR: responses.\n\n- RING\n\nStandard “incoming call” indication. See Annex B in [2].\n\n- AT+CCWA\n\nStandard “Call Waiting notification” AT command. Within the\nAT+CCWA=[<n>[,<mode>[,<class>]]]command, only enabling/disabling of the Call Waiting\nnotification unsolicited result code +CCWA, using the <n> parameter, is covered in this specification.\nSee Section 7.12 in [2].\n\n- +CCWA\n\nStandard “Call Waiting notification” unsolicited result code.\n\nIn the +CCWA result code only <number> and <type> parameters are covered in this specification.\nOther parameters are not considered relevant in this specification and shall be ignored by the HF.\n\nThe <number> parameter shall be a text string and shall always be contained within double-quotes.\n\nThe <type> field specifies the format of the phone number provided, and can be one of the following\nvalues:\n\nBluetooth SIG Proprietary Page **88 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nvalues 128-143: The phone number format may be a national or international format, and may\ncontain prefix and/or escape digits. No changes on the number presentation are required.\n\nvalues 144-159: The phone number format is an international number, including the country code\nprefix. If the plus sign (\"+\") is not included as part of the number and shall be added by the AG as\nneeded.\n\nvalues 160-175: National number. No prefix nor escape digits included.\n\nSee Section 7.12 in [2].\n\n**AT+CHLD**\n\nStandard call hold and multiparty handling AT command. In the AT+CHLD=<n> command, this\nspecification only covers values for <n> of 0, 1, 1<idx>, 2, 2<idx>, 3 and 4, where:\n\n   - 0 = Releases all held calls or sets User Determined User Busy (UDUB) for a waiting call.\n\n   - 1 = Releases all active calls (if any exist) and accepts the other (held or waiting) call.\n\n   - 1<idx> = Releases call with specified index (<idx>).\n\n   - 2 = Places all active calls (if any exist) on hold and accepts the other (held or waiting) call.\n\n   - 2<idx> = Request private consultation mode with specified call (<idx>). (Place all calls on hold\nEXCEPT the call indicated by <idx>.)\n\n   - 3 = Adds a held call to the conversation.\n\n   - 4 = Connects the two calls and disconnects the subscriber from both calls (Explicit Call Transfer).\nSupport for this value and its associated functionality is optional for the HF.\n\n   - Where both a held and a waiting call exist, the above procedures shall apply to the waiting call\n(i.e., not to the held call) in conflicting situation.\n\nThe test command AT+CHLD=? may be used for retrieving information about the call hold and\nmultiparty services available in the AG (see Section 4.2.1).\n\nSee Section 7.13 in [2] and Section 4.5.5.1 in [6] for details.\n\n- AT+CHUP\n\nStandard hang-up AT command. Execution command causes the AG to terminate the currently active\ncall. This command shall have no impact on the state of a held call except in the use of rejecting a\ncall placed on hold by the Respond and Hold feature as defined in Section 4.30.6.\n\nSee Section 6.5 in [2].\n\nAT+CHUP is also used as the command to reject any incoming call prior to answer.\n\n- AT+CIND\n\nStandard indicator update AT command. Only read command AT+CIND? and test command\nAT+CIND=? are required in this specification.\n\nThe AT+CIND? read command is used to get current status of the AG indicators.\n\nThe AG shall return all the indicators listed in the AT+CIND=? command.\n\nBluetooth SIG Proprietary Page **89 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nThe deactivation of any indicator(s) using AT+BIA command shall have no effect on the AG’s\nresponse to the AT+CIND? read command.\n\nThe AT+CIND=? test command is used to retrieve the mapping between each indicator supported by\nthe AG and its corresponding range and order index. It shall be issued at least once before any other\ncommand related to these indicators (AT+CIND? or AT+CMER) is used.\n\nThe Hands Free Profile specification limits the number of indicators returned by the AG to a maximum\nof 20.\n\nThe following indicators are covered in this specification:\n\n   - service: Service availability indication, where:\n\n<value>=0 implies no service. No Home/Roam network available.\n\n<value>=1 implies presence of service. Home/Roam network available.\n\n   - call: Standard call status indicator, where:\n\n<value>=0 means there are no calls in progress\n\n<value>=1 means at least one call is in progress\n\n   - callsetup: Bluetooth proprietary call set up status indicator [4] . Support for this indicator is optional\nfor the HF. When supported, this indicator shall be used in conjunction with, and as an extension\nof the standard call indicator. Possible values are as follows:\n\n<value>=0 means not currently in call set up.\n\n<value>=1 means an incoming call process ongoing.\n\n<value>=2 means an outgoing call set up is ongoing.\n\n<value>=3 means remote party being alerted in an outgoing call.\n\nSee Section 8.9 in [2].\n\n   - callheld: Bluetooth proprietary call hold status indicator. Support for this indicator is mandatory for\nthe AG, optional for the HF. Possible values are as follows:\n\n0= No calls held\n\n1= Call is placed on hold or active/held calls swapped\n\n(The AG has both an active AND a held call)\n\n2= Call on hold, no active call\n\n   - signal: Signal Strength indicator, where:\n\n<value>= ranges from 0 to 5\n\n   - roam: Roaming status indicator, where:\n\n<value>=0 means roaming is not active\n\n4 This status indicator is not defined in the GSM 07.07 specification\n\nBluetooth SIG Proprietary Page **90 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n<value>=1 means a roaming is active\n\n   - battchg: Battery Charge indicator of AG, where:\n\n<value>=ranges from 0 to 5\n\n- +CIND\n\nStandard list of current phone indicators. See Section 8.9 in [2].\n\n- AT+CLCC\n\nStandard list current calls command. See Section 7.18 in [2].\n\n- +CLCC\n\nStandard list current calls result code. See Section 7.18 in [2].\n\nSupported parameters are as follows:\n\n   - idx= The numbering (starting with 1) of the call given by the sequence of setting up or receiving\nthe calls (active, held or waiting) as seen by the served subscriber. Calls hold their number until\nthey are released. New calls take the lowest available number.\n\n   - dir= 0 (outgoing), 1 (incoming)\n\n   - status=\n\n`o` 0 = Active\n\n`o` 1 = Held\n\n`o` 2 = Dialing (outgoing calls only)\n\n`o` 3 = Alerting (outgoing calls only)\n\n`o` 4 = Incoming (incoming calls only)\n\n`o` 5 = Waiting (incoming calls only)\n\n`o` 6 = Call held by Response and Hold\n\n   - mode= 0 (Voice), 1 (Data), 2 (FAX)\n\n   - mpty=\n\n`o` 0 - this call is NOT a member of a multi-party (conference) call\n\n`o` 1 - this call IS a member of a multi-party (conference) call\n\n   - number (optional) = The <number> parameter shall be a text string and shall always be contained\nwithin double quotes.\n\n   - type (optional) = The <type> parameter specifies the format of the phone number provided. The\n<type> field can be one of the following values:\n\n    - values 128 to 143: The phone number format may be a national or international format and may\ncontain prefix and/or escape digits. No changes to the number presentation are required.\n\n    - values 144 to 159: The phone number format is an international number format, including the\ncountry code prefix. If the plus sign (“+”) is not included as part of the number, the plus sign (“+”)\nshall be added by the AG as needed.\n\nBluetooth SIG Proprietary Page **91 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n    - values 160 to 175: The phone number format is a national number format. No prefix nor escape\ndigits are included.\n\nIf the <number> parameter is not provided, the <type> parameter shall be excluded.\n\n- **AT+COPS**\n\nThe AT+COPS=3,0 shall be sent by the HF to the AG prior to sending the AT+COPS? command.\nAT+COPS=3,0 sets the format of the network operator string to the long format alphanumeric.\n\nThe AT+COPS? command is used for reading network operator. This profile shall only support the\n\"reading\" of the name of the network operator. The response to this command from the AG shall\nreturn a +COPS:<mode>,<format>,<operator> where:\n\n<mode> contains the current mode and provides no information with regard to the name of the\noperator.\n\n<format> specifies the format of the <operator> parameter string, and shall always be 0 for this\nspecification.\n\n<operator> specifies a quoted string in alphanumeric format representing the name of the network\noperator. This string shall not exceed 16 characters. See Section 7.3 in [2].\n\n- AT+CMEE\n\nStandard AT command used to enable the use of result code +CME ERROR: <err> as an indication\nof an error relating to the functionality of the AG.\n\nThe set command AT+CMEE=1 is covered in this specification.\n\n- +CME ERROR\n\nThis is the Extended Audio Gateway Error Result Code response. Format of the response is: +CME\nERROR: <err>. The format of <err> shall be numeric in this specification. The possible values for\n<err> covered in this specification are described below. These error codes may be provided instead\nof the standard ERROR response code to provide additional information to the HF. The ERROR\nresponse code is still allowed while using the Extended Audio Gateway Error Result Codes.\n\n+CME ERROR: 0 – AG failure\n\n+CME ERROR: 1 – no connection to phone\n\n+CME ERROR: 3 – operation not allowed\n\n+CME ERROR: 4 – operation not supported\n\n+CME ERROR: 5 – PH-SIM PIN required\n\n+CME ERROR: 10 – SIM not inserted\n\n+CME ERROR: 11 – SIM PIN required\n\n+CME ERROR: 12 – SIM PUK required\n\n+CME ERROR: 13 – SIM failure\n\n+CME ERROR: 14 – SIM busy\n\nBluetooth SIG Proprietary Page **92 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n+CME ERROR: 16 – incorrect password\n\n+CME ERROR: 17 – SIM PIN2 required\n\n+CME ERROR: 18 – SIM PUK2 required\n\n+CME ERROR: 20 – memory full\n\n+CME ERROR: 21 – invalid index\n\n+CME ERROR: 23 – memory failure\n\n+CME ERROR: 24 – text string too long\n\n+CME ERROR: 25 – invalid characters in text string\n\n+CME ERROR: 26 – dial string too long\n\n+CME ERROR: 27 – invalid characters in dial string\n\n+CME ERROR: 30 – no network service\n\n+CME ERROR: 31 - network Timeout.\n\n+CME ERROR: 32 – network not allowed – Emergency calls only\n\n- AT+CLIP\n\nStandard “Calling Line Identification notification” activation AT command. It enables/disables the\nCalling Line Identification notification unsolicited result code +CLIP. See Section 7.6 in [2].\n\n- +CLIP\n\nStandard “Calling Line Identification notification” unsolicited result code.\n\nIn the +CLIP: <number>, type> [,<subaddr>,<satype> [,[<alpha>] [,<CLI validity>]]] result code. Only\n<number> and <type> parameters are covered in this specification. Other parameters are not\nconsidered relevant in this specification and shall be ignored by the HF.\n\nThe <number> parameter shall be a text string and shall always be contained within double-quotes.\n\nThe <type> field specifies the format of the phone number provided, and can be one of the following\nvalues:\n\n   - values 128-143: The phone number format may be a national or international format, and may\ncontain prefix and/or escape digits. No changes on the number presentation are required.\n\n   - values 144-159: The phone number format is an international number, including the country code\nprefix. If the plus sign (\"+\") is not included as part of the number and shall be added by the AG as\nneeded.\n\n   - values 160-175: National number. No prefix nor escape digits included.\n\n   - See Section 7.11 in [2].\n\n- AT+CMER\n\nStandard event reporting activation/deactivation AT command.\n\nBluetooth SIG Proprietary Page **93 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nIn the AT+CMER=[<mode>[,<keyp>[,<disp>[,<ind> [,<bfr>]]]]] command, only the <mode>, and <ind>\nparameters are relevant for this specification. Only their values <mode>=(3) and <ind>=(0,1) are\ncovered in this specification. See Section 8.10 in [2].\n\nThe following examples show how the AT+CMER command may be used for activating or\ndeactivating the “indicator events reporting” result code:\n\nAT+CMER=3,0,0,1 activates “indicator events reporting”.\n\nAT+CMER=3,0,0,0 deactivates “indicator events reporting”.\n\n- +CIEV\n\nStandard “indicator events reporting” unsolicited result code.\n\nIn the +CIEV: <ind>,<value> result code, only the indicators stated in the AT+CIND command above\nare relevant for this specification where:\n\n   - <ind>: Order index of the indicator within the list retrieved from the AG with the AT+CIND=?\ncommand. The first element of the list shall have <ind>=1.\n\n   - <value>: current status of the indicator.\n\nIf the HF receives any unknown indicator or value, it shall ignore it.\n\nSee Section 8.10 in [2].\n\n- AT+VTS\n\nStandard DTMF generation AT command. Only the AT+VTS=<DTMF> command format is covered in\nthis specification.\n\nSee Annex C.2.11 in [2].\n\n- AT+CNUM\n\n_Syntax:_\n\nAT+CNUM (Retrieve Subscriber Number Information)\n\nAT+CNUM=? (Test Subscriber Number Information – Not Implemented)\n_Description:_\n\nCommand issued by HF for the “Subscriber Number Information” feature in the AG.\n\nOnly the action command AT+CNUM format is used.\n\n- **+CNUM**\n\n_Syntax:_\n\n+CNUM: [<alpha>],<number>, <type>,[<speed>,<service>] (Response for AT+CNUM)\n\n_Description:_\n\nStandard Response used for sending the “Subscriber Number Information” from AG to HF.\n\nThe AG shall send the +CNUM: response for the AT+CNUM from the HF.\n\n_Values:_\n\n   - <alpha>: This optional field is not supported, and shall be left blank.\n\nBluetooth SIG Proprietary Page **94 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n   - <number>: Quoted string containing the phone number in the format specified by <type>.\n\n   - <type> field specifies the format of the phone number provided, and can be one of the following\nvalues:\n\n   - values 128-143: The phone number format may be a national or international format, and may\ncontain prefix and/or escape digits. No changes on the number presentation are required.\n\n   - values 144-159: The phone number format is an international number, including the country code\nprefix. If the plus sign (\"+\") is not included as part of the number and shall be added by the AG as\nneeded.\n\n   - values 160-175: National number. No prefix nor escape digits included.\n\n   - <speed>: This optional field is not supported, and shall be left blank.\n\n   - <service>: Indicates which service this phone number relates to. Shall be either 4 (voice) or 5\n(fax).\n\nExample:\n\n+CNUM:,\"5551212\",129,,4\n\nSee section 7.1 in [2].\n\n##### **5.3 Bluetooth Defined AT Capabilities**\n\nThe GSM 07.07 [2] format and syntax rules shall be taken as the reference for these commands.\n\nThe new Bluetooth specific AT capabilities are listed below:\n\n- **AT+BIA** (Bluetooth Indicators Activation)\n\n_Syntax_ : AT+BIA=[[<indrep 1>][,[<indrep 2>][,…[,[<indrep n>]]]]]]\n\n_Description_ :\n\nActivates or deactivates the indicators individually. The mapping of the indicators is given by the\n“AT+CIND=?” test command (see Section 5.2).\n\n< _indrep x_ >: reporting state of the indicator x. 1 to activate, 0 to deactivate.\n\nIf an indicator state is omitted between commas, the current reporting state of that indicator shall\nnot change. For example, if the HF sends the command “AT+BIA=,1,,0” only the second and\nfourth indicators may be affected. The reporting state of indicators one and three shall remain\nunchanged.\n\nIf the AG supports more indicators than the number of indicator-reporting-states provided by the\nHF, the AG shall maintain the current reporting states of those indicators. For example, if the AG\nsupports five indicators and the HF sends the command “AT+BIA=1,0,1“ then only the first three\nAG indicators may be affected by the command.\n\nCall, Call Setup, and Held Call indicators have been defined as mandatory indicators. This\nimplies that whatever the reporting state the HF gives, these indicators shall always been kept\nactivated by the AG.\n\nThe AG shall gracefully ignore any excess parameter(s) at the end.\n\nThe AG shall silently ignore a request to deactivate a mandatory indicator.\n\nBluetooth SIG Proprietary Page **95 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nThe previous three points allow the HF to activate or deactivate all the indicators, except the\nmandatory ones, by using a fixed string.\n\nFor example, if the maximum indicator count is 20:\n\nAll indicators can be set to active by using the fixed string:\n\nAT+BIA=1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1\n\nand to inactive (except for the always active ones) by using:\n\nAT+BIA=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0\n\nThe actual number of allowed indicators is defined by the AT+CIND command.\n\n- **AT+BINP (Bluetooth INPut)**\n\n_Syntax:_ AT+BINP=<datarequest>\n\n_Expected response:_ +BINP: <dataresp1>…<datarespn>\n\n_Description:_\n\nCommand used for requesting some specific data input from the AG [5] . On reception of this\ncommand the AG shall perform the proper actions such that the requested information is sent\nback to the HF using the +BINP response.\n\nThe type of data the HF shall expect in the <dataresp> parameter returned by the AG depends on\nthe information requested in each case.\n\nOnly support for execution command is mandated. Neither the read nor test commands are\nmandatory.\n\nValues:\n\n<datarequest>: 1, where\n\n1 = Phone number corresponding to the last voice tag recorded in the HF.\n\n<dataresp1..n>: Data parameters returned by the AG. Their contents depend on the value of the\n<datarequest> parameter as follows:\n\n<datarequest> value <dataresp> parameters\n\n1 <Phone number>:\nPhone number string (max. 32 digits). The format (type of address)\nof the phone number string shall conform with the rules stated in\n\n[5], sub-clause 10.5.4.7, for a value (in integer format) of the type\nof address octet of 145, if dialing string includes international\naccess code character “+”, and for a value of 129 otherwise.\n\n- **AT+BLDN** (Bluetooth Last Dialed Number)\n\n_Syntax: AT+BLDN_\n\n_Description:_\n\n5 AT+BINP was created with future extensibility in mind. While the Hands-Free Profile only specifies a <datarequest> value of 1 (i.e.,\nphone number), future profiles may choose to add values for <datarequest> to support the retrieval of additional data from the AG.\n\nBluetooth SIG Proprietary Page **96 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nCommand used for calling the last phone number dialed. On reception of this command, the AG\nshall set up a voice call to the last phone number dialed.\n\nOnly support for execution command is mandated. Neither the read nor test commands are\nmandatory.\n\n- **AT+BVRA** (Bluetooth Voice Recognition Activation)\n\n_Syntax: AT+BVRA=<vrec>_\n\n_Description:_\n\nEnables/disables the voice recognition function in the AG. If the Enhanced Voice Recognition\nStatus feature is supported, this command is used to indicate to the AG that the HF is ready to\nrender audio output.\n\nOnly support for execution command is mandated. Neither the read nor test commands are\nmandatory. If the Enhanced Voice Recognition Status feature is supported, the AG shall only\ntransmit audio to the HF if the AG has previously received AT+BVRA=2 from the HF and an\neSCO link has been established.\n\nThe value 2 shall only be used if both the AG and the HF support the Enhanced Voice\nRecognition Status feature.\n\n_Values:_\n\n<vrec>: 0, 1, or 2, entered as integer values, where\n\n0 =\n\n          - Disable Voice recognition in the AG.\n\n          - If the Enhanced Voice Recognition Status feature is supported, this value terminates\nthe current VR session.\n\n          - If the Enhanced Voice Recognition Status feature is supported, this value may also\nbe used to refuse the +BVRA=1 request from the AG to start a new VR session.\n\n1 = Enable voice recognition in the AG.\n\n2 = This value shall only be used if both the AG and the HF support the Enhanced Voice\nRecognition Status feature. This value indicates that the HF is ready to accept audio when\nthe Audio Connection is first established. The HF shall only send this value if the eSCO link\nhas been established.\n\nThe HF may send this value during an ongoing VR session to terminate audio output from the\nAG (if there is any) and prepare the AG for new audio input.\n\n- **+BVRA** (Bluetooth Voice Recognition Activation)\n\n_Syntax: +BVRA: <vrect>_ [,<vrecstate>][,<textualRepresentation>]\n\n_Description:_\n\nUnsolicited result code used to notify the HF when the voice recognition function in the AG is\nactivated/deactivated autonomously from the AG. If the Enhanced Voice Recognition Status\nfeature is supported, then this value is also used to indicate state changes in the AG´s voice\nrecognition engine.\n\nBluetooth SIG Proprietary Page **97 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nThe unsolicited +BVRA: 1 result code shall not be sent by the AG to the HF if the corresponding\nvoice recognition activation has been initiated by the HF. Likewise, the unsolicited +BVRA: 0\nresult code shall not be sent by the AG to the HF if the corresponding voice recognition\ndeactivation has been initiated by the HF, regardless of which side initiated the voice recognition\nactivation.\n\nIf the Enhanced Voice Recognition Status feature is supported, the AG shall only transmit audio\nto the HF if the AG has previously received AT+BVRA=2 from the HF and an eSCO link has been\nestablished.\n\n_Values:_\n\n<vrect>: 0, entered as integer value, where\n\n0 = Voice recognition is disabled in the AG\n\n1 = Voice recognition is enabled in the AG\n\n<vrecstate>:\n\nBitmask that reflects the current state of the voice recognition engine on the AG. When there is no active\nvoice recognition session, Bit 0 shall be set to 0. If Bit 0 is set to 0, all other bits shall be set to 0.\n\nThe <vrecstate> shall be present if both the AG and HF support the Enhanced Voice Recognition Status\nfeature; otherwise, it shall not be present.\n\n|Bit|Description|\n|---|---|\n|0|If value of this bit is 1, the AG is ready to accept audio input|\n|1|If value of this bit is 1, the AG is sending audio to the HF|\n|2|If value of this bit is 1, the AG is processing the audio input|\n\n<textualRepresentation>: <textID>,<textType>,<textOperation>,<string>\n\nThe textualRepresentation shall only be present if both the AG and HF support the Voice Recognition\nText feature.\n\n<textID>: Unique ID of the current text as a hexadecimal string (a maximum of 4 characters in length, but\nless than 4 characters in length is valid). TextID shall change if the textType has changed. Each textID\nvalue shall be unique for a VR session. TextID values shall not be valid across VR sessions.\n\n<textType>: ID of the textType from the following list:\n\n|ID|Description|\n|---|---|\n|0|Text recognized by the AG from the audio input provided by the HF|\n|1|Text of the audio output from the AG|\n|2|Text of the audio output from the AG that contains a question|\n|3|Text of the audio output from the AG that contains an error description|\n|4–31|Reserved for future use|\n\n<textOperation>: ID of the operation of the text\n\nBluetooth SIG Proprietary Page **98 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n|ID|Description|\n|---|---|\n|0|Reserved for future use|\n|1|NewText: Indicates that a new text started. Shall be used when the textID changes|\n|2|Replace: Replace any existing text with the same textID and same text Type|\n|3|Append: Attach new text to existing text and keep the same textID and same text<br>Type|\n|4–31|Reserved for future use|\n\n<string>: The <string> parameter shall be a UTF-8 text string and shall always be contained within double\nquotes. The length of the string depends on the implementation.\n\nThe following example of a +BVRA command contains a textual representation of the sentence “Message\nto Melissa.” In the example, the state of the voice recognition engine accepts further audio input, the\ntextID is 12AB, the textType is ‘recognized text from audio input’ and the operation is ‘NewText’:\n\n+BVRA: 1,1,12AB,0,1,“Message to Melissa”\n\n- **AT+BRSF** (Bluetooth Retrieve Supported Features)\n\n_Syntax: AT+BRSF=<HF supported features bitmap>_\n\n_Description:_\n\nNotifies the AG of the supported features available in the HF, and requests information about the\nsupported features in the AG. The supported features shall be represented as a decimal value.\n\n_Values:_\n\n<HF supported features bitmap>: a decimal numeric string, which represents the value of a 32 bit\nunsigned integer. The 32 bit unsigned integer represents a bitmap of the supported features in\nthe HF as follows:\n\n|Bit|Feature|\n|---|---|\n|0|EC and/or NR function|\n|1|Three-way calling|\n|2|CLI presentation capability|\n|3|Voice recognition activation|\n|4|Remote audio volume control|\n|5|Enhanced call status|\n|6|Enhanced call control|\n|7|Codec Negotiation|\n|8|HF Indicators|\n|9|eSCO S4 Settings Supported|\n|10|Enhanced Voice Recognition Status|\n\nBluetooth SIG Proprietary Page **99 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n|Bit|Feature|\n|---|---|\n|11|Voice Recognition Text|\n|12-31|Reserved for future use|\n\nThe reserved bits (12-31) shall be initialized to Zero.\n\n- **+BRSF** (Bluetooth Retrieve Supported Features)\n\n_Syntax: +BRSF: <AG supported features bitmap>_\n\n_Description:_\n\nResult code sent by the AG in response to the AT+BRSF command, used to notify the HF what\nfeatures are supported in the AG. The supported features shall be represented as a decimal\nvalue.\n\n_Values:_\n\n<AG supported features bitmap>: a decimal numeric string, which represents the value of a 32 bit\nunsigned integer. The 32 bit unsigned integer represents a bitmap of the supported features in\nthe AG as follows:\n\n|Bit|Feature|\n|---|---|\n|0|Three-way calling|\n|1|EC and/or NR function|\n|2|Voice recognition function|\n|3|In-band ring tone capability|\n|4|Attach a phone number for a voice tag|\n|5|Ability to reject a call|\n|6|Enhanced call status|\n|7|Enhanced call control|\n|8|Extended Error Result Codes|\n|9|Codec Negotiation|\n|10|HF Indicators|\n|11|eSCO S4 Settings Supported|\n|12|Enhanced Voice Recognition Status|\n|13|Voice Recognition Text|\n|14-31|Reserved for future use|\n\nBluetooth SIG Proprietary Page **100 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nThe reserved bits (14-31) shall be initialized to Zero.\n\n- **AT+NREC** (Noise Reduction and Echo Canceling)\n\n_Syntax: AT+NREC=<nrec>_\n\n_Description:_\n\nCommand issued to disable any Echo Canceling and Noise Reduction functions embedded in the\nAG.\n\nOnly support for execution command is mandated. Neither the read nor test commands are\nmandatory.\n\n_Values:_\n\n<nrec>: 0, entered as integer value, where\n\n0 = Disable EC/NR in the AG\n\n- **AT+VGM** (Gain of Microphone)\n\n_Syntax: AT+VGM=<gain>_\n\n_Description:_\n\nCommand issued by the HF to report its current microphone gain level setting to the AG. <gain>\nis a decimal numeric constant, relating to a particular (implementation dependent) volume level\ncontrolled by the HF. This command does not change the microphone gain of the AG; it simply\nindicates the current value of the microphone gain in the HF.\n\nOnly support for execution command is mandated. Neither the read nor test commands are\nmandatory.\n\n_Values:_\n\n<gain>: 0 -15, entered as integer values, where\n\n0 = Minimum gain\n\n15 = Maximum gain\n\n- **AT+VGS** (Gain of Speaker)\n\n_Syntax: AT+VGS=<gain>_\n\n_Description:_\n\nCommand issued by the HF to report its current speaker gain level setting to the AG. <gain> is a\ndecimal numeric constant, relating to a particular (implementation dependent) volume level\ncontrolled by the HF. This command does not change the speaker gain of the AG; it simply\nindicates the current value of the speaker volume in the HF.\n\nOnly support for execution command is mandated. Neither the read nor test commands are\nmandatory.\n\n_Values:_\n\n<gain>: 0 -15, entered as integer values, where\n\n0 = Minimum gain\n\nBluetooth SIG Proprietary Page **101 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n15 = Maximum gain\n\n- **+VGM** (Gain of Microphone)\n\n_Syntax: +VGM:<gain>_\n\n_Description:_\n\nUnsolicited result code issued by the AG to set the microphone gain of the HF. <gain> is a\ndecimal numeric constant, relating to a particular (implementation dependent) volume level\ncontrolled by the HF.\n\nDue to the small inconsistency between the GSM standard [2]) and the current Headset Profile\nspecification ([3]), the HF shall also accept the “=” symbol, in place of “:”, as a valid separator for\nthis unsolicited result code.\n\n_Values:_\n\n<gain>: 0 -15, integer values, where\n\n0 = Minimum gain\n\n15 = Maximum gain\n\n- **+VGS** (Gain of Speaker)\n\n_Syntax: +VGS:<gain>_\n\n_Description:_\n\nUnsolicited result code issued by the AG to set the speaker gain of the HF. <gain> is a decimal\nnumeric constant, relating to a particular (implementation dependent) volume level controlled by\nthe HF.\n\nDue to the small inconsistency between the GSM 07.07 standard ([2]) and the current Headset\nProfile specification [3]), the HF shall also accept the “=” symbol, in place of “:”, as valid separator\nfor this unsolicited result code.\n\n_Values:_\n\n<gain>: 0 -15, integer values, where\n\n0 = Minimum gain\n\n15 = Maximum gain\n\n- **+BSIR** (Bluetooth Setting of In-band Ring tone)\n\n_Syntax: +BSIR: <bsir>_\n\n_Description:_\n\nUnsolicited result code issued by the AG to indicate to the HF that the in-band ring tone setting\nhas been locally changed. The HF may react accordingly by changing its own alert method.\n\n_Values:_\n\n<bsir>: 0 = the AG provides no in-band ring tone\n\n1 = the AG provides an in-band ring tone\n\nBluetooth SIG Proprietary Page **102 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n- **AT+BTRH** (Bluetooth Response and Hold Feature)\n\n_Syntax:_\n\nAT+BTRH=<n> (Set command)\n\nAT+BTRH? (Read Current Status)\n\n_Description:_\n\nCommand issued by the HF for the “Response and Hold” feature in the AG.\n\nThis specification defines the use of the set and read command. The AT+BTRH? command shall\nbe used by the HF to query the current “Response and Hold” state of the AG.\n\n_Values:_\n\n<n>: 0, 1, 2 entered as integer values, where\n\n0 = Put Incoming call on hold\n\n1 = Accept a held incoming call\n\n2 = Reject a held incoming call\n\n- **+BTRH** (Bluetooth Response and Hold Feature)\n\n_Syntax: +BTRH: <n>_ _(Response for AT+BTRH)_\n\n_Description:_\n\nResult code used to notify the HF whenever the incoming call is either put on hold or accepted or\nrejected. The AG shall also respond back with this response for the AT+BTRH? command from\nthe HF.\n\n_Values:_\n\n<n>: 0,1,2 entered as integer value, where\n\n0 = Incoming call is put on hold in the AG\n\n1 = Held incoming call is accepted in the AG\n\n2 = Held incoming call is rejected in the AG\n\n- **AT+BCC** (Bluetooth Codec Connection)\n\n_Syntax: AT+BCC_\n\n_Description:_\n\nThis command is used by the HF to request the AG to start the Codec Connection procedure.\n\n- **AT+BCS** (Bluetooth Codec Selection)\n\n_Syntax: AT+BCS= <u>_ _(u is a Codec ID)_\n\n_Description:_\n\nThis command confirms the codec to the remote device (AG), and implicitly also which\nsynchronization protocol, will be used on the synchronous connection.\n\nIf no value is included, the command is invalid.\n\nBluetooth SIG Proprietary Page **103 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n_Values:_\n\n<u>: All possible Codec IDs, see definition of AT+BAC.\n\n- **+BCS** (Bluetooth Codec Selection)\n\n_Syntax: +BCS: <u> (u is a codec ID)_\n\n_Description:_\n\nThis command informs the codec to the remote device (HF), and implicitly also which\nsynchronization protocol, will be used on the synchronous connection.\n\n_Values:_\n\n<u>: All possible Codec IDs, see definition of AT+BAC.\n\n- **AT+BAC** (Bluetooth Available Codecs)\n\n_Syntax: AT+BAC= [<u1>[,<u2>[,...[,<un>]]]] (u1,u2, ..., un are a codec IDs)_\n\n_Description:_\n\nThis command informs the remote device (AG) about what codecs (see Table 3.3) the HF\nsupports.\n\nThe Codec ID for the mandatory narrow band codec (CVSD) shall always be included.\n\nIf Wide Band Speech is supported, then the mandatory codec (mSBC) shall be included unless it\nis temporarily unavailable.\n\nIf Super Wide Band Speech is supported, then the mandatory codec (LC3-SWB) shall be\nincluded unless it is temporarily unavailable.\n\nAny speech codecs may be included in this list as long as the respective mandatory codecs are\nalso included.\n\n_Values:_\n\n<u>: All possible Codec IDs. Codec IDs shall be transferred as string representations of decimal\nnumbers. The format of the Codec IDs is 8 bit aliases that are defined in Section 11 (Appendix B:\nCodec IDs). For a single codec with ID=12 and the mandatory default codecs (1, 2 and 3), the\ncommand:\n\nAT+BAC=1,2,3,12\n\nis sent.\n\n- **AT+BIND** (Bluetooth HF Indicators Feature)\n\n_Syntax:_\n\nAT+BIND= <a>,<b>,<c>,...,<n> (List HF supported indicators)\n\nAT+BIND=? (Read AG supported indicators)\n\nAT+BIND? (Read AG enabled/disabled status of indicators)\n\n_Description:_\n\nBluetooth SIG Proprietary Page **104 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nThis command enables the HF to notify the AG which HF to AG indicators are supported. The\nindicators may be enabled or disabled.\n\nThe AT+BIND commands shall not be used unless both AG and HF BRSF bits for the ‘HF Indicators’\nfeature are set to one.\n\n_Values_ :\n\n<a> ... <n>: 0-65535, entered as decimal unsigned integer values without leading zeros,\nreferencing an HF indicator assigned number. Values are defined on the Bluetooth SIG Assigned\nNumbers [8] web page. The maximum number of indicator assigned numbers in the request shall\nbe 20.\n\n- **+BIND** (Bluetooth HF Indicators Feature)\n\n_Syntax:_\n\n+BIND: (<a>,<b>,<c>,...,<n>) (Response to AT+BIND=?)\n\n+BIND: <a>,<state> (Unsolicited or Response to AT+BIND?)\n\n_Description:_\n\nThis response enables the AG to notify the HF which HF indicators are supported and their state,\nenabled or disabled.\n\nThe +BIND responses shall not be used unless both AG and HF BRSF bits for the ‘HF Indicators’\nfeature are set to one.\n\nWhen responding to the AT+BIND? command, the AG shall send one or more +BIND responses\nfollowed by OK to terminate the list.\n\n_Values:_\n\n<a> ... <n>: 0-65535, entered as decimal unsigned integer values without leading zeros,\nreferencing an HF indicator assigned number. Values are defined on the Bluetooth SIG Assigned\nNumbers [8] web page. The maximum amount of indicator assigned numbers in the request shall\nbe 20.\n\n<state>: 0-1, entered as integer values, where\n\n0 = Indicator is disabled, no value changes shall be sent for this indicator\n\n1 = Indicator is enabled, value changes may be sent for this indicator\n\n- **AT+BIEV** (Bluetooth HF Indicators Feature)\n\n_Syntax:_\n\nAT+BIEV= <assigned number>,<value> (Update value of indicator)\n\n_Description:_\n\nThis command enables the HF to send updated values of the enabled HF indicators to the AG.\n\nThe AT+BIEV command shall not be used unless both AG and HF BRSF bits for the ‘HF\nIndicators’ feature are set to one.\n\n_Values:_\n\nBluetooth SIG Proprietary Page **105 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n<assigned number>: 0-65535, entered as a decimal unsigned integer without leading zeros,\nreferencing an HF indicator assigned number. Values are defined on the Bluetooth SIG Assigned\nNumbers [8] web page.\n\n<value> 0 to 4,294,967,295, entered as a decimal unsigned integer without leading zeros. The\nmeaning of the value depends of the <assigned number> and is defined on the Bluetooth SIG\nAssigned Numbers [8] web page.\n\nBluetooth SIG Proprietary Page **106 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n## **6 RFCOMM**\n\nThis profile requires compliance to RFCOMM [4]. The following subsections together with the associated\nsub-clauses defines the requirements with regard to this profile in addition to the requirements as defined\nin RFCOMM.\n\n##### **6.1 RFCOMM Interoperability Requirements**\n\nFor the RFCOMM layer, the following requirements apply.\n\nFor the Hands-Free Profile, as defined in Section 4.2, both the AG and the HF may initiate RFCOMM\nconnection establishment (see Section 6.1.1). Therefore, for the purposes of reading RFCOMM [4], both\nthe AG and the HF may assume the role of RFCOMM Initiator.\n\nThe AG and the HF shall support the RFCOMM Initiator role as defined in Section 9 in [4].\n\nThe AG and the HF shall support the RFCOMM Acceptor role, defined in HFP as the device that accepts\nthe establishment of the RFCOMM multiplexer control channel on DLCI0 as defined in Section 5.2.1 in\n\n[4].\n\nThe AG and the HF shall support the RFCOMM Client role as defined in Section 9 in [4].\n\nThe AG and the HF shall support the RFCOMM Server role as defined in Section 9 in [4].\n\nTable 6.1 summarizes the additional requirements for RFCOMM procedure support beyond those defined\nin RFCOMM [4].\n\n|Procedure (see Section 5.2.1 in [4])|RFCOMM<br>Initiator|RFCOMM<br>Acceptor|RFCOMM<br>Client|RFCOMM<br>Server|\n|---|---|---|---|---|\n|Initialize RFCOMM session|M|X|X|X|\n|Respond to RFCOMM session initialization|X|M|X|X|\n|Establish DLC|X|X|M|X|\n|Respond to DLC establishment|X|X|X|M|\n\n**6.1.1** **RFCOMM connection establishment**\nRFCOMM connection establishment means the RFCOMM multiplexer start-up procedure defined in\nSection 5.2.1 in [4], which describes the establishment of the RFCOMM multiplexer control channel on\nDLCI0. The device establishing the RFCOMM connection shall first discover the SDP service record as\ndefined in Table 6.3 for the HF and/or in Table 6.5 for the AG to discover the RFCOMM server channel\nnumber exposed by the peer device.\n\nThe device establishing the RFCOMM connection shall then initiate the L2CAP channel establishment\nprocedure as defined in Section 6.2.1 and shall then perform the RFCOMM multiplexer start-up\nprocedure. When the RFCOMM connection has been established, the device shall proceed to the Service\nLevel Connection Establishment procedure defined in Section 4.2 to establish a Service Level Connection\non the RFCOMM server channel discovered during SDP service record discovery.\n\nBluetooth SIG Proprietary Page **107 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n##### **6.2 L2CAP Interoperability Requirements**\n\nFor the L2CAP layer, Table 6.2 defines the additional support requirements to those defined in RFCOMM\n\n[4].\n\n|Procedure|HF requirement|AG requirement|\n|---|---|---|\n|Data Channel Initiator|M|M|\n|Data Channel Acceptor|M|M|\n\n**6.2.1** **L2CAP channel establishment procedure**\nThe device establishing the RFCOMM connection as defined in Section 6.1.1 shall send an L2CAP\nConnection Request and shall set the value of the PSM field to the value for RFCOMM as defined in the\nBluetooth Assigned Numbers [8].\n\n##### **6.3 SDP Interoperability Requirements**\n\nThe following service records are defined for the Hands-Free Profile. There is one service record\napplicable to the Hands-Free unit and another for the Audio Gateway.\n\nThe attribute “SupportedFeatures” states the features supported in each device. This attribute is not\nencoded as a data element sequence; it is simply a 16-bit unsigned integer. The set of features supported\nin each case is bit-wise defined in this attribute on a yes/no basis. The mapping between the features and\ntheir corresponding bits within the attribute is listed below in Table 6.4 for the HF and in Table 6.6 for the\nAG. If a device indicates support for a feature, then it shall support that feature in the manner specified by\nthis Profile.\n\nThe codes assigned to the mnemonics used in the Value column, as well as the codes assigned to the\nattribute identifiers (if not specifically mentioned in the AttrID column), are listed in the Bluetooth Assigned\nNumbers [8] web page.\n\nThe values of the “SupportedFeatures” bitmap given in Table 6.4 shall be the same as the values of the\nBits 0 to 4 of the AT-command AT+BRSF (see Section 5.3).\n\n|Item|Col2|Col3|Definition|Type|Value|Status|Default|\n|---|---|---|---|---|---|---|---|\n|ServiceClassIDList|ServiceClassIDList|ServiceClassIDList||||M||\n||ServiceClass0|ServiceClass0||UUID|Hands-Free|M||\n||ServiceClass1|ServiceClass1||UUID|Generic Audio|M||\n|ProtocolDescriptorList|ProtocolDescriptorList|ProtocolDescriptorList||||M||\n||Protocol0|Protocol0||UUID|L2CAP|M||\n||Protocol1|Protocol1||UUID|RFCOMM|M||\n|||ProtocolSpecificParameter0|Server<br>Channel|Uint8|N=server channel<br>#|M||\n|BluetoothProfileDescriptorList|BluetoothProfileDescriptorList|BluetoothProfileDescriptorList||||M||\n\nBluetooth SIG Proprietary Page **108 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n|Item|Col2|Col3|Definition|Type|Value|Status|Default|\n|---|---|---|---|---|---|---|---|\n||Profile0|Profile0|Supported<br>Profiles|UUID|Hands-Free|M|Hands-Free|\n|||Param0|Profile<br>Version|Uint16|0x0109**6**|M||\n|ServiceName|ServiceName|ServiceName|Display-<br>able Text<br>name|String|_Service-provider_<br>_defined _|O|“Hands-Free<br>unit”|\n|SupportedFeatures|SupportedFeatures|SupportedFeatures|Features<br>supported|Uint16|_Device_<br>_dependent _|M|0x0000|\n\n|Bit<br>position<br>(0=LSB)|Feature|Default in HF|\n|---|---|---|\n|0|EC and/or NR function (yes/no, 1 = yes, 0 = no)|0|\n|1|Call waiting or three-way calling(yes/no, 1 = yes, 0 = no)|0|\n|2|CLI presentation capability (yes/no, 1 = yes, 0 = no)|0|\n|3|Voice recognition activation (yes/no, 1= yes, 0 = no)|0|\n|4|Remote audio volume control (yes/no, 1 = yes, 0 = no)|0|\n|5|Wide Band Speech (yes/no, 1 = yes, 0 = no)|0|\n|6|Enhanced Voice Recognition Status (yes/no, 1 = yes, 0 = no)|0|\n|7|Voice Recognition Text (yes/no, 1 = yes, 0 = no)|0|\n|8|Super Wide Band Speech (yes/no, 1 = yes, 0 = no)|0|\n\nThe \"Network\" attribute states if the AG has the capability to reject incoming calls [7] . This attribute is not\nencoded as a data element sequence; it is simply an 8-bit unsigned integer. The information given in the\n“Network” attribute shall be the same as the information given in Bit 5 of the unsolicited result code\n+BRSF (see Section 5.3). An attribute value of 0x00 is translated to a bit value of 0; an attribute value of\n0x01 is translated to a bit value of 1.\n\nThe values of the “SupportedFeatures” bitmap given in Table 6.6 shall be the same as the values of the\nBits 0 to 4 of the unsolicited result code +BRSF (see Section 5.3).\n\n6 Indicating version HFP 1.9\n\n7 In previous versions of the Hands-Free Profile, the attribute values were called \"GSM like\" and \"others\"\n\nBluetooth SIG Proprietary Page **109 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n|Item|Col2|Col3|Definition|Type|Value|Status|Default|\n|---|---|---|---|---|---|---|---|\n|ServiceClassIDList|ServiceClassIDList|ServiceClassIDList||||M||\n||ServiceClass0|ServiceClass0||UUID|AG Hands-Free|M||\n||ServiceClass1|ServiceClass1||UUID|Generic Audio|M||\n|ProtocolDescriptorList|ProtocolDescriptorList|ProtocolDescriptorList||||M||\n||Protocol0|Protocol0||UUID|L2CAP|M||\n||Protocol1|Protocol1||UUID|RFCOMM|M||\n|||ProtocolSpecificParameter0|Server<br>Channel|Uint8|N=server channel<br>#|M||\n|BluetoothProfileDescriptorList|BluetoothProfileDescriptorList|BluetoothProfileDescriptorList||||M||\n||Profile0|Profile0|Supported<br>Profiles|UUID|Hands-Free|M|Hands-Free|\n|||Param0|Profile<br>Version|Uint16|0x0109**8**|M||\n|ServiceName|ServiceName|ServiceName|Display-<br>able Text<br>name|String|_Service-provider_<br>_defined_|O|“Voice<br>gateway”|\n|Network|Network|Network||Uint8|0x01 – Ability to<br>reject a call<br>0x00 – No ability<br>to reject a call|M||\n|SupportedFeatures|SupportedFeatures|SupportedFeatures|Features<br>supported|Uint16|_Device dependent_|M|0x0009|\n\n|Bit<br>position<br>(0=LSB)|Feature|Default in<br>AG|\n|---|---|---|\n|0|Three-way calling (yes/no, 1 = yes, 0 = no)|1|\n|1|EC and/or NR function (yes/no, 1 = yes, 0 = no)|0|\n|2|Voice recognition function (yes/no, 1 = yes, 0 = no)|0|\n|3|In-band ring tone capability (yes/no, 1 = yes, 0 = no)|1|\n|4|Attach a phone number for a voice tag (yes/no, 1 = yes, 0 = no)|0|\n|5|Wide Band Speech (yes/no, 1 = yes, 0 = no)|0|\n\n8 Indicating version HFP 1.9\n\nBluetooth SIG Proprietary Page **110 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n|Bit<br>position<br>(0=LSB)|Feature|Default in<br>AG|\n|---|---|---|\n|6|Enhanced Voice Recognition Status (yes/no, 1 = yes, 0 = no)|0|\n|7|Voice Recognition Text (yes/no, 1 = yes, 0 = no)|0|\n|8|Super Wide Band Speech (yes/no, 1 = yes, 0 = no)|0|\n\n**6.3.1** **Interaction with Hands-Free Profile Rev 0.96 Implementations**\nHF implementations, which are according to the Hands-Free Profile specification Rev. 0.96, will not send\nthe AT+BRSF command. Likewise, AG implementations, which are according to the Hands-Free Profile\nspecification Rev. 0.96, will not be able to respond to AT+BRSF with the +BRSF unsolicited result code.\nInstead, they will respond with ERROR.\n\nIn order to retrieve the “SupportedFeatures” information from an HF, which does not send AT+BRSF,\nService Discovery should be used by the AG implementation. Whenever the “SupportedFeatures”\nattribute is not present in the HF service record, or if the AG does not perform the Service Discovery\nprocedure, default values as stated in Table 6.4 shall be assumed.\n\nIn order to retrieve the “SupportedFeatures” and “Network” information from an AG, which does not send\n+BRSF, Service Discovery should be used by the HF implementation. Whenever the\n“SupportedFeatures” attribute is not present in the AG service record, or if the HF does not perform the\nService Discovery procedure, default values as stated in Table 6.6 shall be assumed.\n\n**6.3.2** **Interaction with HFP 0.96, 1.0 and HFP 1.5 implementations**\nHF implementations that comply with the Hands-Free Profile specification Rev. 0.96,1.0 or 1.5, shall not\nindicate support for the Codec Negotiation feature and shall neither send the AT+BAC command nor the\nAT+BCC command to trigger an audio connection establishment by the AG.\n\nAG implementations that comply with the Hands-Free Profile specification Rev. 0.96,1.0 or 1.5, shall not\nindicate support for the Codec Negotiation feature and shall neither send the +BCS unsolicited response\nto the HF.\n\nFor backward compatibility, HFP Rev. “x.y” implementations shall be able to handle establishment of\nsynchronous connections according to Hands-Free Profile specification Rev. 1.0 or 1.5.\n\n- The HF shall be able to accept establishment of a synchronous connection from an HFP 1.0 or 1.5\nAG.\n\n- The AG shall be able to initiate establishment of a synchronous connection to an HFP 1.0 or 1.5 HF.\n\nBluetooth SIG Proprietary Page **111 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nThe HF shall be able to initiate establishment of a synchronous connection to an HFP 1.0 or 1.5 AG.\n\nThe AG shall be able to accept establishment of a synchronous connection from an HFP 1.0 or 1.5 HF.\n\nrouted\n\n|HF<br>AG<br>Established Service Level Connection<br>ernal event or<br>user action<br>Synchronous Connection Setup<br>Audio paths properly Audio<br>routed<br>Established Audio Connection|Col2|Col3|Col4|\n|---|---|---|---|\n|HF <br>AG <br>Synchronous Connection Setup <br>Established Audio Connection <br>Audio paths properly<br>routed<br>Audio<br>ernal event or<br>user action<br>Established Service Level Connection|HF <br>AG <br>Synchronous Connection Setup <br>Established Audio Connection <br>Audio paths properly<br>routed<br>Audio<br>ernal event or<br>user action<br>Established Service Level Connection|AG|AG|\n|HF <br>AG <br>Synchronous Connection Setup <br>Established Audio Connection <br>Audio paths properly<br>routed<br>Audio<br>ernal event or<br>user action<br>Established Service Level Connection|HF <br>AG <br>Synchronous Connection Setup <br>Established Audio Connection <br>Audio paths properly<br>routed<br>Audio<br>ernal event or<br>user action<br>Established Service Level Connection|AG|Audio|\n|HF <br>AG <br>Synchronous Connection Setup <br>Established Audio Connection <br>Audio paths properly<br>routed<br>Audio<br>ernal event or<br>user action<br>Established Service Level Connection|Synchronous Connection Setup <br>Established Audio Connection|Synchronous Connection Setup <br>Established Audio Connection|Synchronous Connection Setup <br>Established Audio Connection|\n\n##### **6.4 Link Manager (LM) Interoperability Requirements**\n\nThis profile requires support for encryption as defined in the Link Manager Protocol specification in\nVolume 2, Part C, Section 3.5 in [1].\n\nAdditionally this profile mandates that both the AG and HF devices shall support synchronous logical\ntransports, subject to the requirements in Section 6.6.\n\nBluetooth SIG Proprietary Page **112 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n##### **6.5 Link Control (LC) Interoperability Requirements**\n\nTable 6.7 shows the Link Controller (See Volume 2, Part B, Section 8 in [1]) interoperability requirements\nfor HFP.\n\n|Col1|Capability|Support in AG|Support in HF|\n|---|---|---|---|\n|1.|Inquiry||O|\n|2.|Inquiry scan|O||\n|7|Voice CODEC|||\n|C|CVSD|M|M|\n\n**6.5.1** **Class of Device**\nA device implementing the HF role of HFP shall set the \"Audio\" bit in the Service Class field. Optionally, if\nthe HF intends to be discovered as a \"Hands-Free\", it may use the following values in the Class of Device\nfield:\n\n1. Indicate \"Audio\" as Major Device class.\n\n2. Indicate “Hands-Free” as the Minor Device class.\n\nAn inquiring AG may use this information to filter the inquiry responses.\n\n##### **6.6 Baseband Interoperability Requirements**\n\nThe eSCO link and the air mode “Transparent Data” shall be supported if Wide Band Speech or Super\nWide Band Speech is supported and are optional otherwise.\n\nErroneous data delivery may be used for Wide Band Speech only if core version 2.1 or higher is\nsupported.\n\n|Item|Capability|Status|\n|---|---|---|\n|1.1.3/3|Support of eSCO link|M|\n|1.1.7/4|Transparent data|C1|\n|1.1.8/2|Erroneous data delivery|C2|\n\nC1: Mandatory if Wide Band Speech or Super Wide Band Speech is supported, or optional otherwise.\n\nC2: Optional if core version 2.1 or higher is supported, or excluded otherwise\n\n##### **6.7 Codec Interoperability Requirements**\n\nTable 6.9 shows supported _Mandatory_ and _Optional_ codecs in this profile.\n\n|Codec Type|Support|Ref|\n|---|---|---|\n|CVSD|M|6.7.3|\n|mSBC|C1|6.7.4|\n|LC3-SWB|C2|6.7.6|\n\nBluetooth SIG Proprietary Page **113 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nC1: Mandatory if Wide Band Speech is supported or excluded otherwise.\n\nC2: Mandatory if Super Wide Band Speech is supported or excluded otherwise\n\n**6.7.1** **Synchronous Connection Interoperability Requirements**"
    },
    {
        "section_number": "6.8",
        "section_title": "Speech Quality Recommendations",
        "granularity_level": 2,
        "content": "The introduction of Wide Band Speech and Super Wide Band Speech to the HFP profile allows for\nincreased end-customer satisfaction in terms of perceived speech quality. Super Wide Band Speech\ncorresponds to the maximum audio bandwidth provided in 5G voice services and provided by many overthe-top (OTT) voice services. The available codec with the highest audio quality should be used. For\nexample, Super Wide Band Speech is preferred over Wide Band Speech, and Wide Band Speech is\npreferred over narrow band speech connections.\n\n**6.8.1** **Packet Loss Concealment (PLC)**\nIt is strongly recommended that some form of PLC should be implemented on the receiving ends of\ncompressed audio (such as mSBC and LC3-SWB) to reduce synthesized audio artifacts during degraded\nchannel conditions.\n\nFor mSBC, the example PLC algorithm provided in Appendix C may be used. The speech quality of this\nexample PLC under typical packet loss conditions is considered satisfactory. If implementations choose\nto modify or implement an alternate PLC scheme, the performance of any such alternate PLC should\nmeet or exceed the performance of the example PLC provided in Appendix C.\n\nBluetooth SIG Proprietary Page **118 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nThe LC3 specification [10] also provides an example PLC algorithm that may be used with Super Wide\nBand Speech (see Appendix B in [10]).\n\n**6.8.2** **Signal Levels**\nFull swing at the 16 bit linear PCM interface to the codecs in this profile specification is defined to be\n3 dBm0. This definition applies to devices that support narrow band, Wide Band Speech, and Super Wide\nBand Speech.\n\nFurther details on recommended audio levels are specified in Appendix D, Section 13.1.\n\nRecommended specifications for send and receive frequency masks are provided in Appendix D,\nSection 13.2.\n\nBluetooth SIG Proprietary Page **119 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n## **7 Generic Access Profile**\n\nThis section defines the support requirements for the capabilities as defined in the “Generic Access\nProfile” of the Core Specification.\n\n##### **7.1 Modes**\n\nTable 7.1 shows the support status for GAP Modes in this profile.\n\n|Procedure|Support in HF|\n|---|---|\n|General discoverable mode|M|\n|**Procedure**|**Support in AG**|\n|Pairable mode|M|\n\n##### **7.2 Security Aspects**\n\nBaseband authentication and encryption is optional for both the Hands-Free unit and the Audio Gateway.\nIf both devices support authentication and encryption, the application on either device may require its use.\nHowever, if Secure Connections is supported by both devices, its use is mandated by the Bluetooth Core\n4.1 Specification (or later).\n\nA Hands-Free unit may be able to use the services of the Audio Gateway without the creation of a secure\nconnection. It is implementation specific whether the Hands-Free unit provides or supports security\nenforcement for the user.\n\nWhenever baseband authentication or encryption is used, the two devices shall create a secure\nconnection using the GAP authentication procedure as described in Generic Access Profile (Volume 3,\nPart C, Section 5.1 in [1]). This procedure may include entering a Bluetooth PIN code or passkey and\ncreation of proper link keys. If Simple Secure Pairing is not in use and when the UI of the Hands-Free unit\nis limited, a fixed Bluetooth PIN code may be used during the GAP authentication procedure.\n\nIf Secure Connections is used, the Authenticated Payload Timeout should be less than or equal to 10s.\nThe disconnection behavior following a timeout is implementation specific.\n\n##### **7.3 Idle Mode Procedures**\n\nTable 7.2 shows the support status for Idle mode procedures within this profile.\n\n|Procedure|Support in AG|\n|---|---|\n|Initiation of general inquiry|M|\n|Initiation of general bonding|O|\n|Initiation of dedicated bonding|O|\n\nBluetooth SIG Proprietary Page **120 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n## **8 References**\n\n[1] Bluetooth Core Specification, Version 4.2 or later\n\n[2] 3GPP 27.007 v6.8.0 now supersedes and replaces ETS 300 916, “Digital cellular\ntelecommunications system (Phase 2+); AT command set for GSM Mobile Equipment (ME) (GSM\n07.07 version 7.5.0),” http://www.3gpp.org/ftp/Specs/html-info/27007.htm\n\n[3] Headset Profile Specification, Version 1.1 or later\n\n[4] RFCOMM with TS 07.10 Specification, Version 1.2 or later\n\n[5] ITU-T50, Terminal Equipment and Protocols for telematic services: International Reference\nAlphabet (IRA) (Formerly International Alphabet No. 5 IA5). Information technology – 7-Bit coded\ncharacter set for information interchange\n\n[6] Digital cellular telecommunication system (Phase 2+); Mobile radio interface layer 3 specification,\n(GSM 04.08 version 6.11.0)\n\n[7] Advanced Audio Distribution Profile Specification, Version 1.2 or later\n\n[8] Bluetooth Assigned Numbers, https://www.bluetooth.com/specifications/assigned-numbers\n\n[9] D. Goodman, et al., “Waveform Substitution Techniques for Recovering Missing Speech Segments\nin Packet Voice Communications”, IEEE Transaction on Acoustics, Speech and Signal Processing,\nDecember 1986, pp. 1440 - 1448.\n\n[10] Low Complexity Communication Codec Specification, Version 1.0\n\n[[11] Appropriate Language Mapping Tables, https://www.bluetooth.com/language-mapping/Appropriate-](https://www.bluetooth.com/language-mapping/Appropriate-Language-Mapping-Table)\n\n[Language-Mapping-Table](https://www.bluetooth.com/language-mapping/Appropriate-Language-Mapping-Table)\n\nBluetooth SIG Proprietary Page **121 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n## **9 List of Acronyms and Abbreviations**\n\n|Abbreviation<br>or Acronym|Meaning|\n|---|---|\n|AG|Audio Gateway|\n|AT|Attention|\n|BTR|Bluetooth Reference Point|\n|BVRA|BluetoothVoice Recognition Activation|\n|CLI|Calling Line Identification|\n|CODEC|COder DECoder|\n|CVSD|Continuously Variable Slope Delta modulation|\n|DTMF|Dual Tone Multi-Frequency|\n|EC|Echo Cancellation|\n|EDR|Enhanced Data Rate|\n|eSCO|Extended Synchronous Connection Oriented|\n|GAP|Generic Access Profile|\n|GSM|Global System for Mobile communication|\n|HF|Hands-Free unit|\n|L2CAP|Logical Link Control and Adaptation Protocol|\n|LC3|Low Complexity Communication Codec|\n|LMP|Link Manager Protocol|\n|mSBC|Modified Sub Band Codec|\n|NR|Noise Reduction|\n|OSI|Open System Interconnection|\n|OTT|Over-the-top|\n|PCM|Pulse Code Modulation|\n|PLC|Packet Loss Concealment|\n|PIN|Personal Identification Number|\n|POI|Point Of Interconnection|\n|RFCOMM|Serial port transport protocol over L2CAP|\n|SBC|Sub Band Codec|\n|SCO|Synchronous Connection Oriented|\n|SDP|Service Discovery Protocol|\n|SWB|Super Wide Band|\n\nBluetooth SIG Proprietary Page **122 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n|Abbreviation<br>or Acronym|Meaning|\n|---|---|\n|UI|User Interface|\n|UUID|Universally Unique Identifier|\n|VR|Voice Recognition|\n\nBluetooth SIG Proprietary Page **123 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n## **10 Appendix A: Technical Specification of mSBC**\n\n##### **10.1 Introduction**\n\nThis appendix describes the changes to the SBC codec defined in A2DP [7] standard which comprises\nthe Modified SBC codec. The changes to the A2DP SBC are limited to the frame header syntax and\nsemantics. All other parts of the SBC definition remain un-modified."
    },
    {
        "section_number": "10.2",
        "section_title": "Syntax",
        "granularity_level": 2,
        "content": "|Syntax|No. of bits|Mnemonic|\n|---|---|---|\n|audio_frame()<br>{ <br> <br>frame_header()<br> <br>scale_factors()<br> <br>audio_samples()<br> <br>padding()<br>}|<br> <br> <br> <br> <br> <br>|<br> <br> <br> <br> <br> <br>|\n\nNote: The syntax of the mSBC speech frame is not changed from the original SBC definition in\n\nA2DP [7].\n\nBluetooth SIG Proprietary Page **124 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n|Syntax|No. of bits|Mnemonic|\n|---|---|---|\n|frame_header()<br>{ <br> <br>**Syncword** <br> <br>**Reserved for future use** <br> <br>**crc_check** <br>}|<br> <br>8 <br>16<br>8 <br>|<br> <br>BsMsbf<br>UiMsbf<br>UiMsbf<br>|\n\n##### **10.3 Semantics**"
    },
    {
        "section_number": "12.1",
        "section_title": "Baseline Packet Loss Concealment",
        "granularity_level": 2,
        "content": "A baseline packet loss concealment algorithm based on the techniques presented in [1] is discussed.\nThis baseline PLC is a generic PCM-based system and makes no assumptions on mSBC. Its integration\ninto mSBC to form a reference PLC for mSBC is described in a later section.\n\nThe following subsections describe the techniques used in the baseline PLC algorithm."
    },
    {
        "section_number": "12.2",
        "section_title": "Integration of PLC with mSBC",
        "granularity_level": 2,
        "content": "The PLC described in the paper was designed for PCM without any considerations for integration with a\ncodec such as mSBC. The main issue with mSBC as far as integration of a PLC is the response of the\nsub-band filters in the mSBC decoder. The integration is described in the next sub-sections.\n\nBluetooth SIG Proprietary Page **127 of 143**\n\n**Hands-Free Profile /** Profile Specification"
    },
    {
        "section_number": "12.3",
        "section_title": "API Description",
        "granularity_level": 2,
        "content": "This section describes the API for the example PLC for mSBC."
    },
    {
        "section_number": "13.1",
        "section_title": "Audio levels",
        "granularity_level": 2,
        "content": "The Bluetooth Core Specification (Volume 2, Part B, Section 9, Audio) describes the CVSD codec for\nvoice on the Bluetooth air interface. The Core Specification also provides general audio\nrecommendations for narrowband voice. This appendix provides recommendations for the Wide Band\nSpeech update of the Hands-Free Profile, and for the Super Wide Band Speech update of the HandsFree Profile.\n\nFor both CVSD (narrow band) and the Wide Band Speech codecs, the full scale sine wave PCM data\nshould meet the network level of +3dBm0 as previously specified for the CVSD codec.\n\nFor Super Wide Band Speech codecs, a full scale 6427 Hz sine wave PCM data signal should meet the\nnetwork level of +3dBm0 as previously specified for the CVSD codec. Note that for lower bitrates, the LC3\nutilizes a Long-Term Post Filter (LTPF) which may amplify the signal. The frequency 6427 Hz minimizes\nthis effect.\n\nThe AG manufacturer should adjust the gain from the Bluetooth Reference Point (BTR) to the cellular\nnetwork, as shown in the core specification. The HF is responsible to adjust the speech signal to the BTR,\nas shown in the core specification, to enable nominal speech level of -21dbm0 in the networks at given\nnominal sound pressure level of -4.7 dBPa at the mouth reference point of the HF as described in ITU-T\nP.1100.\n\n**dBm0:** absolute power level in dBm referred to a point of zero relative level (0 dBr point)\n\nA possible test setup is described in Figure 13.1.\n\nThe gain from BTR to the network and the gain from the network to the BTR should be adjusted for both\nsignal processing modes: either on the phone (AG) or on the hands-free (HF) device after confirming the\nAT+NREC=0 command. When the signal processing is confirmed to be disabled on the AG, a sine signal\ncan be used to verify the gain between the BTR and the network. When the active signal processing for\nEcho Cancellation and Noise Reduction are performed on the AG, a sine signal can lead to wrong results\nand a speech like signal, like P.50 (artificial voice), should be used. A Network simulator is highly\n\nBluetooth SIG Proprietary Page **140 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nrecommended during testing because of the unknown status of gain and signal processing in real\nnetworks.\n\n##### **13.2 Bluetooth Sensitivity Frequency Responses**"
    },
    {
        "section_number": "14.1",
        "section_title": "Introduction",
        "granularity_level": 2,
        "content": "This appendix describes the additions for defining the LC3-SWB codec. The additions are limited to LC3Codec ID and the LC3 parameter setup. All other parts of the LC3 definition remain unmodified.\n\n##### **14.2 Codec ID definition**\n\nLC3-SWB does not employ any additional frame header compared to mSBC.\n\nTable 14.1 represents the values of the LC3-SWB parameters that correspond to the values specified in\nthe Codec ID field. The Codec ID is used with the AT+BCS command, see Section 4.11.3.\n\n|8 bit Codec<br>ID|Mandatory<br>or Optional|LC3 Parameters|Col4|Col5|Col6|Col7|Col8|\n|---|---|---|---|---|---|---|---|\n|**8 bit Codec**<br>**ID**|**Mandatory**<br>**or Optional**|Channel<br>mode|Sampling<br>rate|byte_count|Bit<br>depth,<br>bits per<br>audio<br>sample|Frame<br>duration|Header<br>type|\n|0x03|M|Mono|32 kHz|58|16|7.5 ms|H2|\n\n##### **14.3 Padding**\n\nLC3-SWB does not employ any padding.\n\n##### **14.4 Handling of eSCO 16-bit CRC**\n\nThe erroneous data reporting feature (Volume 2, Part B in [1]) for the HCI Synchronous Data packets\nshall indicate lost data in the Packet Status flag.\n\nBluetooth SIG Proprietary Page **143 of 143**"
    },
    {
        "section_number": "4.10.1",
        "section_title": "Transfer of Call Status",
        "granularity_level": 3,
        "content": "Upon the change in status of any call in the AG, the AG shall execute this procedure to advise the HF of\nthe current call status changes. The values for the call indicator are:\n\n0= No calls (held or active)\n1= Call is present (active or held)\n\nThe following precondition applies for this procedure:\n\n- The HF shall have enabled the \"Indicators status update\" in the AG.\n\n- A Service Level Connection shall exist between the AG and HF devices.\n\n**AG to**\n\nBluetooth SIG Proprietary Page **34 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nConsequently, upon the release of any call that places the AG in a state where there is no call present on\nthe AG, either by the AG, a network event, or actions by the HF, the AG shall issue a +CIEV unsolicited\nresult code with the call indicator value of “0”.\n\nAG to Network\n\nCall release event\n\nBluetooth SIG Proprietary Page **35 of 143**\n\n**Hands-Free Profile /** Profile Specification"
    },
    {
        "section_number": "4.10.2",
        "section_title": "Transfer of Callsetup Status",
        "granularity_level": 3,
        "content": "Upon the change in AG's callsetup status, the AG shall execute this procedure to advise the HF of the\ncurrent callsetup status changes. The values for the callsetup indicator are:\n\n0= No call setup in progress.\n\n1= Incoming call setup in progress.\n\n2= Outgoing call setup in dialing state.\n\n3= Outgoing call setup in alerting state.\n\nThe following precondition applies for this procedure:\n\n- The HF shall have enabled the \"Indicators status update\" in the AG.\n\n- A Service Level Connection shall exist between the AG and HF devices.\n\n**AG sends call**\n\n**network**\n\n**taken at HF**\n\nBluetooth SIG Proprietary Page **36 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n**to signal**\n\nOnce the AG has been advised via whatever applicable network function, that a call has reached an endto-end connected status, the callsetup indicator shall be reset indicating that no call setup procedures are\nin progress."
    },
    {
        "section_number": "4.10.3",
        "section_title": "Indication of Status for Held Calls",
        "granularity_level": 3,
        "content": "Upon the change in status of any call on hold in the AG, the AG shall execute this procedure to advise the\nHF of the held call status. The values for the callheld indicator are:\n\n0= No calls held\n\n1= Call is placed on hold or active/held calls swapped\n\n(The AG has both an active AND a held call)\n\n2= Call on hold, no active call\n\nThe following precondition applies for this procedure:\n\n- The HF shall have enabled the Call Status Indicators function in the AG.\n\n- A Service Level Connection shall exist between the AG and HF devices.\n\nWhenever an active call is placed on hold such that the AG now has both an active and held call or the\nactive/held call positions swapped by a request from the HF or by action on the AG, the AG shall issue a\n+CIEV unsolicited result code with the callheld indicator value of “1”.\n\nBluetooth SIG Proprietary Page **37 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nactive held\n\nConsequently, upon the release of any call on hold by the HF, the AG or by network event, or actions by\nthe HF or AG to retrieve a held call, the AG shall issue a +CIEV unsolicited result code with the callheld\nindicator value of “0”.\n\nHF request\nrelease or\n\n|HF|Col2|AG|Col4|\n|---|---|---|---|\n|eld|eld|eld|…OR<br>AG or<br>to rele<br>call<br>ret|\n|eld|<br>Established Service Level Connection|<br>Established Service Level Connection|<br>Established Service Level Connection|\n|eld|AT+CHLD=0<br>OK<br>+CIEV:< CallHeld Indicator >,0<br> <br>Existing Call on Hold|AT+CHLD=0<br>OK<br>+CIEV:< CallHeld Indicator >,0<br> <br>Existing Call on Hold|AT+CHLD=0<br>OK<br>+CIEV:< CallHeld Indicator >,0<br> <br>Existing Call on Hold|\n\nIf a call is still on hold when an active call is terminated or a single active call is put on hold, the AG shall\nissue a +CIEV unsolicited result code with the callheld indicator value of “2”.\n\nBluetooth SIG Proprietary Page **38 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\ncall only…\n\n##### **4.11 Audio Connection Setup**\n\nUpon user action or an internal event, either the HF or the AG may initiate the establishment of an audio\nconnection as needed. Further internal actions may be needed by the HF or the AG to internally route,\nmodify sample rate, frame and/or sample alignment of the audio paths. More formally stated, the\nrequirements for audio connection setup are:\n\n- The HF shall be capable of initiating an audio connection during a call process.\n\n- The HF may be capable of initiating an audio connection while no call is in process.\n\n- The AG shall be capable of initiating an audio connection during a call process.\n\n- The AG may be capable of initiating an audio connection while no call is in process.\n\nIncoming call audio handling is further described in Section 4.12.\n\nOutgoing call audio handling is further described in Sections 4.17, 4.18, and 4.19.\n\nAn Audio Connection set up procedure always means the establishment of a Synchronous Connection\nand it is always associated with an existing Service Level Connection.\n\nIn principle, setting up an Audio Connection by using the procedure described in this section is not\nnecessarily related to any call process.\n\nAs a precondition for this procedure, an ongoing Service Level Connection between the AG and the HF\nshall exist. If this connection does not exist, the initiator of the procedure shall autonomously establish the\nService Level Connection using the proper procedure as described in Section 4.2.\n\nBoth the initiator and the acceptor shall notify the presence of the new Audio Connection."
    },
    {
        "section_number": "4.11.1",
        "section_title": "Audio Connection Setup by AG",
        "granularity_level": 3,
        "content": "When the AG is to setup an Audio Connection, it shall initiate the Codec Connection establishment\nprocedure if the Service Level Negotiation indicated that both sides support this feature.\n\nBluetooth SIG Proprietary Page **39 of 143**\n\n**Hands-Free Profile /** Profile Specification"
    },
    {
        "section_number": "4.11.2",
        "section_title": "Audio Connection Setup by HF",
        "granularity_level": 3,
        "content": "For all HF initiated audio connection establishments for which both sides support the Codec Negotiation\nfeature, the HF shall trigger the AG to establish a Codec Connection. This is necessary because only the\nAG knows about the codec selection and settings of the network.\n\nWhen the HF triggers the establishment of the Codec Connection it shall send the AT command AT+BCC\nto the AG. The AG shall respond with OK if it will start the Codec Connection procedure, and with ERROR\nif it cannot start the Codec Connection procedure.\n\nAfter the AG has sent the OK response, the AG shall initiate the Codec Connection Setup procedure.\n\nBluetooth SIG Proprietary Page **40 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nThe type of Synchronous Connection that is established in this procedure and the settings used for it are\ndependent on the format of the media that is going to be transported over the connection and can be\nfound in the Sections 4.2.1 and 6.7.2."
    },
    {
        "section_number": "4.11.3",
        "section_title": "Codec Connection Setup",
        "granularity_level": 3,
        "content": "Upon user action or an internal event, either the HF or the AG may initiate the establishment of a Codec\nConnection Setup procedure, whenever necessary. Further internal actions may be needed by the HF or\nthe AG to internally route, modify sample rate, frame and/or sample alignment of the audio paths.\n\nAlthough the Audio Connection may be triggered by either the AG or the HF, the Codec Connection and\nthe Synchronous Connection shall always be established by the AG (unless one of the devices is a\nlegacy device).\n\nThe AG shall initiate a Codec Connection only if the HF has indicated support for the Codec Negotiation\nfeature and has sent at least one AT+BAC on the current service level connection. When selecting which\ncodec to use for a codec connection, the AG shall use the information on codecs available in the HF as\nprovided in the most recently received AT+BAC.\n\nThe AG shall inform the HF which codec ID will be used before establishing the Synchronous Connection.\nIf a codec has been successfully selected at least once on the current service level connection, the AG\ndoes not need to inform the HF about which codec to use unless a change of codec is required for the\nnext synchronous connection. If the HF has sent an additional AT+BAC after the completion of the\nService Level Connection procedure, there may be a need to re-select the codec.\n\nThe AG shall send a +BCS=<Codec ID> unsolicited response to the HF. The HF shall then respond to\nthe incoming unsolicited response with the AT command AT+BCS=<Codec ID>. The ID shall be the\n\nBluetooth SIG Proprietary Page **41 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nsame as in the unsolicited response code as long as the ID is supported. If the received ID is not\navailable, the HF shall respond with AT+BAC with its available codecs.\n\nThe AG shall always respond with OK if the ID received in AT+BCS is the same as the one sent, and with\nERROR otherwise. If no AT+BCS is received, but instead an AT+BAC is received after sending +BCS,\nthe procedure shall end but may be restarted by the AG after re-selecting codec ID based on the\ninformation in the just received AT+BAC.\n\nAfter sending the OK response, the AG shall open the Synchronous Connection with the settings that are\ndetermined by the ID. The HF shall be ready to accept the synchronous connection establishment as\nsoon as it has sent the AT commands AT+BCS=<Codec ID>.\n\nAfter the Synchronous Connection has been established, the Codec Connection is established. The\nselection of codec with the +BCS command is in effect for this connection as well as subsequent Codec\nConnections.\n\nIf the Codec Connection establishment procedure fails before a Synchronous Connection has been\nestablished, the Codec Connection establishment procedure shall be re-started before any Synchronous\nConnection is established.\n\nIf an (e)SCO link cannot be established according to the parameters required for the selected codec (e.g.,\nbasebands negotiation fails for a link with re-transmission although a wide band or super wide band\ncodec has been selected), the Codec Connection establishment procedure shall be re-started by the AG\nwith the purpose of selecting a codec that can be used. The mandatory narrow band codec (CVSD) shall\nbe used before the AG gives up trying to establish a Codec Connection.\n\nThe type settings for the Synchronous Connection that is established in this procedure are dependent on\nthe format of the media that is going to be transported over the audio connection and can be found in the\nSection 6.7.2."
    },
    {
        "section_number": "4.11.4",
        "section_title": "Available codecs updating",
        "granularity_level": 3,
        "content": "Any time on an established service level connection for which both sides support the Codec Negotiation\nFeature, the HF may send AT+BAC to inform the AG about dynamic changes in the set of available\ncodecs, which does not mandate the closing of any existing audio connection. If the AG has started the\nCodec Connection Setup procedure, AT+BAC shall be sent by the HF in response to the\n+BCS unsolicited response from the AG when the selected codec has become unavailable.\n\nIf the last selected codec becomes unavailable, the HF shall send AT+BAC to the AG to prompt the AG to\nre-select a codec before the next Codec Connection set-up and AG shall send the +BCS unsolicited\nresponse before starting establishment of a Synchronous Connection.\n\nThe mandatory narrow band codec shall always be listed in the AT+BAC command. Hence, the AT+BAC\nshall never be an empty list; this provides a fallback option that is always available to setup an Audio\nConnection.\n\nIf the mandatory wide band codec or the mandatory super wide band codec is supported, it shall also\nalways be listed in the AT+BAC commands unless support for Wide Band Speech or Super Wide Band\nSpeech has become temporarily unavailable. If the HF has previously indicated in its AT+BAC command\nthat it supports Wide Band Speech or Super Wide Band Speech, then the AG shall interpret this as\ntemporary suspension of Wide Band Speech or Super Wide Band Speech support respectively until the\nHF sends the next AT+BAC command. If the mandatory Wide Band Speech codec is not included in the\nAT+BAC command, then no other Wide Band Speech codec shall be included. If the mandatory Super\n\nBluetooth SIG Proprietary Page **42 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nWide Band Speech codec is not included in the AT+BAC command, then no other Super Wide Band\nSpeech codec shall be included."
    },
    {
        "section_number": "4.11.5",
        "section_title": "Codec re-negotiation",
        "granularity_level": 3,
        "content": "When the AG establishes an Audio Connection, it will decide what codec to use based upon the list of\navailable codecs communicated during the most recent AT+BAC command exchange. The selected\nBluetooth codec shall then be used throughout the ongoing Synchronous Connection irrespective of any\nchanges on the connection at the AG or HF side. To change the selected Bluetooth codec, the AG may\ninitiate a Codec Connection Setup procedure. The newly selected codec as a result of this codec renegotiation shall be used for the next Audio Connection.\n\n##### **4.12 Audio Connection Release**\n\nUpon a user action or an internal event, either the HF or the AG may release an existing Audio\nConnection. More formally stated, the requirements for audio connection release are:\n\n- The HF shall be capable of releasing an audio connection during a call process.\n\n- If the HF has the ability to set up an audio connection with no call in process, the HF shall be capable\nof releasing the audio connection while no call is in process.\n\n- The AG shall be capable of releasing an audio connection during a call process.\n\n- If the AG has the ability to set up an audio connection with no call in process, the AG shall be capable\nof releasing the audio connection while no call is in process.\n\nAs a precondition for this procedure, an ongoing Audio Connection between the AG and the HF shall\nexist.\n\nAn Audio Connection release always means the disconnection of its corresponding Synchronous\nConnection.\n\nWhen the audio connection is released, the audio path shall be routed to the AG. [3]\n\n3 In principle, removing an Audio Connection by using the procedure described in this section is not necessarily related to any call\nprocess\n\nBluetooth SIG Proprietary Page **43 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n##### **4.13 Answer an Incoming Call**\n\nUpon an incoming call, the AG shall send a sequence of unsolicited RING alerts to the HF. The RING\nalert shall be repeated for as long as the call acceptance is pending, or until the incoming call is\ninterrupted for any reason.\n\nThe HF shall produce a local alerting in reaction to the RING.\n\nIf the AG's SDP record (or +BRSF message) indicates \"In-band ring tone\" is supported, the AG shall send\nin-band ring tones unless subsequently changed using procedures defined in Section 4.13.4.\n\nThe AG may abort the incoming call when necessary. It shall then stop sending the RING alert to the HF."
    },
    {
        "section_number": "4.13.1",
        "section_title": "Answer Incoming Call from the HF – In-Band Ringing",
        "granularity_level": 3,
        "content": "Optionally, the AG may provide an in-band ring tone.\n\nThis case is described in Figure 4.24 below and implies as a precondition that an ongoing Service Level\nConnection between the AG and the HF shall exist. If this connection does not exist, the AG shall\nautonomously establish the Service Level Connection using the proper procedure as described in\nSection 4.2.\n\nAs the figure below shows, if an in-band ring tone is used, the AG shall send the ring tone to the HF via\nthe established Audio Connection.\n\nBluetooth SIG Proprietary Page **44 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nThe user accepts the incoming voice call by using the proper means provided by the HF. The HF shall\nthen send the ATA command (see Section 5) to the AG. The AG shall then begin the procedure for\naccepting the incoming call.\n\nIf the normal incoming call procedure is interrupted for any reason, the AG shall issue the +CIEV result\ncode, with the value indicating (callsetup=0) to notify the HF of this condition (see also Section 4.14.2)."
    },
    {
        "section_number": "4.13.2",
        "section_title": "Answer Incoming Call from the HF – No In-Band Ringing",
        "granularity_level": 3,
        "content": "As a precondition, an ongoing Service Level Connection between the AG and the HF shall exist. If this\nconnection does not exist, the AG shall autonomously establish the Service Level Connection using the\nproper procedure as described in Section 4.2.\n\nAs the figure below shows, if no in-band ring tone is used and an Audio Connection does not exist, the\nAG shall set up the Audio Connection and route the audio paths to the HF upon answering the call.\n\nBluetooth SIG Proprietary Page **45 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nThe user accepts the incoming voice call by using the proper means provided by the HF. The HF shall\nthen send the ATA command (see Section 5) to the AG, and the AG shall start the procedure for\naccepting the incoming call and establishing the Audio Connection if an Audio Connection does not exist\n(refer to Section 4.10.1).\n\nIf the normal incoming call procedure is interrupted for any reason, the AG shall issue the +CIEV result\ncode, with the value indicating (callsetup=0) to notify the HF of this condition (see also Section 4.14.2)."
    },
    {
        "section_number": "4.13.3",
        "section_title": "Answer Incoming Call from the AG",
        "granularity_level": 3,
        "content": "The following preconditions apply for this procedure:\n\n- As a precondition for this procedure, an ongoing Service Level Connection between the AG and the\nHF shall exist.\n\n- The AG shall alert the HF using either of the two procedures described in Sections 4.13.1 and 4.13.2.\n\n- The HF shall alert the user.\n\nBluetooth SIG Proprietary Page **46 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\ncondition\n\n|HF|Col2|\n|---|---|\n|of ringing<br>l active|of ringing<br>l active|\n|of ringing<br>l active|AG is alerting the HF|\n|of ringing<br>l active|+CIEV: (call = 1)<br>**… **<br>+CIEV: (callsetup = 0)|\n\nThe user accepts the incoming call by using the proper means provided by the AG.\n\nIf the normal incoming call procedure is interrupted for any reason, the AG shall issue the +CIEV result\ncode, with the value indicating (callsetup=0) to notify the HF of this condition (see also Section 4.14.2)."
    },
    {
        "section_number": "4.13.4",
        "section_title": "Change the In-Band Ring Tone Setting",
        "granularity_level": 3,
        "content": "The SDP record entry “In-band ring tone” of the “SupportedFeatures” record (see Table 6.6) informs the\nHF if the AG is capable of sending an in-band ring tone or not. If the AG is capable of sending an in-band\nring tone, it shall send the in-band ring tone by default. The AG may subsequently change this setting.\n\nIf the AG wants to change the in-band ring tone setting during an ongoing service level connection, it shall\nuse the unsolicited result code +BSIR (Bluetooth Set In-band Ring tone) to notify the HF about the\nchange. See Figure 4.27 for details.\n\nSee Section 5 for more information on the +BSIR unsolicited result code.\n\nThe in-band ring tone setting may be changed several times during a Service Level Connection.\n\nAs a precondition for this procedure, an ongoing Service Level Connection between the AG and the HF\nshall exist. If this connection does not exist, the AG shall autonomously establish the Service Level\nConnection using the proper procedure as described in Section 4.2.\n\nBluetooth SIG Proprietary Page **47 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nIf the HF does not want to use the AG’s in-band ring tone, it may mute the Audio Connection after it has\nreceived +CIEV:(callsetup=1). The HF shall un-mute the Audio Connection upon receiving the\n+CIEV:(callsetup=0) indication.\n\n##### **4.14 Reject an Incoming Call**\n\nIn case of an incoming call, the AG shall alert the HF by either one of the two procedures described in\nSections 4.13.1 and 4.13.2.\n\nInstead of answering the call, the user may reject the incoming call process by user action at the HF or\nthe AG. These two procedures are described in the following sections."
    },
    {
        "section_number": "4.14.1",
        "section_title": "Reject an Incoming Call from the HF",
        "granularity_level": 3,
        "content": "As a precondition to this procedure, the AG shall alert the HF using either of the two procedures\ndescribed in Sections 4.13.1 and 4.13.2.\n\nThe user rejects the incoming call by using the User Interface on the Hands-Free unit. The HF shall then\nsend the AT+CHUP command (see Section 5) to the AG. This may happen at any time during the\nprocedures described in Sections 4.13.1 and 4.13.2.\n\nThe AG shall then cease alerting the HF of the incoming call and send the OK indication followed by the\n+CIEV result code, with the value indicating (callsetup=0).\n\nBluetooth SIG Proprietary Page **48 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n|HF AG<br>AG is alerting the HF<br>The HF alerts user of ringing<br>The AG is<br>condition<br>HF<br>…<br>User initiated action:<br>Reject the incoming call<br>AT+CHUP (REJECT)<br>AG stops a<br>OK<br>Call reject<br>+CIEV: (callsetup = 0)|Col2|AG|Col4|\n|---|---|---|---|\n|HF <br>AG <br>AT+CHUP (REJECT)<br>User initiated action:<br>Reject the incoming call <br>AG stops a<br>Call reject<br>OK <br>AG is alerting the HF<br>The HF alerts user of ringing<br>condition<br>The AG is<br>HF<br>**… **<br>+CIEV: (callsetup = 0)|HF <br>AG <br>AT+CHUP (REJECT)<br>User initiated action:<br>Reject the incoming call <br>AG stops a<br>Call reject<br>OK <br>AG is alerting the HF<br>The HF alerts user of ringing<br>condition<br>The AG is<br>HF<br>**… **<br>+CIEV: (callsetup = 0)|AG|AG stops a<br>Call reject<br>The AG is<br>HF|\n|HF <br>AG <br>AT+CHUP (REJECT)<br>User initiated action:<br>Reject the incoming call <br>AG stops a<br>Call reject<br>OK <br>AG is alerting the HF<br>The HF alerts user of ringing<br>condition<br>The AG is<br>HF<br>**… **<br>+CIEV: (callsetup = 0)|AG is alerting the HF|AG is alerting the HF|AG is alerting the HF|\n|HF <br>AG <br>AT+CHUP (REJECT)<br>User initiated action:<br>Reject the incoming call <br>AG stops a<br>Call reject<br>OK <br>AG is alerting the HF<br>The HF alerts user of ringing<br>condition<br>The AG is<br>HF<br>**… **<br>+CIEV: (callsetup = 0)|AT+CHUP (REJECT)<br>OK <br>**… **<br>+CIEV: (callsetup = 0)|AT+CHUP (REJECT)<br>OK <br>**… **<br>+CIEV: (callsetup = 0)|AT+CHUP (REJECT)<br>OK <br>**… **<br>+CIEV: (callsetup = 0)|"
    },
    {
        "section_number": "4.14.2",
        "section_title": "Rejection/Interruption of an Incoming Call in the AG",
        "granularity_level": 3,
        "content": "As a precondition to this procedure, the AG shall alert the HF using either of the two procedures\ndescribed in Sections 4.13.1 and 4.13.2.\n\nThe user rejects the incoming call by using the User Interface on the AG. Alternatively, the incoming call\nprocess may be interrupted in the AG for any other reason.\n\nAs a consequence of this, the AG shall send the +CIEV result code, with the value indicating\n(callsetup=0). The HF shall then stop alerting the user.\n\nThis may happen at any time during the procedures described in Sections 4.13.1 and 4.13.2.\n\n|HF|Col2|\n|---|---|\n|er of<br> <br>   rting the<br>  es the<br>  e call<br>   G|er of<br> <br>   rting the<br>  es the<br>  e call<br>   G|\n|er of<br> <br>   rting the<br>  es the<br>  e call<br>   G|AG is alerting the HF|\n|er of<br> <br>   rting the<br>  es the<br>  e call<br>   G|**…** <br>+CIEV: (callsetup = 0)|\n\nBluetooth SIG Proprietary Page **49 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n##### **4.15 Terminate a Call Process**\n\nAn ongoing call process may be terminated by either the HF or the AG, by means of a user action or any\nother event."
    },
    {
        "section_number": "4.15.1",
        "section_title": "Terminate a Call Process from the HF",
        "granularity_level": 3,
        "content": "The following preconditions apply for this procedure:\n\n- An ongoing Service Level Connection between the AG and the HF shall exist. If this connection does\nnot exist, the HF shall autonomously establish the Service Level Connection using the proper\nprocedure as described in Section 4.2.\n\n- A call-related process is ongoing in the AG.\n\nAlthough not required for the call termination process, an Audio Connection is typically present between\nthe HF and AG.\n\nThe user may abort the ongoing call process using whatever means provided by the Hands-Free unit.\nThe HF shall send AT+CHUP command (see Section 5) to the AG, and the AG shall then start the\nprocedure to terminate or interrupt the current call procedure. The AG shall then send the OK indication\nfollowed by the +CIEV result code, with the value indicating (call=0).\n\nPerforming a similar procedure, the AT+CHUP command described above may also be used for\ninterrupting a normal outgoing call set-up process."
    },
    {
        "section_number": "4.15.2",
        "section_title": "Terminate a Call Process from the AG",
        "granularity_level": 3,
        "content": "The following preconditions apply for this procedure:\n\n- An ongoing Service Level Connection between the AG and the HF shall exist. If this connection does\nnot exist, the AG shall autonomously establish the Service Level Connection using the proper\nprocedure as described in Section 4.2.\n\n- A call related process is ongoing in the AG.\n\nBluetooth SIG Proprietary Page **50 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n|HF|Col2|\n|---|---|\n|call process<br>inated|call process<br>inated|\n|call process<br>inated|Established Service Level Connection|\n|call process<br>inated|+CIEV: (call = 0)|\n\nThis procedure is fully applicable for cases in which an ongoing call process is interrupted in the AG for\nany reason.\n\nIn this case, the AG shall send the +CIEV result code, with the value indicating (call=0).\n\n##### **4.16 Audio Connection Transfer towards the HF**\n\nThe audio paths of an ongoing call may be transferred from the AG to the HF. This procedure represents\na particular case of an “Audio Connection set up” procedure, as described in Section 4.11.\n\nThe call connection transfer from the AG to the HF is initiated by user action either on the HF or on the\nAG. This shall result in either the HF or the AG, respectively, initiating an “Audio Connection set up”\nprocedure with the audio paths of the current call being routed to the HF.\n\nThis procedure is only applicable if there is no current Audio Connection established between the HF and\nthe AG. In fact, if the Audio Connection already exists, this procedure is not necessary because the audio\npath of the AG is assumed to be already routed towards the HF.\n\nThe following preconditions apply for this procedure:\n\n- An ongoing Service Level Connection between the AG and the HF shall exist. If this connection does\nnot exist, the initiator of the “Audio Connection transfer towards the HF” procedure shall\nautonomously establish the Service Level Connection using the proper procedure as described in\nSection 4.2.\n\n- An ongoing call exists in the AG, with the audio paths routed to the AG means.\n\nBluetooth SIG Proprietary Page **51 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n##### **4.17 Audio Connection Transfer towards the AG**\n\nThe audio paths of an ongoing call may be transferred from the HF to the AG. This procedure represents\na particular case of an “Audio Connection release” procedure, as described in Section 4.12.\n\nThe call connection transfer from the HF to the AG is initiated by a user action in the HF or due to an\ninternal event or user action on the AG side. This results in an “Audio Connection release” procedure\nbeing initiated either by the HF or the AG respectively, with the current call kept and its audio paths\nrouted to the AG.\n\nIf, as a consequence of an HF initiated “Audio Connection transfer towards the AG” procedure, the\nexisting Service Level Connection is autonomously removed by the AG, the AG shall attempt to\nre-establish the Service Level Connection once the current call ends.\n\nAs a precondition for this procedure, an ongoing call process shall exist in the AG. The audio paths of the\nongoing call shall be available in the HF via an Audio Connection established between the AG and the\nHF.\n\nBluetooth SIG Proprietary Page **52 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n##### **4.18 Place a Call with the Phone Number Supplied by the HF**\n\nThe HF may initiate outgoing voice calls by providing the destination phone number to the AG. To start\nthe call set-up, the HF shall initiate the Service Level Connection establishment (if necessary) and send a\nproper ATDdd…dd; command to the AG. The AG shall then start the call establishment procedure using\nthe phone number received from the HF and issues the +CIEV result code, with the value (callsetup=2) to\nnotify the HF that the call set-up has been successfully initiated.\n\nSee Section 5 for more information on the ATDdd…dd; command.\n\nAs a precondition for this procedure, an ongoing Service Level Connection between the AG and the HF\nshall exist. If this connection does not exist, the HF shall autonomously establish the Service Level\nConnection using the proper procedure as described in Section 4.2.\n\nIf an Audio Connection is not established, the AG shall establish the proper Audio Connection and route\nthe audio paths of the outgoing call to the HF immediately following the commencement of the ongoing\ncall set up procedure.\n\nOnce the AG is informed that the alerting of the remote party has begun, the AG shall issue the +CIEV\nresult code, with the value indicating (callsetup=3). If the wireless network does not provide the AG of an\nindication of alerting the remote party, the AG may not send this indication.\n\nUpon call connection the AG shall send the +CIEV result code, with the value indicating (call=1).\n\nIf the normal outgoing call establishment procedure is interrupted for any reason, the AG shall issue the\n+CIEV result code, with the value indicating (callsetup=0), to notify the HF of this condition (see Section\n4.15.2).\n\nIf the AG supports the “Three-way calling” feature and if a call is already ongoing in the AG, performing\nthis procedure shall result in a new call being placed to a third party with the current ongoing call put on\nhold. For details on how to handle multiparty calls refer to Section 4.22.2.\n\nBluetooth SIG Proprietary Page **53 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n|HF AG<br>Established Service Level Connection<br>(or optionally an Audio Connection)<br>er initiated action:<br>ace call with the digits entered<br>ATDdd…dd<br>OK<br>Outgoin<br>+CIEV: (callsetup = 2) success<br>AG shal<br>Audio Connection set up establis<br>present<br>Established Audio Connection<br>The audio paths of the The au<br>outgoing call are available at are rou<br>the HF<br>+CIEV: (callsetup = 3)<br>Remote<br>… and bein<br>Remote<br>+CIEV: (call = 1)<br>Call active Call acti<br>+CIEV: (callsetup = 0)|Col2|AG|Col4|\n|---|---|---|---|\n|AG<br>er initiated action:<br>ace call with the digits entered <br>ATDdd…dd<br>Audio Connection set up<br>OK<br>Outgoin<br>success<br>+CIEV: (callsetup = 3)<br>AG shal<br>establis<br>present<br>Established Audio Connection<br>The audio paths of the<br>outgoing call are available at<br>the HF<br>The au<br>are rou<br>Established Service Level Connection<br>(or optionally an Audio Connection)<br>Remote<br>and bein<br>+CIEV: (call = 1)<br>Remote<br>+CIEV: (callsetup = 2)<br>+CIEV: (callsetup = 0)<br>**… **<br>Call acti<br>Call active<br>HF|AG<br>er initiated action:<br>ace call with the digits entered <br>ATDdd…dd<br>Audio Connection set up<br>OK<br>Outgoin<br>success<br>+CIEV: (callsetup = 3)<br>AG shal<br>establis<br>present<br>Established Audio Connection<br>The audio paths of the<br>outgoing call are available at<br>the HF<br>The au<br>are rou<br>Established Service Level Connection<br>(or optionally an Audio Connection)<br>Remote<br>and bein<br>+CIEV: (call = 1)<br>Remote<br>+CIEV: (callsetup = 2)<br>+CIEV: (callsetup = 0)<br>**… **<br>Call acti<br>Call active<br>HF|AG|Outgoin<br>success<br>AG shal<br>establis<br>present<br>The au<br>are rou<br>Remote<br>and bein<br>Remote<br>Call acti|\n|AG<br>er initiated action:<br>ace call with the digits entered <br>ATDdd…dd<br>Audio Connection set up<br>OK<br>Outgoin<br>success<br>+CIEV: (callsetup = 3)<br>AG shal<br>establis<br>present<br>Established Audio Connection<br>The audio paths of the<br>outgoing call are available at<br>the HF<br>The au<br>are rou<br>Established Service Level Connection<br>(or optionally an Audio Connection)<br>Remote<br>and bein<br>+CIEV: (call = 1)<br>Remote<br>+CIEV: (callsetup = 2)<br>+CIEV: (callsetup = 0)<br>**… **<br>Call acti<br>Call active<br>HF|Established Service Level Connection<br>(or optionally an Audio Connection)|Established Service Level Connection<br>(or optionally an Audio Connection)|Established Service Level Connection<br>(or optionally an Audio Connection)|\n|AG<br>er initiated action:<br>ace call with the digits entered <br>ATDdd…dd<br>Audio Connection set up<br>OK<br>Outgoin<br>success<br>+CIEV: (callsetup = 3)<br>AG shal<br>establis<br>present<br>Established Audio Connection<br>The audio paths of the<br>outgoing call are available at<br>the HF<br>The au<br>are rou<br>Established Service Level Connection<br>(or optionally an Audio Connection)<br>Remote<br>and bein<br>+CIEV: (call = 1)<br>Remote<br>+CIEV: (callsetup = 2)<br>+CIEV: (callsetup = 0)<br>**… **<br>Call acti<br>Call active<br>HF|ATDdd…dd<br>Audio Connection set up<br>OK<br>+CIEV: (callsetup = 2)|ATDdd…dd<br>Audio Connection set up<br>OK<br>+CIEV: (callsetup = 2)|ATDdd…dd<br>Audio Connection set up<br>OK<br>+CIEV: (callsetup = 2)|\n|AG<br>er initiated action:<br>ace call with the digits entered <br>ATDdd…dd<br>Audio Connection set up<br>OK<br>Outgoin<br>success<br>+CIEV: (callsetup = 3)<br>AG shal<br>establis<br>present<br>Established Audio Connection<br>The audio paths of the<br>outgoing call are available at<br>the HF<br>The au<br>are rou<br>Established Service Level Connection<br>(or optionally an Audio Connection)<br>Remote<br>and bein<br>+CIEV: (call = 1)<br>Remote<br>+CIEV: (callsetup = 2)<br>+CIEV: (callsetup = 0)<br>**… **<br>Call acti<br>Call active<br>HF|Established Audio Connection|Established Audio Connection|Established Audio Connection|\n|AG<br>er initiated action:<br>ace call with the digits entered <br>ATDdd…dd<br>Audio Connection set up<br>OK<br>Outgoin<br>success<br>+CIEV: (callsetup = 3)<br>AG shal<br>establis<br>present<br>Established Audio Connection<br>The audio paths of the<br>outgoing call are available at<br>the HF<br>The au<br>are rou<br>Established Service Level Connection<br>(or optionally an Audio Connection)<br>Remote<br>and bein<br>+CIEV: (call = 1)<br>Remote<br>+CIEV: (callsetup = 2)<br>+CIEV: (callsetup = 0)<br>**… **<br>Call acti<br>Call active<br>HF|+CIEV: (callsetup = 3)<br>+CIEV: (call = 1)<br>+CIEV: (callsetup = 0)<br>**… **|+CIEV: (callsetup = 3)<br>+CIEV: (call = 1)<br>+CIEV: (callsetup = 0)<br>**… **|+CIEV: (callsetup = 3)<br>+CIEV: (call = 1)<br>+CIEV: (callsetup = 0)<br>**… **|\n\n##### **4.19 Memory Dialing from the HF**\n\nThe HF may initiate outgoing voice calls using the memory dialing feature of the AG. To start the call setup, the HF shall initiate the Service Level Connection establishment (if necessary) and send an\nATD>Nan…; command to the AG. The AG shall then start the call establishment procedure using the\nphone number stored in the AG memory location given by Nan…; and issue the +CIEV result code, with\nthe value (callsetup=2) to notify the HF that the call set-up has been successfully initiated.\n\nSee Section 5 for more information on the ATD>Nan… command.\n\nAs a precondition for this procedure, an ongoing Service Level Connection between the AG and the HF\nshall exist. If this connection does not exist, the HF shall autonomously establish the Service Level\nConnection using the proper procedure as described in Section 4.2.\n\nIf an Audio Connection is not established, the AG shall establish the proper Audio Connection and route\nthe audio paths of the outgoing call to the HF immediately following the commencement of the ongoing\ncall set up procedure.\n\nOnce alerting of the remote party begins, the AG shall issue the +CIEV result code, with the value\nindicating (callsetup=3).\n\nUpon call connection the AG shall send the +CIEV result code, with the value indicating (call=1).\n\nIf the normal outgoing call establishment procedure is interrupted for any reason, the AG shall issue the\n+CIEV result code, with the value indicating (callsetup=0), to notify the HF of this condition (see\nSection 4.15.2).\n\nBluetooth SIG Proprietary Page **54 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nIf the AG supports the “Three-way calling” feature and if a call is already ongoing in the AG, performing\nthis procedure shall result in a new call being placed to a third party with the current ongoing call put on\nhold. For details on how to handle multiparty calls refer to Section 4.22.2.\n\nIf there is no number stored for the memory location given by the HF, the AG shall respond with ERROR.\n\n|HF AG<br>Established Service Level Connection<br>(or optionally an Audio Connection)<br>er initiated action: Place call<br>ng memory dialing ATD>nnn…<br>OK<br>Outgoin<br>+CIEV: (callsetup = 2) success<br>AG shall<br>Audio Connection set up connecti<br>connecti<br>Established Audio Connection<br>The au<br>call are<br>he audio paths of the outgoing<br>all are available at the HF<br>+CIEV: (callsetup = 3)<br>Remote<br>… and bein<br>Remote<br>+CIEV: (call = 1)<br>Call active<br>Call acti<br>+CIEV: (callsetup = 0)|HF|Col3|Col4|AG|Col6|\n|---|---|---|---|---|---|\n|HF<br>AG<br>ATD>nnn… <br>Audio Connection set up <br>OK <br>Outgoin<br>success<br>+CIEV: (callsetup = 3) <br>AG shall<br>connecti<br>connecti<br>Established Audio Connection <br>he audio paths of the outgoing<br>all are available at the HF<br>The au<br>call are<br>Established Service Level Connection<br>(or optionally an Audio Connection) <br>Remote<br>and bein<br>+CIEV: (call = 1) <br>Remote<br>+CIEV: (callsetup = 2) <br>+CIEV: (callsetup = 0) <br>**… **<br>Call acti<br>Call active <br>er initiated action: Place call<br>ng memory dialing|HF|Established Service Level Connection<br>(or optionally an Audio Connection)|Established Service Level Connection<br>(or optionally an Audio Connection)|Established Service Level Connection<br>(or optionally an Audio Connection)|Outgoin<br>success<br>AG shall<br>connecti<br>connecti<br>The au<br>call are<br>Remote<br>and bein<br>Remote<br>Call acti|\n|HF<br>AG<br>ATD>nnn… <br>Audio Connection set up <br>OK <br>Outgoin<br>success<br>+CIEV: (callsetup = 3) <br>AG shall<br>connecti<br>connecti<br>Established Audio Connection <br>he audio paths of the outgoing<br>all are available at the HF<br>The au<br>call are<br>Established Service Level Connection<br>(or optionally an Audio Connection) <br>Remote<br>and bein<br>+CIEV: (call = 1) <br>Remote<br>+CIEV: (callsetup = 2) <br>+CIEV: (callsetup = 0) <br>**… **<br>Call acti<br>Call active <br>er initiated action: Place call<br>ng memory dialing|HF|ATD>nnn… <br>Audio Connection set up <br>OK <br>+CIEV: (callsetup = 2)|ATD>nnn… <br>Audio Connection set up <br>OK <br>+CIEV: (callsetup = 2)|ATD>nnn… <br>Audio Connection set up <br>OK <br>+CIEV: (callsetup = 2)|ATD>nnn… <br>Audio Connection set up <br>OK <br>+CIEV: (callsetup = 2)|\n|HF<br>AG<br>ATD>nnn… <br>Audio Connection set up <br>OK <br>Outgoin<br>success<br>+CIEV: (callsetup = 3) <br>AG shall<br>connecti<br>connecti<br>Established Audio Connection <br>he audio paths of the outgoing<br>all are available at the HF<br>The au<br>call are<br>Established Service Level Connection<br>(or optionally an Audio Connection) <br>Remote<br>and bein<br>+CIEV: (call = 1) <br>Remote<br>+CIEV: (callsetup = 2) <br>+CIEV: (callsetup = 0) <br>**… **<br>Call acti<br>Call active <br>er initiated action: Place call<br>ng memory dialing|HF|Established Audio Connection|Established Audio Connection|Established Audio Connection|Established Audio Connection|\n|HF<br>AG<br>ATD>nnn… <br>Audio Connection set up <br>OK <br>Outgoin<br>success<br>+CIEV: (callsetup = 3) <br>AG shall<br>connecti<br>connecti<br>Established Audio Connection <br>he audio paths of the outgoing<br>all are available at the HF<br>The au<br>call are<br>Established Service Level Connection<br>(or optionally an Audio Connection) <br>Remote<br>and bein<br>+CIEV: (call = 1) <br>Remote<br>+CIEV: (callsetup = 2) <br>+CIEV: (callsetup = 0) <br>**… **<br>Call acti<br>Call active <br>er initiated action: Place call<br>ng memory dialing|HF|+CIEV: (callsetup = 3) <br>+CIEV: (call = 1) <br>+CIEV: (callsetup = 0) <br>**… **|+CIEV: (callsetup = 3) <br>+CIEV: (call = 1) <br>+CIEV: (callsetup = 0) <br>**… **|+CIEV: (callsetup = 3) <br>+CIEV: (call = 1) <br>+CIEV: (callsetup = 0) <br>**… **|+CIEV: (callsetup = 3) <br>+CIEV: (call = 1) <br>+CIEV: (callsetup = 0) <br>**… **|\n\n##### **4.20 Last Number Re-Dial from the HF**\n\nThe HF may initiate outgoing voice calls by recalling the last number dialed by the AG. To start the call\nset-up, the HF shall initiate the Service Level Connection establishment (if necessary) and send an\nAT+BLDN command to the AG. The AG shall then start the call establishment procedure using the last\nphone number dialed by the AG, and issues the +CIEV result code, with the value (callsetup=2), to notify\nthe HF that the call set-up has been successfully initiated.\n\nSee Section 5 for more information on the AT+BLDN command.\n\nAs a precondition for this procedure, an ongoing Service Level Connection between the AG and the HF\nshall exist. If this connection does not exist, the HF shall autonomously establish the Service Level\nConnection using the proper procedure as described in Section 4.2.\n\nIf an Audio Connection is not established, the AG shall establish the proper Audio Connection and route\nthe audio paths of the outgoing call to the HF immediately following the commencement of the ongoing\ncall set-up procedure.\n\nOnce alerting of the remote party begins, the AG shall issue the +CIEV result code, with the value\nindicating (callsetup=3).\n\nBluetooth SIG Proprietary Page **55 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nUpon call connection the AG shall send the +CIEV result code, with the value indicating (call=1).\n\nIf the normal outgoing call establishment procedure is interrupted for any reason, the AG shall issue the\n+CIEV result code, with the value indicating (callsetup=0), to notify the HF of this condition (see\nSection 4.15.2).\n\nIf the AG supports the “Three-way calling” feature and if a call is already ongoing in the AG, performing\nthis procedure shall result in a new call being placed to a third party with the current ongoing call put on\nhold. For details on how to handle multiparty calls refer to Section 4.22.2.\n\nIf there is no number stored for the memory location given by the HF, the AG shall respond with ERROR.\n\nUser initiated action:\n\nPlace call to the last\nnumber dialed\n\n|HF|Col2|Col3|AG|Col5|\n|---|---|---|---|---|\n|utgoing<br>   HF<br> e|Established Service Level Connection<br>(or optionally an Audio Connection)|Established Service Level Connection<br>(or optionally an Audio Connection)|Established Service Level Connection<br>(or optionally an Audio Connection)|Outgoing<br>successfu<br>AG shall in<br>establishm<br>not presen<br>The audio<br>routed to<br>Remote p<br>and being<br>Remote p<br>Call active|\n|utgoing<br>   HF<br> e|AT+BLDN <br>Audio Connection set up <br>OK <br>+CIEV: (callsetup = 2)|AT+BLDN <br>Audio Connection set up <br>OK <br>+CIEV: (callsetup = 2)|AT+BLDN <br>Audio Connection set up <br>OK <br>+CIEV: (callsetup = 2)|AT+BLDN <br>Audio Connection set up <br>OK <br>+CIEV: (callsetup = 2)|\n|utgoing<br>   HF<br> e|Established Audio Connection|Established Audio Connection|Established Audio Connection|Established Audio Connection|\n|utgoing<br>   HF<br> e|+CIEV: (callsetup = 3)<br>+CIEV: (call = 1)<br>+CIEV: (callsetup = 0)<br>**… **|+CIEV: (callsetup = 3)<br>+CIEV: (call = 1)<br>+CIEV: (callsetup = 0)<br>**… **|+CIEV: (callsetup = 3)<br>+CIEV: (call = 1)<br>+CIEV: (callsetup = 0)<br>**… **|+CIEV: (callsetup = 3)<br>+CIEV: (call = 1)<br>+CIEV: (callsetup = 0)<br>**… **|\n\n##### **4.21 Call Waiting Notification Activation**\n\nThe HF may issue the AT+CCWA command to enable the “Call Waiting notification” function in the AG.\nOnce the “Call Waiting notification” is enabled, the AG shall send the corresponding +CCWA unsolicited\nresult code to the HF whenever an incoming call is waiting during an ongoing call. It is always assumed\nthat the “call waiting” service is already active in the network.\n\nOnce the HF issues the AT+CCWA command, the AG shall respond with OK. It shall then keep the “Call\nWaiting notification” enabled until either the AT+CCWA command is issued to disable “Call Waiting\nnotification,” or the current Service Level Connection between the AG and the HF is dropped for any\nreason.\n\nSee Section 5 for more information on the AT+CCWA command.\n\nBluetooth SIG Proprietary Page **56 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nAs a precondition for this procedure, an ongoing Service Level Connection between the AG and the HF\nshall exist. If this connection does not exist, the HF shall autonomously establish the Service Level\nConnection using the proper procedure as described in Section 4.2.\n\n##### **4.22 Three-Way Call Handling**\n\nProper management of several concurrent calls shall be accomplished by performing the procedures\ndescribed in [2] but with some limitations stated in this specification. For more details, refer to Section 5.\n\nThe HF device cannot always assume that the \"call hold and/or multiparty\" services are available in the\nnetwork. If the AG determines that a requested action by the HF device cannot be performed due to the\ninability of the network to support that feature or lack of subscriber subscription, the AG shall return a\n+CME error.\n\nThere are two +CME ERROR codes that are used to indicate network related failure reasons to the HF:\n\n- 30 - No Network Service. Indicates that an AT+CHLD command cannot be implemented due to\nnetwork limitations.\n\n- 31 - Network Timeout. Indicates that an AT+CHLD command cannot be implemented due to network\nproblems.\n\nIn general, when the user deals with multiple concurrent calls, the HF shall issue the corresponding\nAT+CHLD command as a result of user actions. This command allows the control of multiple concurrent\ncalls and provides means for holding calls, releasing calls, switching between two calls, and adding a call\nto a multiparty conference.\n\nWhen this feature is supported, the HF and AG are only mandated to implement the “basic Three-Way\ncalling” commands AT+CHLD = 1 and 2.\n\nThis section covers two cases. In one case, the third party call is received in the AG, and notification is\nsent to the HF via a Call Waiting notification. In the second case, the third party call is placed from the HF.\n\nSee Section 5 for more information on the AT+CHLD command.\n\nThe following preconditions apply for these procedures:\n\nBluetooth SIG Proprietary Page **57 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n- As a precondition for this procedure, an ongoing Service Level Connection between the AG and the\nHF shall exist. If this connection does not exist, the initiator of the procedure shall autonomously\nestablish the Service Level Connection using the proper procedure as described in Section 4.2.\n\n- An ongoing call in the AG shall exist."
    },
    {
        "section_number": "4.22.1",
        "section_title": "Three-Way Calling—Call Waiting Notification",
        "granularity_level": 3,
        "content": "In addition to the two previously stated preconditions, the Call Waiting notification to the HF shall already\nbe enabled in the AG (that is, the procedure stated in Section 4.21 has been performed).\n\nIf the AG receives a third party call, it shall send the call waiting notification +CCWA and +CIEV result\ncode, with the value indicating (callsetup=1), to the HF.\n\nIf the user rejects the call at the HF, the HF shall send the AT+CHLD command with parameter 0 to the\nAG. The AG shall then reject the call and respond with OK, and issue the +CIEV result code with the\nvalue indicating (callsetup=0).\n\nIf the user accepts the call at the HF, the HF shall send the AT+CHLD with parameter 1 or 2 to the AG.\nThe HF cannot cause the waiting call to be added as a conference call via a single AT+CHLD command;\nbut if this is desired the HF can achieve this by first issuing an AT+CHLD=2 command, and then issuing\n\nBluetooth SIG Proprietary Page **58 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nan AT+CHLD=3 command. The AG shall then accept the waiting call and respond with OK, and issue the\n+CIEV result code with the value indicating (callsetup=0). If the HF elects to send AT+CHLD=2 (placing\nthe original call on hold), then the AG shall send the +CIEV result code with the value indicating a held\ncall (callheld=1).\n\nOptionally, the HF may then use the AT+CHLD command, in order to change the status of the held and\nactive calls.\n\nIf the normal incoming call procedure is interrupted for any reason, the AG shall issue the +CIEV result\ncode, with the value indicating (callsetup=0), to notify the HF of this condition (see Section 4.14.2)."
    },
    {
        "section_number": "4.22.2",
        "section_title": "Three-Way Calls – Third Party Call Placed from the HF",
        "granularity_level": 3,
        "content": "|HF AG<br>Established Service Level Connection<br>(or optionally an Audio Connection)<br>ser initiated action: Ongoing call<br>Place call to a third party ATD…<br>C<br>OK<br>p<br>+CIEV: (callheld=2) su<br>There is no enforced<br>order for the callheld and +CIEV: (callsetup = 2)<br>callsetup indicator<br>updates. AG shall in<br>Audio Connection set up establishm<br>not present<br>Established Audio Connection<br>he audio paths of the new call The audio<br>re available at the HF the HF<br>There is no enforced +CIEV: (callsetup = 3) Remote pa<br>order for the callheld and<br>… and being<br>callsetup indicator<br>updates. +CIEV: (callsetup = 0)<br>Remote pa<br>+CIEV: (callheld = 1)<br>User Action AT+CHLD=… The A<br>reque<br>OK|HF|Col3|Col4|AG|Col6|\n|---|---|---|---|---|---|\n|There is no enforced<br>order for the callheld and<br>callsetup indicator<br>updates.<br>There is no enforced<br>order for the callheld and<br>callsetup indicator<br>updates. <br>HF<br>AG <br>ATD…<br>Audio Connection set up<br>OK <br>+CIEV: (callsetup = 3) <br>AG shall in<br>establishm<br>not present<br>Established Audio Connection<br>he audio paths of the new call<br>re available at the HF <br>The audio<br>the HF<br>Established Service Level Connection<br>(or optionally an Audio Connection)<br>Remote pa<br>and being<br>Remote pa<br>+CIEV: (callsetup = 2) <br>+CIEV: (callsetup = 0) <br>ser initiated action:<br>Place call to a third party <br>C<br>p<br>su<br>Ongoing call<br>**… **<br>+CIEV: (callheld=2)<br>User Action<br>AT+CHLD=…<br>OK<br>The A<br>reque<br>+CIEV: (callheld = 1)|HF|Established Service Level Connection<br>(or optionally an Audio Connection)|Established Service Level Connection<br>(or optionally an Audio Connection)|Established Service Level Connection<br>(or optionally an Audio Connection)|AG shall in<br>establishm<br>not present<br>The audio<br>the HF<br>Remote pa<br>and being<br>Remote pa<br>C<br>p<br>su<br>Ongoing call<br>The A<br>reque|\n|There is no enforced<br>order for the callheld and<br>callsetup indicator<br>updates.<br>There is no enforced<br>order for the callheld and<br>callsetup indicator<br>updates. <br>HF<br>AG <br>ATD…<br>Audio Connection set up<br>OK <br>+CIEV: (callsetup = 3) <br>AG shall in<br>establishm<br>not present<br>Established Audio Connection<br>he audio paths of the new call<br>re available at the HF <br>The audio<br>the HF<br>Established Service Level Connection<br>(or optionally an Audio Connection)<br>Remote pa<br>and being<br>Remote pa<br>+CIEV: (callsetup = 2) <br>+CIEV: (callsetup = 0) <br>ser initiated action:<br>Place call to a third party <br>C<br>p<br>su<br>Ongoing call<br>**… **<br>+CIEV: (callheld=2)<br>User Action<br>AT+CHLD=…<br>OK<br>The A<br>reque<br>+CIEV: (callheld = 1)|HF|ATD…<br>Audio Connection set up<br>OK <br>+CIEV: (callsetup = 2) <br>+CIEV: (callheld=2)|ATD…<br>Audio Connection set up<br>OK <br>+CIEV: (callsetup = 2) <br>+CIEV: (callheld=2)|ATD…<br>Audio Connection set up<br>OK <br>+CIEV: (callsetup = 2) <br>+CIEV: (callheld=2)|ATD…<br>Audio Connection set up<br>OK <br>+CIEV: (callsetup = 2) <br>+CIEV: (callheld=2)|\n|There is no enforced<br>order for the callheld and<br>callsetup indicator<br>updates.<br>There is no enforced<br>order for the callheld and<br>callsetup indicator<br>updates. <br>HF<br>AG <br>ATD…<br>Audio Connection set up<br>OK <br>+CIEV: (callsetup = 3) <br>AG shall in<br>establishm<br>not present<br>Established Audio Connection<br>he audio paths of the new call<br>re available at the HF <br>The audio<br>the HF<br>Established Service Level Connection<br>(or optionally an Audio Connection)<br>Remote pa<br>and being<br>Remote pa<br>+CIEV: (callsetup = 2) <br>+CIEV: (callsetup = 0) <br>ser initiated action:<br>Place call to a third party <br>C<br>p<br>su<br>Ongoing call<br>**… **<br>+CIEV: (callheld=2)<br>User Action<br>AT+CHLD=…<br>OK<br>The A<br>reque<br>+CIEV: (callheld = 1)|HF|Established Audio Connection|Established Audio Connection|Established Audio Connection|Established Audio Connection|\n|There is no enforced<br>order for the callheld and<br>callsetup indicator<br>updates.<br>There is no enforced<br>order for the callheld and<br>callsetup indicator<br>updates. <br>HF<br>AG <br>ATD…<br>Audio Connection set up<br>OK <br>+CIEV: (callsetup = 3) <br>AG shall in<br>establishm<br>not present<br>Established Audio Connection<br>he audio paths of the new call<br>re available at the HF <br>The audio<br>the HF<br>Established Service Level Connection<br>(or optionally an Audio Connection)<br>Remote pa<br>and being<br>Remote pa<br>+CIEV: (callsetup = 2) <br>+CIEV: (callsetup = 0) <br>ser initiated action:<br>Place call to a third party <br>C<br>p<br>su<br>Ongoing call<br>**… **<br>+CIEV: (callheld=2)<br>User Action<br>AT+CHLD=…<br>OK<br>The A<br>reque<br>+CIEV: (callheld = 1)|HF|+CIEV: (callsetup = 3) <br>+CIEV: (callsetup = 0) <br>**… **<br>AT+CHLD=…<br>OK<br>+CIEV: (callheld = 1)|+CIEV: (callsetup = 3) <br>+CIEV: (callsetup = 0) <br>**… **<br>AT+CHLD=…<br>OK<br>+CIEV: (callheld = 1)|+CIEV: (callsetup = 3) <br>+CIEV: (callsetup = 0) <br>**… **<br>AT+CHLD=…<br>OK<br>+CIEV: (callheld = 1)|+CIEV: (callsetup = 3) <br>+CIEV: (callsetup = 0) <br>**… **<br>AT+CHLD=…<br>OK<br>+CIEV: (callheld = 1)|\n\nIf a third party call is placed from the HF using the ATD command, the AG shall send the OK indication\nand two +CIEV result codes, one with the value indicating (callsetup=2), and one with the value indicating\n(callheld=2) to the HF. It is permissible for the AG to send these two +CIEV result codes in either order as\nthe timing of events in the AG may differ between implementations and network types. If the remote party\nis reached and alerted, the AG shall issue the +CIEV result code with the value indicating (callsetup=3). If\nthe wireless network does not provide the AG of an indication of alerting the remote party, the AG may\nnot send this indication.\n\nIf the remote party answers the call, the AG shall issue the +CIEV result codes with the values indicating\n(callsetup=0) and (callheld=1). As before, there is no enforced order to these two +CIEV result codes.\n\nBluetooth SIG Proprietary Page **59 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nOptionally, the HF may then use the AT+CHLD command in order to change the status of the held and\nactive calls. If the AT+CHLD command results in the change in a held call status the AG shall provide the\nstatus indication using the +CIEV result code with the value indicating the call held status\n(callheld=<0,1,2>).\n\nIf the normal outgoing call procedure is interrupted for any reason, the AG shall issue the +CIEV result\ncode, with the value indicating (callsetup=0), to notify the HF of this condition (see Section 4.15.2). The\nAG shall then update the callheld status to indicate the change of status of the original (held) call based\nupon one of the two following scenarios:\n\n- The AG may choose to leave the original call on hold. In this case, the AG shall issue the +CIEV\nresult code with the value indicating (call held=2).\n\n- Alternatively the AG may autonomously retrieve the held call, thus changing the status and shall send\nthe +CIEV indicator (call held=0).\n\nIn either case, the +CIEV response code (call=1) shall remain unchanged.\n\n##### **4.23 Calling Line Identification (CLI) Notification**\n\nThe HF may issue the AT+CLIP command to enable the “Calling Line Identification notification” function\nin the AG.\n\nIf the calling subscriber number information is available from the network, the AG shall issue the +CLIP\nunsolicited result code just after every RING indication when the HF is alerted in an incoming call. See\nSection 4.13 for more details.\n\nOnce the HF issues the AT+CLIP command, the AG shall respond with OK. The AG shall then keep the\n“Calling Line Identification notification” enabled until either the AT+CLIP command is issued by the HF to\ndisable it, or the current Service Level Connection between the AG and the HF is dropped for any reason.\n\nSee Section 5 for more information on the AT+CLIP command.\n\nAs a precondition for this procedure, an ongoing Service Level Connection between the AG and the HF\nshall exist. If this connection does not exist, the HF shall autonomously establish the Service Level\nConnection using the proper procedure as described in Section 4.2.\n\n|HF AG<br>Established Service Level Connection<br>Internal event or user requested:<br>Enable CLI notification<br>The HF requests enabling CLI AT+CLIP=1<br>notification<br>OK The AG<br>n|Col2|AG|Col4|\n|---|---|---|---|\n|HF <br>AG <br>AT+CLIP=1 <br>Internal event or user requested:<br>Enable CLI notification<br>The AG<br>n<br>OK<br>The HF requests enabling CLI<br>notification<br>Established Service Level Connection|HF <br>AG <br>AT+CLIP=1 <br>Internal event or user requested:<br>Enable CLI notification<br>The AG<br>n<br>OK<br>The HF requests enabling CLI<br>notification<br>Established Service Level Connection|AG|The AG<br>n|\n|HF <br>AG <br>AT+CLIP=1 <br>Internal event or user requested:<br>Enable CLI notification<br>The AG<br>n<br>OK<br>The HF requests enabling CLI<br>notification<br>Established Service Level Connection|Established Service Level Connection|Established Service Level Connection|Established Service Level Connection|\n|HF <br>AG <br>AT+CLIP=1 <br>Internal event or user requested:<br>Enable CLI notification<br>The AG<br>n<br>OK<br>The HF requests enabling CLI<br>notification<br>Established Service Level Connection|AT+CLIP=1 <br>OK|AT+CLIP=1 <br>OK|AT+CLIP=1 <br>OK|\n\nBluetooth SIG Proprietary Page **60 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n##### **4.24 The HF Requests Turning off the AG’s EC and NR**\n\nThe HF may disable the echo canceling and noise reduction functions resident in the AG via the\nAT+NREC command.\n\nIf the HF supports embedded EC and/or NR functions, it shall support the AT+NREC command as\ndescribed in the procedures in this section. Moreover, if the HF has these functions enabled, it shall\nperform this procedure before any Audio Connection between the HF and the AG is established.\n\nBy default, if the AG supports its own embedded echo canceling and/or noise reduction functions, it shall\nhave them activated until the AT+NREC command is received. From then on, and until the current\nService Level Connection between the AG and HF is dropped for any reason, the AG shall disable these\nfunctions every time an Audio Connection between the HF and the AG is used for audio routing.\n\nIf the AG does not support any echo canceling and noise reduction functions, it shall respond with the\nERROR indicator on reception of the AT+NREC command.\n\nSee Section 5 for more information on the AT+NREC command.\n\nAs a precondition for this procedure, an ongoing Service Level Connection between the AG and the HF\nshall exist. If this connection does not exist, the HF shall autonomously establish the Service Level\nConnection using the proper procedure as described in Section 4.2.\n\nThe HF sends the AT+NREC command and AG confirms with either OK or ERROR indication.\n\n##### **4.25 Voice Recognition Activation / Enhanced Voice Recognition** **Activation**\n\nThe HF, via the AT+BVRA command, or the AG autonomously, may activate/deactivate the voice\nrecognition function resident in the AG. The Enhanced Voice Recognition Status and Voice Recognition\nText features enhance the use of the AT+BVRA command. This is described in detail in Section 5.3.\nBeyond the audio routing and voice recognition activation capabilities, the rest of the voice recognition\nfunctionality is implementation dependent.\n\nWhenever the AG supports a voice recognition function, it shall support the AT+BVRA command as\ndescribed in the procedures in this section.\n\nBluetooth SIG Proprietary Page **61 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nIf the HF issues the AT+BVRA command, the AG shall respond with the OK result code if it supports\nvoice recognition, then initiate an Audio Connection to the HF (if the Audio Connection does not already\nexist) and begin the voice input sequence.\n\nIf the AG does not support voice recognition, the AG shall respond with the ERROR indication.\n\nWhen the voice recognition function is activated from the AG, it shall inform the HF via the +BVRA: 1\nunsolicited result code and the AG shall initiate an Audio Connection to the HF (if the Audio Connection\ndoes not already exist) and begin the voice input sequence.\n\nOnce activated, depending upon the voice recognition implementation, the AG shall then keep the voice\nrecognition function enabled:\n\n- For the duration of time supported by the implementation (“momentary on” voice recognition\nimplementation). In this case, the AG shall notify the HF by sending a +BVRA: 0 unsolicited result\ncode.\n\n- Or until the AT+BVRA command is issued to disable voice recognition from the HF.\n\n- Or until the current Service Level Connection between the AG and the HF is dropped for any reason.\n\nSee Section 5 for more information on the AT+BVRA command and the +BVRA result code.\n\nIf the Enhanced Voice Recognition Status or Voice Recognition Text features are supported, the\nAT+BVRA command is extended with the value 2. The value 2 shall only be used if both the AG and the\nHF support the Enhanced Voice Recognition Status feature. It indicates that the HF is ready to accept\naudio when the Audio Connection is first established.\n\nThe HF may send this value during an ongoing VR (Voice Recognition) session to terminate audio output\nfrom the AG (if there is any) and prepare the AG for new audio input.\n\nThe syntax of the +BVRA command is extended with <vrecstate> and <textualRepresentation>.\n\nFor example, <vrecstate> of 5 (b101) means that the AG is listening to the audio input and processing at\nthe same time.\n\nExamples that build on one another for textual representation:\n\n1. +BVRA: 1,1,12AA,1,1,“Message 1 from Janina”: A new text is sent from the AG to the HF. The AG\n\nnow has the text:\n12AA: Message 1 from Janina\n\n2. +BVRA: 1,1,12AB,1,1,“Message 2 from Melissa”: A new text is sent from the AG to the HF with a new\n\n<textID>. The AG now has the text:\n12AA: Message 1 from Janina\n12AB: Message 2 from Melissa\n\n3. +BVRA: 1,1,12AB,1,2,“Message 3 from Melissa”: A new text is sent from the AG to the HF with the\n\nsame <textID> as example 2. Since the textID is the same as in example 2 and the operation is\nreplace, the text from example 2 is replaced by the new text. So the AG now has the texts:\n12AA: Message 1 from Janina\n12AB: Message 3 from Melissa\n\nBluetooth SIG Proprietary Page **62 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n4. +BVRA: 1,1,12AB,1,3,“ with new stuff”: A new text is sent from the AG to the HF and gets attached to\n\nthe old text. Since the textID is the same as in example 3 and the operation is append, the new text is\nappended to the text from example 3. The AG now has the texts:\n12AA: Message 1 from Janina\n12AB: Message 3 from Melissa with new stuff\n\nFor more information, refer to Section 5.3.\n\nA precondition for these procedures is that an ongoing Service Level Connection between the AG and the\nHF shall exist. If this connection does not exist, the initiator of the procedure shall autonomously establish\nthe Service Level Connection using the proper procedure as described in Section 4.2."
    },
    {
        "section_number": "4.25.1",
        "section_title": "Voice Recognition Activation – HF Initiated",
        "granularity_level": 3,
        "content": "Bluetooth SIG Proprietary Page **63 of 143**\n\n**Hands-Free Profile /** Profile Specification"
    },
    {
        "section_number": "4.25.3",
        "section_title": "Voice Recognition Deactivation",
        "granularity_level": 3,
        "content": "Bluetooth SIG Proprietary Page **64 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nBluetooth SIG Proprietary Page **65 of 143**\n\n**Hands-Free Profile /** Profile Specification"
    },
    {
        "section_number": "4.25.4",
        "section_title": "Enhanced Voice Recognition Activation session",
        "granularity_level": 3,
        "content": "Voice Recognition\nUser Hands Free Audio Gateway\n\nEngine\n\n|Col1|Col2|HF initiates the Voice Recognition Activa<br>1 Initiate Voice Recognition on HF|Col4|Col5|tion]<br>2 AT+BVRA=1<br>3 OK|Col7|Col8|\n|---|---|---|---|---|---|---|---|\n|[AG initi|[AG initi|**4** Initiate Voice Recognition on AG<br> ates the Voice Recognition Activation]|**4** Initiate Voice Recognition on AG<br> ates the Voice Recognition Activation]|**4** Initiate Voice Recognition on AG<br> ates the Voice Recognition Activation]|**5** +BVRA: 1,0|||\n|[AG initi|[AG initi|||||||\n|[AG initi|[AG initi|**13** User asks:<br>  \"How is the weather in Munich?\"<br>HF finishes setting up its<br>audio path and SCO link if<br>not already established<br>opt: If V<br>**18**HF starts to play:<br>\"The temperature in Munich is 25°C<br>and it s sunny.\"|**13** User asks:<br>  \"How is the weather in Munich?\"<br>HF finishes setting up its<br>audio path and SCO link if<br>not already established<br>opt: If V<br>**18**HF starts to play:<br>\"The temperature in Munich is 25°C<br>and it s sunny.\"|**13** User asks:<br>  \"How is the weather in Munich?\"<br>HF finishes setting up its<br>audio path and SCO link if<br>not already established<br>opt: If V<br>**18**HF starts to play:<br>\"The temperature in Munich is 25°C<br>and it s sunny.\"|**6** Audio connection set up if<br>not already established<br>**7** AT+BVRA=2<br>**8** OK|**6** Audio connection set up if<br>not already established<br>**7** AT+BVRA=2<br>**8** OK|**6** Audio connection set up if<br>not already established<br>**7** AT+BVRA=2<br>**8** OK|\n|[AG initi|[AG initi|**13** User asks:<br>  \"How is the weather in Munich?\"<br>HF finishes setting up its<br>audio path and SCO link if<br>not already established<br>opt: If V<br>**18**HF starts to play:<br>\"The temperature in Munich is 25°C<br>and it s sunny.\"|**13** User asks:<br>  \"How is the weather in Munich?\"<br>HF finishes setting up its<br>audio path and SCO link if<br>not already established<br>opt: If V<br>**18**HF starts to play:<br>\"The temperature in Munich is 25°C<br>and it s sunny.\"|opt: If V|RE plays a \"starting sound\"|**10** VRE plays a \"starting sound\"||\n|[AG initi|[AG initi|**13** User asks:<br>  \"How is the weather in Munich?\"<br>HF finishes setting up its<br>audio path and SCO link if<br>not already established<br>opt: If V<br>**18**HF starts to play:<br>\"The temperature in Munich is 25°C<br>and it s sunny.\"|**13** User asks:<br>  \"How is the weather in Munich?\"<br>HF finishes setting up its<br>audio path and SCO link if<br>not already established<br>opt: If V<br>**18**HF starts to play:<br>\"The temperature in Munich is 25°C<br>and it s sunny.\"|||||\n|[AG initi|[AG initi|**13** User asks:<br>  \"How is the weather in Munich?\"<br>HF finishes setting up its<br>audio path and SCO link if<br>not already established<br>opt: If V<br>**18**HF starts to play:<br>\"The temperature in Munich is 25°C<br>and it s sunny.\"|**13** User asks:<br>  \"How is the weather in Munich?\"<br>HF finishes setting up its<br>audio path and SCO link if<br>not already established<br>opt: If V<br>**18**HF starts to play:<br>\"The temperature in Munich is 25°C<br>and it s sunny.\"||**12** +BVRA: 1,1<br>**17** +BVRA: 1,2<br>**15** +BVRA: 1,4|**11** VRE is ready for input<br>**14** VRE processes the input<br>and is not able to collect<br>further input at that time<br>**16** VRE prompts the audio output<br>(\"The temperature in Munich is<br>25°C and it s sunny.\") via SCO<br>and is not able to collect further<br>input at that time|**11** VRE is ready for input<br>**14** VRE processes the input<br>and is not able to collect<br>further input at that time<br>**16** VRE prompts the audio output<br>(\"The temperature in Munich is<br>25°C and it s sunny.\") via SCO<br>and is not able to collect further<br>input at that time|\n|[AG initi|Durin|g an ongoing VR session, terminate audi|g an ongoing VR session, terminate audi|g an ongoing VR session, terminate audi|o output and prepare AG for new i|nput:|<br>|\n|[AG initi||**19** User wants to terminate audio<br>output and ask a new question<br>**24** User asks:<br>   \"How is the weather in Berlin?\"<br>**29** HF starts to play:<br>\"The temperature in Berlin is<br>20°C and it s cloudy.\"|**19** User wants to terminate audio<br>output and ask a new question<br>**24** User asks:<br>   \"How is the weather in Berlin?\"<br>**29** HF starts to play:<br>\"The temperature in Berlin is<br>20°C and it s cloudy.\"|**19** User wants to terminate audio<br>output and ask a new question<br>**24** User asks:<br>   \"How is the weather in Berlin?\"<br>**29** HF starts to play:<br>\"The temperature in Berlin is<br>20°C and it s cloudy.\"|**20**AT+BVRA=2<br>**21**OK (audio output via<br>SCO is terminated)<br>**23** +BVRA: 1,1<br>**26** +BVRA: 1,4<br>**28** +BVRA: 1,2|**20**AT+BVRA=2<br>**21**OK (audio output via<br>SCO is terminated)<br>**23** +BVRA: 1,1<br>**26** +BVRA: 1,4<br>**28** +BVRA: 1,2|**20**AT+BVRA=2<br>**21**OK (audio output via<br>SCO is terminated)<br>**23** +BVRA: 1,1<br>**26** +BVRA: 1,4<br>**28** +BVRA: 1,2|\n|[AG initi||**19** User wants to terminate audio<br>output and ask a new question<br>**24** User asks:<br>   \"How is the weather in Berlin?\"<br>**29** HF starts to play:<br>\"The temperature in Berlin is<br>20°C and it s cloudy.\"|**19** User wants to terminate audio<br>output and ask a new question<br>**24** User asks:<br>   \"How is the weather in Berlin?\"<br>**29** HF starts to play:<br>\"The temperature in Berlin is<br>20°C and it s cloudy.\"|**19** User wants to terminate audio<br>output and ask a new question<br>**24** User asks:<br>   \"How is the weather in Berlin?\"<br>**29** HF starts to play:<br>\"The temperature in Berlin is<br>20°C and it s cloudy.\"|**31** OK<br>**30** AT+BVRA=0<br>HF interrupts the audio prompt bec|ause|ause|\n|[AG initi||**19** User wants to terminate audio<br>output and ask a new question<br>**24** User asks:<br>   \"How is the weather in Berlin?\"<br>**29** HF starts to play:<br>\"The temperature in Berlin is<br>20°C and it s cloudy.\"|[Voice R|[Voice R|ecognition is disabled in the AG]<br>**32** +BVRA: 1,0|||\n\nVoice Recognition\nUser Hands Free Audio Gateway\n\nEngine\n\nBluetooth SIG Proprietary Page **66 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n##### **4.26 Enhanced Voice Recognition Activation with textual** **representation**\n\n##### **4.27 Attach a Phone Number for a Voice Tag**\n\nThis procedure is applicable to HFs supporting internal voice recognition functionality. It provides a\nmeans to read numbers from the AG for the purpose of creating a unique voice tag and storing the\nnumber and its linked voice tag in the HF’s memory. The HF may then use its internal Voice Recognition\nto dial the linked phone numbers when a voice tag is recognized by using the procedure “Place a call with\nthe phone number supplied by the HF” described in Section 4.18.\n\nUpon an internal event or user action, the HF may request a phone number from the AG by issuing the\nAT+BINP=1 command. Depending on the current status of the AG, it may either accept or reject this\nrequest.\n\nIf the AG accepts the request, it shall obtain a phone number and send the phone number back to the HF\nby issuing the +BINP response.\n\nIf the AG rejects the request from the HF, it shall issue the ERROR result code to indicate this\ncircumstance to the HF.\n\nBluetooth SIG Proprietary Page **67 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nWhen this procedure is executed multiple times (to retrieve multiple AG phone numbers to be linked to\nvoice tags), it is the responsibility of the AG to provide the next phone number to be passed to the HF\neach time the procedure is executed.\n\nSee Section 5 for more information on the AT+BINP command and the +BINP response.\n\nAs a precondition for this procedure, an ongoing Service Level Connection between the AG and the HF\nshall exist. If this connection does not exist, the HF shall autonomously establish the Service Level\nConnection using the proper procedure as described in Section 4.2.\n\n|HF|Col2|AG|Col4|\n|---|---|---|---|\n|l event<br>  action|l event<br>  action|l event<br>  action|AG obtain<br>phone num<br>ERROR if th<br>is rejected|\n|l event<br>  action|Established Service Level Connection|Established Service Level Connection|Established Service Level Connection|\n|l event<br>  action|AT+BINP=1 <br>OK<br>               ERROR <br>                  +BINP: <Phone number>|AT+BINP=1 <br>OK<br>               ERROR <br>                  +BINP: <Phone number>|AT+BINP=1 <br>OK<br>               ERROR <br>                  +BINP: <Phone number>|\n\n##### **4.28 Transmit DTMF Codes**\n\nDuring an ongoing call, the HF transmits the AT+VTS command to instruct the AG to transmit a specific\nDTMF code to its network connection.\n\nSee Section 5 for more information on the AT+VTS command.\n\nThe following preconditions apply for this procedure:\n\n- An ongoing Service Level Connection between the AG and the HF shall exist. If this connection does\nnot exist, the HF shall autonomously establish the Service Level Connection using the proper\nprocedure as described in Section 4.2.\n\n- An ongoing call in the AG exists.\n\nBluetooth SIG Proprietary Page **68 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n|HF AG<br>Established Service Level Connection<br>User initiated action:<br>The user pushes a key Ong<br>AT+VTS=…<br>OK The AG g<br>code tow|Col2|AG|Col4|\n|---|---|---|---|\n|HF <br>AG <br>AT+VTS=… <br>User initiated action:<br>The user pushes a key<br>OK<br>The AG g<br>code tow<br>Ong<br>Established Service Level Connection|HF <br>AG <br>AT+VTS=… <br>User initiated action:<br>The user pushes a key<br>OK<br>The AG g<br>code tow<br>Ong<br>Established Service Level Connection|AG|The AG g<br>code tow<br>Ong|\n|HF <br>AG <br>AT+VTS=… <br>User initiated action:<br>The user pushes a key<br>OK<br>The AG g<br>code tow<br>Ong<br>Established Service Level Connection|Established Service Level Connection|Established Service Level Connection|Established Service Level Connection|\n|HF <br>AG <br>AT+VTS=… <br>User initiated action:<br>The user pushes a key<br>OK<br>The AG g<br>code tow<br>Ong<br>Established Service Level Connection|AT+VTS=… <br>OK|AT+VTS=… <br>OK|AT+VTS=… <br>OK|\n\n##### **4.29 Remote Audio Volume Control**"
    },
    {
        "section_number": "4.29.1",
        "section_title": "Audio Volume Control",
        "granularity_level": 3,
        "content": "This procedure enables the user to modify the speaker volume and microphone gain of the HF from the\nAG.\n\nThe AG may control the gain of the microphone and speaker of the HF by sending the unsolicited result\ncodes +VGM and +VGS respectively. There is no limit in the amount and order of result codes.\n\nIf the remote audio volume control feature is supported in the HF device, it shall support at least remote\ncontrol of the speaker volume.\n\nAs a precondition for this procedure, an ongoing Service Level Connection between the AG and the HF\nshall exist. If this connection does not exist, the AG shall autonomously establish the Service Level\nConnection using the proper procedure as described in Section 4.2.\n\nAn audio connection is not a necessary precondition for this feature.\n\n|HF|Col2|\n|---|---|\n|es its<br> ain<br>  s its<br> me|es its<br> ain<br>  s its<br> me|\n|es its<br> ain<br>  s its<br> me|Established Service Level Connection|\n|es its<br> ain<br>  s its<br> me|+VGM: 12 <br>+VGS: 5|\n\nBluetooth SIG Proprietary Page **69 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nBoth the speaker and microphone gains are represented as parameter to the +VGS and +VGM, on a\nscale from 0 to 15. The values are absolute values, and relate to a particular (implementation dependent)\nvolume level controlled by the HF.\n\nSee Section 5 for more information on these commands and unsolicited result codes."
    },
    {
        "section_number": "4.29.2",
        "section_title": "Volume Level Synchronization",
        "granularity_level": 3,
        "content": "This procedure allows the HF to inform the AG of the current gain settings corresponding to the HF’s\nspeaker volume and microphone gain.\n\nOn Service Level Connection establishment, the HF shall always inform the AG of its current gain settings\nby using the AT commands AT+VGS and AT+VGM.\n\nIf local means are implemented on the HF to control the gain settings, the HF shall also use the AT\ncommands AT+VGS and AT+VGM to permanently update the AG of changes in these gain settings.\n\nIn all cases, the gain settings shall be kept stored, at both sides, for the duration of the current Service\nLevel Connection. Moreover, if the Service Level Connection is released as a consequence of an HF\ninitiated “Audio Connection transfer towards the AG” as stated in Section 4.17, the HF shall also keep the\ngain settings and re-store them when the Service Level Connection is re-established.\n\nThe HF shall support speaker gain synchronization when it supports remote speaker gain control.\n\nThe HF shall support microphone gain synchronization when it supports remote microphone gain control.\n\nAs a precondition for this procedure, an ongoing Service Level Connection between the AG and the HF\nshall exist. If this connection does not exist, the HF shall autonomously establish the Service Level\nConnection using the proper procedure as described in Section 4.2.\n\nBluetooth SIG Proprietary Page **70 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nSee Section 5 for more information on these commands and unsolicited result codes.\n\nBluetooth SIG Proprietary Page **71 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n##### **4.30 Response and Hold**\n\nThis procedure allows the user to put an incoming call on hold and then accept or reject the call from the\nHF or AG. This feature is specific to the limited markets where PDC and CDMA networks support this\nfunction."
    },
    {
        "section_number": "4.30.1",
        "section_title": "Query Response and Hold Status",
        "granularity_level": 3,
        "content": "The HF shall execute this procedure to query the status of the “Response and Hold” state of the AG.\n\nthe AG\n\n|HF|Col2|AG|Col4|\n|---|---|---|---|\n|urrent<br>  tus of|urrent<br>  tus of|urrent<br>  tus of|The A<br>current R<br>statu|\n|urrent<br>  tus of|Established Service Level Connection|Established Service Level Connection|Established Service Level Connection|\n|urrent<br>  tus of|+BTRH: 0<br>AT+BTRH?<br>OK|+BTRH: 0<br>AT+BTRH?<br>OK|+BTRH: 0<br>AT+BTRH?<br>OK|\n\n- The HF shall issue AT+BTRH? command to query the current “Response and Hold” state of the AG.\n\n- If the AG is currently in any of the Response and Hold states, then the AG shall send a +BTRH:\nResponse with the parameter set to 0. If the AG is not in the Response and Hold states, then no\nresponse shall be sent.\n\n- The AG shall send OK response to signal completion of the AT+BTRH? command.\n\nBluetooth SIG Proprietary Page **72 of 143**\n\n**Hands-Free Profile /** Profile Specification"
    },
    {
        "section_number": "4.30.2",
        "section_title": "Put an Incoming Call on Hold from HF",
        "granularity_level": 3,
        "content": "- As a precondition to this procedure, the AG shall not have an active call or a call on hold.\n\n- The AG shall send a sequence of unsolicited RING alerts to the HF. The RING alert shall be repeated\nuntil the HF accepts the incoming call or until the incoming call is interrupted for any reason.\n\nBluetooth SIG Proprietary Page **73 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n- If the HF has enabled the Calling Line Identification [CLI], the AG shall send a +CLIP Response to\nHF.\n\n- The user may put the incoming voice call on hold by using the proper means provided by the HF. The\nHF shall then send the AT+BTRH command with the parameter <n> set to 0. The AG shall then begin\nthe procedure for putting the incoming call on hold.\n\n- The AG shall send +BTRH Response with the parameter set to 0 as soon as the incoming call is put\non hold.\n\n- The +CIEV: (callheld = 2) message shall not be sent when a call is held via the AT+BTRH=0\nmessage.\n\n- The AG shall send the +CIEV Response with the call status set to 1.\n\n- The AG shall send the +CIEV Response with the callsetup status set to 0."
    },
    {
        "section_number": "4.30.3",
        "section_title": "Put an Incoming Call on Hold from AG",
        "granularity_level": 3,
        "content": "As a precondition to this procedure, the AG shall not have an active call or a call on hold.\n\n- The AG shall send a sequence of unsolicited RING alerts to the HF. The RING alert shall be repeated\nuntil the HF accepts the incoming call or until the incoming call is interrupted for any reason.\n\nBluetooth SIG Proprietary Page **74 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n- If the HF has enabled the Calling Line Identification [CLI], the AG shall send a +CLIP Response to the\nHF.\n\n- The user may put the incoming voice call on hold by using the proper means provided by the AG unit.\nThe AG shall then send +BTRH Response with the parameter <n> set to 0 to indicate that the\nincoming call is on hold.\n\n- The +CIEV: (callheld = 2) message shall NOT be sent by the audio gateway when it holds a call via\nthe response and hold method.\n\n- Depending on whether in-band ringing is enabled or disabled, there may or may not be a\nsynchronous connection established between the HF and AG. The synchronous connection state\n(enabled or disabled) shall not be changed when an incoming call is placed on hold.\n\n- The AG shall send the +CIEV Response with the call status set to 1.\n\n- The AG shall send the +CIEV Response with the callsetup status set to 0."
    },
    {
        "section_number": "4.30.4",
        "section_title": "Accept a Held Incoming Call from HF",
        "granularity_level": 3,
        "content": "The following additional precondition applies to this procedure:\n\n- An incoming call was put on hold.\n\n- The user may accept the incoming voice call on hold by using the proper means provided by the HF.\nThe HF shall then send the AT+BTRH command with the parameter <n> set to 1. The AG shall then\nbegin the procedure for accepting the incoming call that was put on hold.\n\nBluetooth SIG Proprietary Page **75 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n- The AG shall then send +BTRH Response with the parameter <n> set to 1 to notify HF that the held\nincoming call was accepted.\n\n- The AG shall start the procedure for establishing the audio connection and route the audio paths to\nthe HF only if the audio connection was not established."
    },
    {
        "section_number": "4.30.5",
        "section_title": "Accept a Held Incoming Call from AG",
        "granularity_level": 3,
        "content": "The following additional precondition applies to this procedure:\n\n- An incoming call was put on hold.\n\n- The user may accept the incoming voice call on hold by using the proper means provided by the AG\nunit. The AG shall then send +BTRH Response with the parameter <n> set to 1 to notify the HF that\nthe held incoming call was accepted."
    },
    {
        "section_number": "4.30.6",
        "section_title": "Reject a Held Incoming Call from HF",
        "granularity_level": 3,
        "content": "The following additional precondition applies to this procedure:\n\n- An incoming call was put on hold.\n\nBluetooth SIG Proprietary Page **76 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n|HF AG<br>Established Service Level Connection<br>Incoming call is on hold<br>Internal event or user requested:<br>Reject held incoming call<br>AT+BTRH=2<br>The AG reje<br>+BTRH: 2 incomi<br>OK<br>+CIEV: (Call=0)<br>No Call|Col2|AG|Col4|\n|---|---|---|---|\n|HF<br>AG<br>AT+BTRH=2 <br>Internal event or user requested:<br>Reject held incoming call<br>The AG reje<br>incomi<br>OK<br>     Incoming call is on hold<br>+BTRH: 2<br>+CIEV: (Call=0)<br>No Call<br>Established Service Level Connection|HF<br>AG<br>AT+BTRH=2 <br>Internal event or user requested:<br>Reject held incoming call<br>The AG reje<br>incomi<br>OK<br>     Incoming call is on hold<br>+BTRH: 2<br>+CIEV: (Call=0)<br>No Call<br>Established Service Level Connection|AG|The AG reje<br>incomi|\n|HF<br>AG<br>AT+BTRH=2 <br>Internal event or user requested:<br>Reject held incoming call<br>The AG reje<br>incomi<br>OK<br>     Incoming call is on hold<br>+BTRH: 2<br>+CIEV: (Call=0)<br>No Call<br>Established Service Level Connection|Established Service Level Connection|Established Service Level Connection|Established Service Level Connection|\n|HF<br>AG<br>AT+BTRH=2 <br>Internal event or user requested:<br>Reject held incoming call<br>The AG reje<br>incomi<br>OK<br>     Incoming call is on hold<br>+BTRH: 2<br>+CIEV: (Call=0)<br>No Call<br>Established Service Level Connection||||\n|HF<br>AG<br>AT+BTRH=2 <br>Internal event or user requested:<br>Reject held incoming call<br>The AG reje<br>incomi<br>OK<br>     Incoming call is on hold<br>+BTRH: 2<br>+CIEV: (Call=0)<br>No Call<br>Established Service Level Connection|Incoming call is on hold|Incoming call is on hold|Incoming call is on hold|\n|HF<br>AG<br>AT+BTRH=2 <br>Internal event or user requested:<br>Reject held incoming call<br>The AG reje<br>incomi<br>OK<br>     Incoming call is on hold<br>+BTRH: 2<br>+CIEV: (Call=0)<br>No Call<br>Established Service Level Connection|AT+BTRH=2 <br>OK<br>+BTRH: 2<br>+CIEV: (Call=0)|AT+BTRH=2 <br>OK<br>+BTRH: 2<br>+CIEV: (Call=0)|AT+BTRH=2 <br>OK<br>+BTRH: 2<br>+CIEV: (Call=0)|\n\n- The user may reject the incoming voice call on hold by using the proper means provided by the HF.\nEither of the following two sequences shall be permissible by the HF and AG:\n\n   - The HF may send the AT+BTRH command with the parameter <n> set to 2. The AG shall then\nbegin the procedure for rejecting the incoming call that was put on hold. The AG shall send\n+BTRH Response with the parameter <n> set to 2 to notify the HF that the held incoming call was\nrejected.\n\n   - The HF may send the AT+CHUP command to reject the held incoming call. The AG shall reject\nthe held call and send the OK indication to the HF.\n\n- The AG shall send the +CIEV Response with the call status set to 0."
    },
    {
        "section_number": "4.30.7",
        "section_title": "Reject a Held Incoming Call from AG",
        "granularity_level": 3,
        "content": "The following additional precondition applies to this procedure:\n\n- An incoming call was put on hold.\n\nBluetooth SIG Proprietary Page **77 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nThe user may reject the incoming voice call on hold by using the proper means provided by the AG unit.\nThe AG shall then send +BTRH Response with the parameter <n> set to 2 to notify HF that the held\nincoming call was rejected.\n\n- The AG shall also send the +CIEV Response with the call status parameter set to 0 to indicate that\nthe AG is currently not in a call."
    },
    {
        "section_number": "4.30.8",
        "section_title": "Held Incoming Call Terminated by Caller",
        "granularity_level": 3,
        "content": "The following additional precondition applies to this procedure:\n\n- An incoming call was put on hold.\n\nBluetooth SIG Proprietary Page **78 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n- The caller may terminate the held incoming call. The AG shall then send +BTRH Response with the\nparameter <n> set to 2 to notify the HF that the held incoming call was terminated.\n\n- The AG shall send the +CIEV Response with the Call status parameter set to 0 to indicate that the\nAG is currently not in a call.\n\n##### **4.31 Subscriber Number Information**\n\nThis procedure allows HF to query the AG subscriber number.\n\nInformation\n\n|HF|Col2|AG|Col4|\n|---|---|---|---|\n|to get<br> mber|to get<br> mber|to get<br> mber|AG send<br>Number|\n|to get<br> mber|Established Service Level Connection|Established Service Level Connection|Established Service Level Connection|\n|to get<br> mber|AT+CNUM<br>+CNUM:,<number>,<type>[,, <service>]<br>OK<br>        +CNUM:,<number>,<type>[,, <service>]<br>**       . . .**|AT+CNUM<br>+CNUM:,<number>,<type>[,, <service>]<br>OK<br>        +CNUM:,<number>,<type>[,, <service>]<br>**       . . .**|AT+CNUM<br>+CNUM:,<number>,<type>[,, <service>]<br>OK<br>        +CNUM:,<number>,<type>[,, <service>]<br>**       . . .**|\n\nThis procedure illustrates AG response to the query of an empty subscriber number.\n\nInformation\n\n|HF|Col2|AG|Col4|\n|---|---|---|---|\n|to get<br>  mber|to get<br>  mber|to get<br>  mber||\n|to get<br>  mber|Established Service Level Connection|Established Service Level Connection|Established Service Level Connection|\n|to get<br>  mber|AT+CNUM<br>OK|AT+CNUM<br>OK|AT+CNUM<br>OK|\n\nBluetooth SIG Proprietary Page **79 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nThe following precondition applies for this procedure:\n\n- An ongoing Service Level Connection between the HF and AG shall exist. If this connection does not\nexist, the HF shall establish a connection using the “Service Level Connection set up” procedure\ndescribed in Section 4.2.\n\n- The HF shall send the AT+CNUM command to query the AG subscriber number information.\n\n- If the subscriber number information is available, the AG shall respond with the +CNUM response. If\nmultiple numbers are available, the AG shall send a separate +CNUM response for each available\nnumber.\n\n- The AG shall signal the completion of the AT+CNUM action command with an OK response. The OK\nwill follow zero or more occurrences of the +CNUM response. (See Figure 4.57 and Figure 4.58).\n\n##### **4.32 Enhanced Call Status Mechanisms**"
    },
    {
        "section_number": "4.32.1",
        "section_title": "Query List of Current Calls in AG",
        "granularity_level": 3,
        "content": "The HF shall execute this procedure to query the list of current calls in AG.\n\nThe following precondition applies for this procedure:\n\n- A Service Level Connection exists between the AG and HF devices. If no current Service Level\nConnection exists, the HF shall first initiate one.\n\n- HF shall find out the list of current calls in AG by sending the AT+CLCC command.\n\n- If the command succeeds and if there is an outgoing (Mobile Originated) or an incoming (Mobile\nTerminated) call in AG, AG shall send a +CLCC response with appropriate parameters filled in to HF.\n\n- If there are no calls available, no +CLCC response is sent to HF.\n\n- The AG shall always send OK response to HF.\n\nBluetooth SIG Proprietary Page **80 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n##### **4.33 Enhanced Call Control Mechanisms**\n\nAs stated earlier, the Enhanced Call Control mechanism is simply an extension of the current AT+CHLD\ncommand. These extensions are defined as additional arguments to the AT+CHLD command. The new\narguments for this command include an index of a specific call as indicated in the +CLCC response."
    },
    {
        "section_number": "4.33.1",
        "section_title": "Release Specified Call Index",
        "granularity_level": 3,
        "content": "The HF shall execute this procedure to release a specific call in the AG.\n\nThe following precondition applies for this procedure:\n\n- A Service Level Connection exists between the AG and HF devices. If no current Service Level\nConnection exists, the HF shall first initiate one.\n\nstatus.\n\n- The HF shall send the AT+CHLD=1<idx> command to release a specific active call.\n\n- The AG shall release the specified call.\n\nIf there is a change in the call status, the AG shall report the change in call status. If there is a change in\nthe held call status, the AG shall report the change in call held status.\n\nIf the index (<idx>) is not valid, the AG shall report the proper error code."
    },
    {
        "section_number": "4.33.2",
        "section_title": "Private Consultation Mode",
        "granularity_level": 3,
        "content": "The HF shall execute this procedure to place all parties of a multiparty call on hold with the exception of\nthe specified call.\n\nThe following precondition applies for this procedure:\n\n- A Service Level Connection exists between the AG and HF devices. If no current Service Level\nConnection exists, the HF shall first initiate one.\n\n- Existing multiparty call is active in AG.\n\nBluetooth SIG Proprietary Page **81 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nprivate\n\nmode.\n\n- HF shall send the AT+CHLD=2<idx> command to request private consultation mode.\n\n- AG shall place all other parties of call on hold.\n\n- AG shall report the change in status of the held parties.\n\n- If the index (<idx>) is not valid, the AG shall respond with the proper error code.\n\n##### **4.34 Indicators Activation and Deactivation**\n\nThe HF shall execute this procedure to change the subset of indicators that shall be sent by the AG.\n\nThe following preconditions apply for this procedure:\n\nAn ongoing Service Level Connection between the AG and the HF shall exist. If this connection does not\nexist, the HF shall autonomously establish the Service Level Connection using the proper procedure as\ndescribed in Section 4.2.\n\nBluetooth SIG Proprietary Page **82 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nFigure 4.65 does not imply a mandatory order for CIND fields, nor does it imply a mandatory set of CIND\nindicator fields.\n\nThe HF shall issue the AT+BIA command if it needs to change the activated/deactivated status of\nindicators in the AG.\n\nThe AG shall send the OK result code to the HF after processing a correctly formatted command.\n\nThe AG shall send the ERROR result code to the HF if the command is incorrectly formatted.\n\nFollowing the successful processing of an AT+BIA command, the AG shall not send the indicators that\nare deactivated.\n\nThe AG shall send the activated indicators response only if the event reporting is enabled.\n\nThe effect of the AT+BIA command shall persist during the current Service Level Connection only. When\nan Service Level Connection is terminated and a new Service Level Connection is established all\nindicators are activated by default.\n\nIt is valid to send the AT+BIA command while the event reporting is disabled. If the event reporting is\nenabled before the Service Level Connection is terminated, the AG shall send only the indicators that\nwere activated by the most recently processed AT+BIA command.\n\nIf the event reporting (CMER) is disabled and then re-enabled, the AG shall send only the indicators that\nwere activated by the most recently processed AT+BIA command, or all indicators in the case where no\nAT+BIA was sent by the HF.\n\nThe AT+BIA command has no impact on the response to the “AT+CIND?” read command (see Section\n5.2).\n\nA restriction to the AT+BIA command applies to the indicators call, call status and held call. The AG shall\nalways consider these indicators activated, even if the HF requests their deactivation.\n\nIt is mandatory for the AG to support the AT+BIA command.\n\nIt is optional for the HF to support the AT+BIA command.\n\nBluetooth SIG Proprietary Page **83 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nIt is optional for HF device to use the AT+BIA command.\n\nSee Section 5.2 for more information on the AT+CMER (event reporting) command.\n\n##### **4.35 HF Indicators**\n\nThe HF Indicator feature is used to allow a Hands-Free device to notify the values of certain HF indicators\nto an Audio Gateway. The HF may share information such as Battery Level or Enhanced Driver Safety\non/off using this feature.\n\nAs described in Section 4.2.1, the devices shall determine if the HF Indicators feature is supported by\nverifying the remote’s BRSF bits."
    },
    {
        "section_number": "4.35.1",
        "section_title": "Transfer of HF Supported HF Indicators",
        "granularity_level": 3,
        "content": "During Service Level Connection Establishment procedure (see Section 4.2.1), the HF shall send to the\nAG a list of supported HF indicators. These shall be represented using the appropriate 16-bit assigned\nnumber for each as apportioned within the Assigned Numbers [8] web page on\n[https://www.bluetooth.com/specifications/assigned-numbers/. The HF shall not send any assigned](https://www.bluetooth.com/specifications/assigned-numbers/)\nnumbers that have not been defined by the Bluetooth SIG.\n\n|HF AG<br>Service Level Connection Establishment<br>AT+BIND=anum1,anum2,…<br>OK|Col2|AG|Col4|\n|---|---|---|---|\n|Service Level Connection Establishment<br> <br> <br>OK<br> <br>AG<br>HF<br>AT+BIND=anum1,anum2,…|Service Level Connection Establishment<br> <br> <br>OK<br> <br>AG<br>HF<br>AT+BIND=anum1,anum2,…|AG||\n|Service Level Connection Establishment<br> <br> <br>OK<br> <br>AG<br>HF<br>AT+BIND=anum1,anum2,…|Service Level Connection Establishment<br> <br>OK<br> <br>AT+BIND=anum1,anum2,…|Service Level Connection Establishment<br> <br>OK<br> <br>AT+BIND=anum1,anum2,…|Service Level Connection Establishment<br> <br>OK<br> <br>AT+BIND=anum1,anum2,…|"
    },
    {
        "section_number": "4.35.2",
        "section_title": "Transfer of the AG Supported HF Indicators",
        "granularity_level": 3,
        "content": "Once the HF has sent its list of supported HF indicators, it shall determine which indicators are supported\nby the AG. The HF shall send the AT+BIND=? command to the AG. The AG shall respond with +BIND\nindicating which HF indicator(s) are supported by the AG.\n\n|HF|Col2|AG|Col4|\n|---|---|---|---|\n|||||\n||Service Level Connection Establishment<br> <br> <br>+BIND:(anum1,anum2,…)<br>AT+BIND=?<br>OK|Service Level Connection Establishment<br> <br> <br>+BIND:(anum1,anum2,…)<br>AT+BIND=?<br>OK|Service Level Connection Establishment<br> <br> <br>+BIND:(anum1,anum2,…)<br>AT+BIND=?<br>OK|\n\nBluetooth SIG Proprietary Page **84 of 143**\n\n**Hands-Free Profile /** Profile Specification"
    },
    {
        "section_number": "4.35.3",
        "section_title": "Transfer of Enabled HF Indicators from the AG to the HF",
        "granularity_level": 3,
        "content": "Once the HF has determined which HF Indicators are supported by the AG as described in Section\n4.35.2, the HF shall determine which HF Indicators the AG is enabling to receive by sending the\nAT+BIND? command. The AG shall then send one or more +BIND: anum,state response with the\nassigned number and state (0= disabled/1= enabled) of each supported HF indicator followed by an OK."
    },
    {
        "section_number": "4.35.4",
        "section_title": "Activation / Deactivation of the AG’s supported HF Indicators",
        "granularity_level": 3,
        "content": "The AG may change the enabled/disabled state of any of the HF Indicators supported by the HF. To\nchange the state, the AG shall send an unsolicited +BIND: anum,state response code. Whenever the HF\nreceives an unsolicited +BIND indication from the AG that changes the state of a particular HF indicator\nfrom disabled to enabled, the HF should send the current state of that indicator to the AG using the +BIEV\ncommand (see Section 4.35.5). This synchronizes the states of the HF indicators across the devices.\n\n+BIND:anum1,1 or 0\n\n|HF|Col2|\n|---|---|\n|||\n\n|AG|Col2|\n|---|---|\n|||"
    },
    {
        "section_number": "4.35.5",
        "section_title": "Transfer of HF Indicator Values",
        "granularity_level": 3,
        "content": "When situational conditions change within the HF, the HF shall notify the AG of the change in value using\nthe AT+BIEV=anum, value command. The AG shall then acknowledge the receipt of the value updates\nwith an OK. If the AG does not support the indicator being reported by the HF or if it is disabled, the AG\nshall return an ERROR response code.\n\nThe assigned number and their associated values are defined by the Bluetooth SIG within the Assigned\nNumbers [8] web page.\n\nBluetooth SIG Proprietary Page **85 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n|HF|Col2|AG|Col4|\n|---|---|---|---|\n|al<br>|al<br>|al<br>||\n|al<br>|Established Service Level Connection|Established Service Level Connection|Established Service Level Connection|\n|al<br>|AT+BIEV=anum,value_of_indicator<br>OK|AT+BIEV=anum,value_of_indicator<br>OK|AT+BIEV=anum,value_of_indicator<br>OK|\n\nThe HF should only provide HF Indicator value updates for those that have been set as enabled by the\nAG. The AG shall respond with an ERROR response code if it receives updates for disabled or unknown\nHF indicators or values that are out of bounds.\n\nBluetooth SIG Proprietary Page **86 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n## **5 AT Command and Results Codes**\n\n##### **5.1 General**\n\nFor the exchange of the commands and unsolicited results codes, the format, syntax and procedures of\n3GPP 27.007 [2] shall be taken as reference. The following rules specifically apply for the HFP\nspecification:\n\n- Only one command (or unsolicited result code) per command line needs to be expected.\n\n- The AG, by default, shall not echo the command characters.\n\n- The AG shall always transmit result codes using verbose format.\n\n- The characters below shall be used for AT commands and result codes formatting:\n\n**<cr>** corresponds to the _carriage return (0/13)_ as stated in [5].\n\n**<lf>** corresponds to the _line feed (0/10)_ as stated in [5].\n\n- The format of an AT command from the HF to the AG shall be:\n\n<AT command><cr>\n\n- The format of the OK code from the AG to the HF shall be:\n\n<cr><lf>OK<cr><lf>\n\n- The format of the generic ERROR code from the AG to the HF shall be:\n\n<cr><lf>ERROR<cr><lf>\n\n- The format of an unsolicited result code from the AG to the HF shall be:\n\n<cr><lf><result code><cr><lf>\n\nThe Hands-Free Profile uses a subset of AT commands and result codes from existing standards; these\nare listed in Section 5.2. Section 5.3 lists the new Bluetooth defined AT commands and result codes not\nre-used from any existing standard.\n\nIn general, the AG shall use the OK code, as described in Section 5.2, for acknowledgement of the proper\nexecution of a command and respond with the proper error indication to any unknown command received\nfrom the HF.\n\nIt is mandatory for the AG to properly respond to any error condition and for the HF to properly process\nthe corresponding error indication code received from the AG. The code ERROR, as described in Section\n5.2, shall be used as error indication for this purpose.\n\nThe HF shall always ignore any unknown or unexpected indication code received from the AG for AT\ncommands defined in this specification. Handling of AT commands not defined in this specification is left\nto the implementation. The only exception is the case in which the AG issues a “Mobile Equipment Error”\nindication using the +CME ERROR: result code (see [2]). In this case, the HF shall interpret this result\ncode in the same way as if it was a generic ERROR code.\n\nAs a general rule, when an AT command or result code of this specification is implemented, support for\nthe associated parameters described in this specification, and all their corresponding possible values,\nshall be considered mandatory unless otherwise explicitly stated in each particular case.\n\nBluetooth SIG Proprietary Page **87 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n##### **5.2 AT Capabilities Re-Used from GSM 07.07 and 3GPP 27.007**\n\nThe re-used AT commands and unsolicited result codes for implementing the functionality described in\nthis specification are listed below:\n\n- ATA\n\nStandard call answer AT command. See Annex G in [2].\n\n- ATDdd…dd;\n\nStandard AT command intended for placing a call to a phone number. Only voice calls are covered in\n\nthis specification. See Section 6.2 in [2].\n\n- ATD>nnn...;\n\nExtension of the standard ATD command, intended for memory dialing. Only voice calls are covered\nin this specification. See Section 6.3 in [2].\n\n- ERROR\n\nStandard error indication code. It shall be issued on detection of any syntax, format or procedure\nerror condition. The “Mobile Equipment Error” report code “+CME ERROR:” is covered below. See\nAnnex B in [2].\n\n- OK\n\nStandard acknowledgement to the execution of a command. See Annex B in [2].\n\n- NO CARRIER, BUSY, NO ANSWER, DELAYED, REMOVED FROM THE NETWORK\n\nExtended response indication codes for AT commands. These codes shall be issued from the AG to\nthe HF as responses to AT commands from the HF to the AG or from the AG as unsolicited result\ncodes. These are in addition to the +CME ERROR: responses.\n\n- RING\n\nStandard “incoming call” indication. See Annex B in [2].\n\n- AT+CCWA\n\nStandard “Call Waiting notification” AT command. Within the\nAT+CCWA=[<n>[,<mode>[,<class>]]]command, only enabling/disabling of the Call Waiting\nnotification unsolicited result code +CCWA, using the <n> parameter, is covered in this specification.\nSee Section 7.12 in [2].\n\n- +CCWA\n\nStandard “Call Waiting notification” unsolicited result code.\n\nIn the +CCWA result code only <number> and <type> parameters are covered in this specification.\nOther parameters are not considered relevant in this specification and shall be ignored by the HF.\n\nThe <number> parameter shall be a text string and shall always be contained within double-quotes.\n\nThe <type> field specifies the format of the phone number provided, and can be one of the following\nvalues:\n\nBluetooth SIG Proprietary Page **88 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nvalues 128-143: The phone number format may be a national or international format, and may\ncontain prefix and/or escape digits. No changes on the number presentation are required.\n\nvalues 144-159: The phone number format is an international number, including the country code\nprefix. If the plus sign (\"+\") is not included as part of the number and shall be added by the AG as\nneeded.\n\nvalues 160-175: National number. No prefix nor escape digits included.\n\nSee Section 7.12 in [2].\n\n**AT+CHLD**\n\nStandard call hold and multiparty handling AT command. In the AT+CHLD=<n> command, this\nspecification only covers values for <n> of 0, 1, 1<idx>, 2, 2<idx>, 3 and 4, where:\n\n   - 0 = Releases all held calls or sets User Determined User Busy (UDUB) for a waiting call.\n\n   - 1 = Releases all active calls (if any exist) and accepts the other (held or waiting) call.\n\n   - 1<idx> = Releases call with specified index (<idx>).\n\n   - 2 = Places all active calls (if any exist) on hold and accepts the other (held or waiting) call.\n\n   - 2<idx> = Request private consultation mode with specified call (<idx>). (Place all calls on hold\nEXCEPT the call indicated by <idx>.)\n\n   - 3 = Adds a held call to the conversation.\n\n   - 4 = Connects the two calls and disconnects the subscriber from both calls (Explicit Call Transfer).\nSupport for this value and its associated functionality is optional for the HF.\n\n   - Where both a held and a waiting call exist, the above procedures shall apply to the waiting call\n(i.e., not to the held call) in conflicting situation.\n\nThe test command AT+CHLD=? may be used for retrieving information about the call hold and\nmultiparty services available in the AG (see Section 4.2.1).\n\nSee Section 7.13 in [2] and Section 4.5.5.1 in [6] for details.\n\n- AT+CHUP\n\nStandard hang-up AT command. Execution command causes the AG to terminate the currently active\ncall. This command shall have no impact on the state of a held call except in the use of rejecting a\ncall placed on hold by the Respond and Hold feature as defined in Section 4.30.6.\n\nSee Section 6.5 in [2].\n\nAT+CHUP is also used as the command to reject any incoming call prior to answer.\n\n- AT+CIND\n\nStandard indicator update AT command. Only read command AT+CIND? and test command\nAT+CIND=? are required in this specification.\n\nThe AT+CIND? read command is used to get current status of the AG indicators.\n\nThe AG shall return all the indicators listed in the AT+CIND=? command.\n\nBluetooth SIG Proprietary Page **89 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nThe deactivation of any indicator(s) using AT+BIA command shall have no effect on the AG’s\nresponse to the AT+CIND? read command.\n\nThe AT+CIND=? test command is used to retrieve the mapping between each indicator supported by\nthe AG and its corresponding range and order index. It shall be issued at least once before any other\ncommand related to these indicators (AT+CIND? or AT+CMER) is used.\n\nThe Hands Free Profile specification limits the number of indicators returned by the AG to a maximum\nof 20.\n\nThe following indicators are covered in this specification:\n\n   - service: Service availability indication, where:\n\n<value>=0 implies no service. No Home/Roam network available.\n\n<value>=1 implies presence of service. Home/Roam network available.\n\n   - call: Standard call status indicator, where:\n\n<value>=0 means there are no calls in progress\n\n<value>=1 means at least one call is in progress\n\n   - callsetup: Bluetooth proprietary call set up status indicator [4] . Support for this indicator is optional\nfor the HF. When supported, this indicator shall be used in conjunction with, and as an extension\nof the standard call indicator. Possible values are as follows:\n\n<value>=0 means not currently in call set up.\n\n<value>=1 means an incoming call process ongoing.\n\n<value>=2 means an outgoing call set up is ongoing.\n\n<value>=3 means remote party being alerted in an outgoing call.\n\nSee Section 8.9 in [2].\n\n   - callheld: Bluetooth proprietary call hold status indicator. Support for this indicator is mandatory for\nthe AG, optional for the HF. Possible values are as follows:\n\n0= No calls held\n\n1= Call is placed on hold or active/held calls swapped\n\n(The AG has both an active AND a held call)\n\n2= Call on hold, no active call\n\n   - signal: Signal Strength indicator, where:\n\n<value>= ranges from 0 to 5\n\n   - roam: Roaming status indicator, where:\n\n<value>=0 means roaming is not active\n\n4 This status indicator is not defined in the GSM 07.07 specification\n\nBluetooth SIG Proprietary Page **90 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n<value>=1 means a roaming is active\n\n   - battchg: Battery Charge indicator of AG, where:\n\n<value>=ranges from 0 to 5\n\n- +CIND\n\nStandard list of current phone indicators. See Section 8.9 in [2].\n\n- AT+CLCC\n\nStandard list current calls command. See Section 7.18 in [2].\n\n- +CLCC\n\nStandard list current calls result code. See Section 7.18 in [2].\n\nSupported parameters are as follows:\n\n   - idx= The numbering (starting with 1) of the call given by the sequence of setting up or receiving\nthe calls (active, held or waiting) as seen by the served subscriber. Calls hold their number until\nthey are released. New calls take the lowest available number.\n\n   - dir= 0 (outgoing), 1 (incoming)\n\n   - status=\n\n`o` 0 = Active\n\n`o` 1 = Held\n\n`o` 2 = Dialing (outgoing calls only)\n\n`o` 3 = Alerting (outgoing calls only)\n\n`o` 4 = Incoming (incoming calls only)\n\n`o` 5 = Waiting (incoming calls only)\n\n`o` 6 = Call held by Response and Hold\n\n   - mode= 0 (Voice), 1 (Data), 2 (FAX)\n\n   - mpty=\n\n`o` 0 - this call is NOT a member of a multi-party (conference) call\n\n`o` 1 - this call IS a member of a multi-party (conference) call\n\n   - number (optional) = The <number> parameter shall be a text string and shall always be contained\nwithin double quotes.\n\n   - type (optional) = The <type> parameter specifies the format of the phone number provided. The\n<type> field can be one of the following values:\n\n    - values 128 to 143: The phone number format may be a national or international format and may\ncontain prefix and/or escape digits. No changes to the number presentation are required.\n\n    - values 144 to 159: The phone number format is an international number format, including the\ncountry code prefix. If the plus sign (“+”) is not included as part of the number, the plus sign (“+”)\nshall be added by the AG as needed.\n\nBluetooth SIG Proprietary Page **91 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n    - values 160 to 175: The phone number format is a national number format. No prefix nor escape\ndigits are included.\n\nIf the <number> parameter is not provided, the <type> parameter shall be excluded.\n\n- **AT+COPS**\n\nThe AT+COPS=3,0 shall be sent by the HF to the AG prior to sending the AT+COPS? command.\nAT+COPS=3,0 sets the format of the network operator string to the long format alphanumeric.\n\nThe AT+COPS? command is used for reading network operator. This profile shall only support the\n\"reading\" of the name of the network operator. The response to this command from the AG shall\nreturn a +COPS:<mode>,<format>,<operator> where:\n\n<mode> contains the current mode and provides no information with regard to the name of the\noperator.\n\n<format> specifies the format of the <operator> parameter string, and shall always be 0 for this\nspecification.\n\n<operator> specifies a quoted string in alphanumeric format representing the name of the network\noperator. This string shall not exceed 16 characters. See Section 7.3 in [2].\n\n- AT+CMEE\n\nStandard AT command used to enable the use of result code +CME ERROR: <err> as an indication\nof an error relating to the functionality of the AG.\n\nThe set command AT+CMEE=1 is covered in this specification.\n\n- +CME ERROR\n\nThis is the Extended Audio Gateway Error Result Code response. Format of the response is: +CME\nERROR: <err>. The format of <err> shall be numeric in this specification. The possible values for\n<err> covered in this specification are described below. These error codes may be provided instead\nof the standard ERROR response code to provide additional information to the HF. The ERROR\nresponse code is still allowed while using the Extended Audio Gateway Error Result Codes.\n\n+CME ERROR: 0 – AG failure\n\n+CME ERROR: 1 – no connection to phone\n\n+CME ERROR: 3 – operation not allowed\n\n+CME ERROR: 4 – operation not supported\n\n+CME ERROR: 5 – PH-SIM PIN required\n\n+CME ERROR: 10 – SIM not inserted\n\n+CME ERROR: 11 – SIM PIN required\n\n+CME ERROR: 12 – SIM PUK required\n\n+CME ERROR: 13 – SIM failure\n\n+CME ERROR: 14 – SIM busy\n\nBluetooth SIG Proprietary Page **92 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n+CME ERROR: 16 – incorrect password\n\n+CME ERROR: 17 – SIM PIN2 required\n\n+CME ERROR: 18 – SIM PUK2 required\n\n+CME ERROR: 20 – memory full\n\n+CME ERROR: 21 – invalid index\n\n+CME ERROR: 23 – memory failure\n\n+CME ERROR: 24 – text string too long\n\n+CME ERROR: 25 – invalid characters in text string\n\n+CME ERROR: 26 – dial string too long\n\n+CME ERROR: 27 – invalid characters in dial string\n\n+CME ERROR: 30 – no network service\n\n+CME ERROR: 31 - network Timeout.\n\n+CME ERROR: 32 – network not allowed – Emergency calls only\n\n- AT+CLIP\n\nStandard “Calling Line Identification notification” activation AT command. It enables/disables the\nCalling Line Identification notification unsolicited result code +CLIP. See Section 7.6 in [2].\n\n- +CLIP\n\nStandard “Calling Line Identification notification” unsolicited result code.\n\nIn the +CLIP: <number>, type> [,<subaddr>,<satype> [,[<alpha>] [,<CLI validity>]]] result code. Only\n<number> and <type> parameters are covered in this specification. Other parameters are not\nconsidered relevant in this specification and shall be ignored by the HF.\n\nThe <number> parameter shall be a text string and shall always be contained within double-quotes.\n\nThe <type> field specifies the format of the phone number provided, and can be one of the following\nvalues:\n\n   - values 128-143: The phone number format may be a national or international format, and may\ncontain prefix and/or escape digits. No changes on the number presentation are required.\n\n   - values 144-159: The phone number format is an international number, including the country code\nprefix. If the plus sign (\"+\") is not included as part of the number and shall be added by the AG as\nneeded.\n\n   - values 160-175: National number. No prefix nor escape digits included.\n\n   - See Section 7.11 in [2].\n\n- AT+CMER\n\nStandard event reporting activation/deactivation AT command.\n\nBluetooth SIG Proprietary Page **93 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nIn the AT+CMER=[<mode>[,<keyp>[,<disp>[,<ind> [,<bfr>]]]]] command, only the <mode>, and <ind>\nparameters are relevant for this specification. Only their values <mode>=(3) and <ind>=(0,1) are\ncovered in this specification. See Section 8.10 in [2].\n\nThe following examples show how the AT+CMER command may be used for activating or\ndeactivating the “indicator events reporting” result code:\n\nAT+CMER=3,0,0,1 activates “indicator events reporting”.\n\nAT+CMER=3,0,0,0 deactivates “indicator events reporting”.\n\n- +CIEV\n\nStandard “indicator events reporting” unsolicited result code.\n\nIn the +CIEV: <ind>,<value> result code, only the indicators stated in the AT+CIND command above\nare relevant for this specification where:\n\n   - <ind>: Order index of the indicator within the list retrieved from the AG with the AT+CIND=?\ncommand. The first element of the list shall have <ind>=1.\n\n   - <value>: current status of the indicator.\n\nIf the HF receives any unknown indicator or value, it shall ignore it.\n\nSee Section 8.10 in [2].\n\n- AT+VTS\n\nStandard DTMF generation AT command. Only the AT+VTS=<DTMF> command format is covered in\nthis specification.\n\nSee Annex C.2.11 in [2].\n\n- AT+CNUM\n\n_Syntax:_\n\nAT+CNUM (Retrieve Subscriber Number Information)\n\nAT+CNUM=? (Test Subscriber Number Information – Not Implemented)\n_Description:_\n\nCommand issued by HF for the “Subscriber Number Information” feature in the AG.\n\nOnly the action command AT+CNUM format is used.\n\n- **+CNUM**\n\n_Syntax:_\n\n+CNUM: [<alpha>],<number>, <type>,[<speed>,<service>] (Response for AT+CNUM)\n\n_Description:_\n\nStandard Response used for sending the “Subscriber Number Information” from AG to HF.\n\nThe AG shall send the +CNUM: response for the AT+CNUM from the HF.\n\n_Values:_\n\n   - <alpha>: This optional field is not supported, and shall be left blank.\n\nBluetooth SIG Proprietary Page **94 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n   - <number>: Quoted string containing the phone number in the format specified by <type>.\n\n   - <type> field specifies the format of the phone number provided, and can be one of the following\nvalues:\n\n   - values 128-143: The phone number format may be a national or international format, and may\ncontain prefix and/or escape digits. No changes on the number presentation are required.\n\n   - values 144-159: The phone number format is an international number, including the country code\nprefix. If the plus sign (\"+\") is not included as part of the number and shall be added by the AG as\nneeded.\n\n   - values 160-175: National number. No prefix nor escape digits included.\n\n   - <speed>: This optional field is not supported, and shall be left blank.\n\n   - <service>: Indicates which service this phone number relates to. Shall be either 4 (voice) or 5\n(fax).\n\nExample:\n\n+CNUM:,\"5551212\",129,,4\n\nSee section 7.1 in [2].\n\n##### **5.3 Bluetooth Defined AT Capabilities**\n\nThe GSM 07.07 [2] format and syntax rules shall be taken as the reference for these commands.\n\nThe new Bluetooth specific AT capabilities are listed below:\n\n- **AT+BIA** (Bluetooth Indicators Activation)\n\n_Syntax_ : AT+BIA=[[<indrep 1>][,[<indrep 2>][,…[,[<indrep n>]]]]]]\n\n_Description_ :\n\nActivates or deactivates the indicators individually. The mapping of the indicators is given by the\n“AT+CIND=?” test command (see Section 5.2).\n\n< _indrep x_ >: reporting state of the indicator x. 1 to activate, 0 to deactivate.\n\nIf an indicator state is omitted between commas, the current reporting state of that indicator shall\nnot change. For example, if the HF sends the command “AT+BIA=,1,,0” only the second and\nfourth indicators may be affected. The reporting state of indicators one and three shall remain\nunchanged.\n\nIf the AG supports more indicators than the number of indicator-reporting-states provided by the\nHF, the AG shall maintain the current reporting states of those indicators. For example, if the AG\nsupports five indicators and the HF sends the command “AT+BIA=1,0,1“ then only the first three\nAG indicators may be affected by the command.\n\nCall, Call Setup, and Held Call indicators have been defined as mandatory indicators. This\nimplies that whatever the reporting state the HF gives, these indicators shall always been kept\nactivated by the AG.\n\nThe AG shall gracefully ignore any excess parameter(s) at the end.\n\nThe AG shall silently ignore a request to deactivate a mandatory indicator.\n\nBluetooth SIG Proprietary Page **95 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nThe previous three points allow the HF to activate or deactivate all the indicators, except the\nmandatory ones, by using a fixed string.\n\nFor example, if the maximum indicator count is 20:\n\nAll indicators can be set to active by using the fixed string:\n\nAT+BIA=1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1\n\nand to inactive (except for the always active ones) by using:\n\nAT+BIA=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0\n\nThe actual number of allowed indicators is defined by the AT+CIND command.\n\n- **AT+BINP (Bluetooth INPut)**\n\n_Syntax:_ AT+BINP=<datarequest>\n\n_Expected response:_ +BINP: <dataresp1>…<datarespn>\n\n_Description:_\n\nCommand used for requesting some specific data input from the AG [5] . On reception of this\ncommand the AG shall perform the proper actions such that the requested information is sent\nback to the HF using the +BINP response.\n\nThe type of data the HF shall expect in the <dataresp> parameter returned by the AG depends on\nthe information requested in each case.\n\nOnly support for execution command is mandated. Neither the read nor test commands are\nmandatory.\n\nValues:\n\n<datarequest>: 1, where\n\n1 = Phone number corresponding to the last voice tag recorded in the HF.\n\n<dataresp1..n>: Data parameters returned by the AG. Their contents depend on the value of the\n<datarequest> parameter as follows:\n\n<datarequest> value <dataresp> parameters\n\n1 <Phone number>:\nPhone number string (max. 32 digits). The format (type of address)\nof the phone number string shall conform with the rules stated in\n\n[5], sub-clause 10.5.4.7, for a value (in integer format) of the type\nof address octet of 145, if dialing string includes international\naccess code character “+”, and for a value of 129 otherwise.\n\n- **AT+BLDN** (Bluetooth Last Dialed Number)\n\n_Syntax: AT+BLDN_\n\n_Description:_\n\n5 AT+BINP was created with future extensibility in mind. While the Hands-Free Profile only specifies a <datarequest> value of 1 (i.e.,\nphone number), future profiles may choose to add values for <datarequest> to support the retrieval of additional data from the AG.\n\nBluetooth SIG Proprietary Page **96 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nCommand used for calling the last phone number dialed. On reception of this command, the AG\nshall set up a voice call to the last phone number dialed.\n\nOnly support for execution command is mandated. Neither the read nor test commands are\nmandatory.\n\n- **AT+BVRA** (Bluetooth Voice Recognition Activation)\n\n_Syntax: AT+BVRA=<vrec>_\n\n_Description:_\n\nEnables/disables the voice recognition function in the AG. If the Enhanced Voice Recognition\nStatus feature is supported, this command is used to indicate to the AG that the HF is ready to\nrender audio output.\n\nOnly support for execution command is mandated. Neither the read nor test commands are\nmandatory. If the Enhanced Voice Recognition Status feature is supported, the AG shall only\ntransmit audio to the HF if the AG has previously received AT+BVRA=2 from the HF and an\neSCO link has been established.\n\nThe value 2 shall only be used if both the AG and the HF support the Enhanced Voice\nRecognition Status feature.\n\n_Values:_\n\n<vrec>: 0, 1, or 2, entered as integer values, where\n\n0 =\n\n          - Disable Voice recognition in the AG.\n\n          - If the Enhanced Voice Recognition Status feature is supported, this value terminates\nthe current VR session.\n\n          - If the Enhanced Voice Recognition Status feature is supported, this value may also\nbe used to refuse the +BVRA=1 request from the AG to start a new VR session.\n\n1 = Enable voice recognition in the AG.\n\n2 = This value shall only be used if both the AG and the HF support the Enhanced Voice\nRecognition Status feature. This value indicates that the HF is ready to accept audio when\nthe Audio Connection is first established. The HF shall only send this value if the eSCO link\nhas been established.\n\nThe HF may send this value during an ongoing VR session to terminate audio output from the\nAG (if there is any) and prepare the AG for new audio input.\n\n- **+BVRA** (Bluetooth Voice Recognition Activation)\n\n_Syntax: +BVRA: <vrect>_ [,<vrecstate>][,<textualRepresentation>]\n\n_Description:_\n\nUnsolicited result code used to notify the HF when the voice recognition function in the AG is\nactivated/deactivated autonomously from the AG. If the Enhanced Voice Recognition Status\nfeature is supported, then this value is also used to indicate state changes in the AG´s voice\nrecognition engine.\n\nBluetooth SIG Proprietary Page **97 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nThe unsolicited +BVRA: 1 result code shall not be sent by the AG to the HF if the corresponding\nvoice recognition activation has been initiated by the HF. Likewise, the unsolicited +BVRA: 0\nresult code shall not be sent by the AG to the HF if the corresponding voice recognition\ndeactivation has been initiated by the HF, regardless of which side initiated the voice recognition\nactivation.\n\nIf the Enhanced Voice Recognition Status feature is supported, the AG shall only transmit audio\nto the HF if the AG has previously received AT+BVRA=2 from the HF and an eSCO link has been\nestablished.\n\n_Values:_\n\n<vrect>: 0, entered as integer value, where\n\n0 = Voice recognition is disabled in the AG\n\n1 = Voice recognition is enabled in the AG\n\n<vrecstate>:\n\nBitmask that reflects the current state of the voice recognition engine on the AG. When there is no active\nvoice recognition session, Bit 0 shall be set to 0. If Bit 0 is set to 0, all other bits shall be set to 0.\n\nThe <vrecstate> shall be present if both the AG and HF support the Enhanced Voice Recognition Status\nfeature; otherwise, it shall not be present.\n\n|Bit|Description|\n|---|---|\n|0|If value of this bit is 1, the AG is ready to accept audio input|\n|1|If value of this bit is 1, the AG is sending audio to the HF|\n|2|If value of this bit is 1, the AG is processing the audio input|\n\n<textualRepresentation>: <textID>,<textType>,<textOperation>,<string>\n\nThe textualRepresentation shall only be present if both the AG and HF support the Voice Recognition\nText feature.\n\n<textID>: Unique ID of the current text as a hexadecimal string (a maximum of 4 characters in length, but\nless than 4 characters in length is valid). TextID shall change if the textType has changed. Each textID\nvalue shall be unique for a VR session. TextID values shall not be valid across VR sessions.\n\n<textType>: ID of the textType from the following list:\n\n|ID|Description|\n|---|---|\n|0|Text recognized by the AG from the audio input provided by the HF|\n|1|Text of the audio output from the AG|\n|2|Text of the audio output from the AG that contains a question|\n|3|Text of the audio output from the AG that contains an error description|\n|4–31|Reserved for future use|\n\n<textOperation>: ID of the operation of the text\n\nBluetooth SIG Proprietary Page **98 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n|ID|Description|\n|---|---|\n|0|Reserved for future use|\n|1|NewText: Indicates that a new text started. Shall be used when the textID changes|\n|2|Replace: Replace any existing text with the same textID and same text Type|\n|3|Append: Attach new text to existing text and keep the same textID and same text<br>Type|\n|4–31|Reserved for future use|\n\n<string>: The <string> parameter shall be a UTF-8 text string and shall always be contained within double\nquotes. The length of the string depends on the implementation.\n\nThe following example of a +BVRA command contains a textual representation of the sentence “Message\nto Melissa.” In the example, the state of the voice recognition engine accepts further audio input, the\ntextID is 12AB, the textType is ‘recognized text from audio input’ and the operation is ‘NewText’:\n\n+BVRA: 1,1,12AB,0,1,“Message to Melissa”\n\n- **AT+BRSF** (Bluetooth Retrieve Supported Features)\n\n_Syntax: AT+BRSF=<HF supported features bitmap>_\n\n_Description:_\n\nNotifies the AG of the supported features available in the HF, and requests information about the\nsupported features in the AG. The supported features shall be represented as a decimal value.\n\n_Values:_\n\n<HF supported features bitmap>: a decimal numeric string, which represents the value of a 32 bit\nunsigned integer. The 32 bit unsigned integer represents a bitmap of the supported features in\nthe HF as follows:\n\n|Bit|Feature|\n|---|---|\n|0|EC and/or NR function|\n|1|Three-way calling|\n|2|CLI presentation capability|\n|3|Voice recognition activation|\n|4|Remote audio volume control|\n|5|Enhanced call status|\n|6|Enhanced call control|\n|7|Codec Negotiation|\n|8|HF Indicators|\n|9|eSCO S4 Settings Supported|\n|10|Enhanced Voice Recognition Status|\n\nBluetooth SIG Proprietary Page **99 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n|Bit|Feature|\n|---|---|\n|11|Voice Recognition Text|\n|12-31|Reserved for future use|\n\nThe reserved bits (12-31) shall be initialized to Zero.\n\n- **+BRSF** (Bluetooth Retrieve Supported Features)\n\n_Syntax: +BRSF: <AG supported features bitmap>_\n\n_Description:_\n\nResult code sent by the AG in response to the AT+BRSF command, used to notify the HF what\nfeatures are supported in the AG. The supported features shall be represented as a decimal\nvalue.\n\n_Values:_\n\n<AG supported features bitmap>: a decimal numeric string, which represents the value of a 32 bit\nunsigned integer. The 32 bit unsigned integer represents a bitmap of the supported features in\nthe AG as follows:\n\n|Bit|Feature|\n|---|---|\n|0|Three-way calling|\n|1|EC and/or NR function|\n|2|Voice recognition function|\n|3|In-band ring tone capability|\n|4|Attach a phone number for a voice tag|\n|5|Ability to reject a call|\n|6|Enhanced call status|\n|7|Enhanced call control|\n|8|Extended Error Result Codes|\n|9|Codec Negotiation|\n|10|HF Indicators|\n|11|eSCO S4 Settings Supported|\n|12|Enhanced Voice Recognition Status|\n|13|Voice Recognition Text|\n|14-31|Reserved for future use|\n\nBluetooth SIG Proprietary Page **100 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nThe reserved bits (14-31) shall be initialized to Zero.\n\n- **AT+NREC** (Noise Reduction and Echo Canceling)\n\n_Syntax: AT+NREC=<nrec>_\n\n_Description:_\n\nCommand issued to disable any Echo Canceling and Noise Reduction functions embedded in the\nAG.\n\nOnly support for execution command is mandated. Neither the read nor test commands are\nmandatory.\n\n_Values:_\n\n<nrec>: 0, entered as integer value, where\n\n0 = Disable EC/NR in the AG\n\n- **AT+VGM** (Gain of Microphone)\n\n_Syntax: AT+VGM=<gain>_\n\n_Description:_\n\nCommand issued by the HF to report its current microphone gain level setting to the AG. <gain>\nis a decimal numeric constant, relating to a particular (implementation dependent) volume level\ncontrolled by the HF. This command does not change the microphone gain of the AG; it simply\nindicates the current value of the microphone gain in the HF.\n\nOnly support for execution command is mandated. Neither the read nor test commands are\nmandatory.\n\n_Values:_\n\n<gain>: 0 -15, entered as integer values, where\n\n0 = Minimum gain\n\n15 = Maximum gain\n\n- **AT+VGS** (Gain of Speaker)\n\n_Syntax: AT+VGS=<gain>_\n\n_Description:_\n\nCommand issued by the HF to report its current speaker gain level setting to the AG. <gain> is a\ndecimal numeric constant, relating to a particular (implementation dependent) volume level\ncontrolled by the HF. This command does not change the speaker gain of the AG; it simply\nindicates the current value of the speaker volume in the HF.\n\nOnly support for execution command is mandated. Neither the read nor test commands are\nmandatory.\n\n_Values:_\n\n<gain>: 0 -15, entered as integer values, where\n\n0 = Minimum gain\n\nBluetooth SIG Proprietary Page **101 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n15 = Maximum gain\n\n- **+VGM** (Gain of Microphone)\n\n_Syntax: +VGM:<gain>_\n\n_Description:_\n\nUnsolicited result code issued by the AG to set the microphone gain of the HF. <gain> is a\ndecimal numeric constant, relating to a particular (implementation dependent) volume level\ncontrolled by the HF.\n\nDue to the small inconsistency between the GSM standard [2]) and the current Headset Profile\nspecification ([3]), the HF shall also accept the “=” symbol, in place of “:”, as a valid separator for\nthis unsolicited result code.\n\n_Values:_\n\n<gain>: 0 -15, integer values, where\n\n0 = Minimum gain\n\n15 = Maximum gain\n\n- **+VGS** (Gain of Speaker)\n\n_Syntax: +VGS:<gain>_\n\n_Description:_\n\nUnsolicited result code issued by the AG to set the speaker gain of the HF. <gain> is a decimal\nnumeric constant, relating to a particular (implementation dependent) volume level controlled by\nthe HF.\n\nDue to the small inconsistency between the GSM 07.07 standard ([2]) and the current Headset\nProfile specification [3]), the HF shall also accept the “=” symbol, in place of “:”, as valid separator\nfor this unsolicited result code.\n\n_Values:_\n\n<gain>: 0 -15, integer values, where\n\n0 = Minimum gain\n\n15 = Maximum gain\n\n- **+BSIR** (Bluetooth Setting of In-band Ring tone)\n\n_Syntax: +BSIR: <bsir>_\n\n_Description:_\n\nUnsolicited result code issued by the AG to indicate to the HF that the in-band ring tone setting\nhas been locally changed. The HF may react accordingly by changing its own alert method.\n\n_Values:_\n\n<bsir>: 0 = the AG provides no in-band ring tone\n\n1 = the AG provides an in-band ring tone\n\nBluetooth SIG Proprietary Page **102 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n- **AT+BTRH** (Bluetooth Response and Hold Feature)\n\n_Syntax:_\n\nAT+BTRH=<n> (Set command)\n\nAT+BTRH? (Read Current Status)\n\n_Description:_\n\nCommand issued by the HF for the “Response and Hold” feature in the AG.\n\nThis specification defines the use of the set and read command. The AT+BTRH? command shall\nbe used by the HF to query the current “Response and Hold” state of the AG.\n\n_Values:_\n\n<n>: 0, 1, 2 entered as integer values, where\n\n0 = Put Incoming call on hold\n\n1 = Accept a held incoming call\n\n2 = Reject a held incoming call\n\n- **+BTRH** (Bluetooth Response and Hold Feature)\n\n_Syntax: +BTRH: <n>_ _(Response for AT+BTRH)_\n\n_Description:_\n\nResult code used to notify the HF whenever the incoming call is either put on hold or accepted or\nrejected. The AG shall also respond back with this response for the AT+BTRH? command from\nthe HF.\n\n_Values:_\n\n<n>: 0,1,2 entered as integer value, where\n\n0 = Incoming call is put on hold in the AG\n\n1 = Held incoming call is accepted in the AG\n\n2 = Held incoming call is rejected in the AG\n\n- **AT+BCC** (Bluetooth Codec Connection)\n\n_Syntax: AT+BCC_\n\n_Description:_\n\nThis command is used by the HF to request the AG to start the Codec Connection procedure.\n\n- **AT+BCS** (Bluetooth Codec Selection)\n\n_Syntax: AT+BCS= <u>_ _(u is a Codec ID)_\n\n_Description:_\n\nThis command confirms the codec to the remote device (AG), and implicitly also which\nsynchronization protocol, will be used on the synchronous connection.\n\nIf no value is included, the command is invalid.\n\nBluetooth SIG Proprietary Page **103 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n_Values:_\n\n<u>: All possible Codec IDs, see definition of AT+BAC.\n\n- **+BCS** (Bluetooth Codec Selection)\n\n_Syntax: +BCS: <u> (u is a codec ID)_\n\n_Description:_\n\nThis command informs the codec to the remote device (HF), and implicitly also which\nsynchronization protocol, will be used on the synchronous connection.\n\n_Values:_\n\n<u>: All possible Codec IDs, see definition of AT+BAC.\n\n- **AT+BAC** (Bluetooth Available Codecs)\n\n_Syntax: AT+BAC= [<u1>[,<u2>[,...[,<un>]]]] (u1,u2, ..., un are a codec IDs)_\n\n_Description:_\n\nThis command informs the remote device (AG) about what codecs (see Table 3.3) the HF\nsupports.\n\nThe Codec ID for the mandatory narrow band codec (CVSD) shall always be included.\n\nIf Wide Band Speech is supported, then the mandatory codec (mSBC) shall be included unless it\nis temporarily unavailable.\n\nIf Super Wide Band Speech is supported, then the mandatory codec (LC3-SWB) shall be\nincluded unless it is temporarily unavailable.\n\nAny speech codecs may be included in this list as long as the respective mandatory codecs are\nalso included.\n\n_Values:_\n\n<u>: All possible Codec IDs. Codec IDs shall be transferred as string representations of decimal\nnumbers. The format of the Codec IDs is 8 bit aliases that are defined in Section 11 (Appendix B:\nCodec IDs). For a single codec with ID=12 and the mandatory default codecs (1, 2 and 3), the\ncommand:\n\nAT+BAC=1,2,3,12\n\nis sent.\n\n- **AT+BIND** (Bluetooth HF Indicators Feature)\n\n_Syntax:_\n\nAT+BIND= <a>,<b>,<c>,...,<n> (List HF supported indicators)\n\nAT+BIND=? (Read AG supported indicators)\n\nAT+BIND? (Read AG enabled/disabled status of indicators)\n\n_Description:_\n\nBluetooth SIG Proprietary Page **104 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nThis command enables the HF to notify the AG which HF to AG indicators are supported. The\nindicators may be enabled or disabled.\n\nThe AT+BIND commands shall not be used unless both AG and HF BRSF bits for the ‘HF Indicators’\nfeature are set to one.\n\n_Values_ :\n\n<a> ... <n>: 0-65535, entered as decimal unsigned integer values without leading zeros,\nreferencing an HF indicator assigned number. Values are defined on the Bluetooth SIG Assigned\nNumbers [8] web page. The maximum number of indicator assigned numbers in the request shall\nbe 20.\n\n- **+BIND** (Bluetooth HF Indicators Feature)\n\n_Syntax:_\n\n+BIND: (<a>,<b>,<c>,...,<n>) (Response to AT+BIND=?)\n\n+BIND: <a>,<state> (Unsolicited or Response to AT+BIND?)\n\n_Description:_\n\nThis response enables the AG to notify the HF which HF indicators are supported and their state,\nenabled or disabled.\n\nThe +BIND responses shall not be used unless both AG and HF BRSF bits for the ‘HF Indicators’\nfeature are set to one.\n\nWhen responding to the AT+BIND? command, the AG shall send one or more +BIND responses\nfollowed by OK to terminate the list.\n\n_Values:_\n\n<a> ... <n>: 0-65535, entered as decimal unsigned integer values without leading zeros,\nreferencing an HF indicator assigned number. Values are defined on the Bluetooth SIG Assigned\nNumbers [8] web page. The maximum amount of indicator assigned numbers in the request shall\nbe 20.\n\n<state>: 0-1, entered as integer values, where\n\n0 = Indicator is disabled, no value changes shall be sent for this indicator\n\n1 = Indicator is enabled, value changes may be sent for this indicator\n\n- **AT+BIEV** (Bluetooth HF Indicators Feature)\n\n_Syntax:_\n\nAT+BIEV= <assigned number>,<value> (Update value of indicator)\n\n_Description:_\n\nThis command enables the HF to send updated values of the enabled HF indicators to the AG.\n\nThe AT+BIEV command shall not be used unless both AG and HF BRSF bits for the ‘HF\nIndicators’ feature are set to one.\n\n_Values:_\n\nBluetooth SIG Proprietary Page **105 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n<assigned number>: 0-65535, entered as a decimal unsigned integer without leading zeros,\nreferencing an HF indicator assigned number. Values are defined on the Bluetooth SIG Assigned\nNumbers [8] web page.\n\n<value> 0 to 4,294,967,295, entered as a decimal unsigned integer without leading zeros. The\nmeaning of the value depends of the <assigned number> and is defined on the Bluetooth SIG\nAssigned Numbers [8] web page.\n\nBluetooth SIG Proprietary Page **106 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n## **6 RFCOMM**\n\nThis profile requires compliance to RFCOMM [4]. The following subsections together with the associated\nsub-clauses defines the requirements with regard to this profile in addition to the requirements as defined\nin RFCOMM.\n\n##### **6.1 RFCOMM Interoperability Requirements**\n\nFor the RFCOMM layer, the following requirements apply.\n\nFor the Hands-Free Profile, as defined in Section 4.2, both the AG and the HF may initiate RFCOMM\nconnection establishment (see Section 6.1.1). Therefore, for the purposes of reading RFCOMM [4], both\nthe AG and the HF may assume the role of RFCOMM Initiator.\n\nThe AG and the HF shall support the RFCOMM Initiator role as defined in Section 9 in [4].\n\nThe AG and the HF shall support the RFCOMM Acceptor role, defined in HFP as the device that accepts\nthe establishment of the RFCOMM multiplexer control channel on DLCI0 as defined in Section 5.2.1 in\n\n[4].\n\nThe AG and the HF shall support the RFCOMM Client role as defined in Section 9 in [4].\n\nThe AG and the HF shall support the RFCOMM Server role as defined in Section 9 in [4].\n\nTable 6.1 summarizes the additional requirements for RFCOMM procedure support beyond those defined\nin RFCOMM [4].\n\n|Procedure (see Section 5.2.1 in [4])|RFCOMM<br>Initiator|RFCOMM<br>Acceptor|RFCOMM<br>Client|RFCOMM<br>Server|\n|---|---|---|---|---|\n|Initialize RFCOMM session|M|X|X|X|\n|Respond to RFCOMM session initialization|X|M|X|X|\n|Establish DLC|X|X|M|X|\n|Respond to DLC establishment|X|X|X|M|\n\n**6.1.1** **RFCOMM connection establishment**\nRFCOMM connection establishment means the RFCOMM multiplexer start-up procedure defined in\nSection 5.2.1 in [4], which describes the establishment of the RFCOMM multiplexer control channel on\nDLCI0. The device establishing the RFCOMM connection shall first discover the SDP service record as\ndefined in Table 6.3 for the HF and/or in Table 6.5 for the AG to discover the RFCOMM server channel\nnumber exposed by the peer device.\n\nThe device establishing the RFCOMM connection shall then initiate the L2CAP channel establishment\nprocedure as defined in Section 6.2.1 and shall then perform the RFCOMM multiplexer start-up\nprocedure. When the RFCOMM connection has been established, the device shall proceed to the Service\nLevel Connection Establishment procedure defined in Section 4.2 to establish a Service Level Connection\non the RFCOMM server channel discovered during SDP service record discovery.\n\nBluetooth SIG Proprietary Page **107 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n##### **6.2 L2CAP Interoperability Requirements**\n\nFor the L2CAP layer, Table 6.2 defines the additional support requirements to those defined in RFCOMM\n\n[4].\n\n|Procedure|HF requirement|AG requirement|\n|---|---|---|\n|Data Channel Initiator|M|M|\n|Data Channel Acceptor|M|M|\n\n**6.2.1** **L2CAP channel establishment procedure**\nThe device establishing the RFCOMM connection as defined in Section 6.1.1 shall send an L2CAP\nConnection Request and shall set the value of the PSM field to the value for RFCOMM as defined in the\nBluetooth Assigned Numbers [8].\n\n##### **6.3 SDP Interoperability Requirements**\n\nThe following service records are defined for the Hands-Free Profile. There is one service record\napplicable to the Hands-Free unit and another for the Audio Gateway.\n\nThe attribute “SupportedFeatures” states the features supported in each device. This attribute is not\nencoded as a data element sequence; it is simply a 16-bit unsigned integer. The set of features supported\nin each case is bit-wise defined in this attribute on a yes/no basis. The mapping between the features and\ntheir corresponding bits within the attribute is listed below in Table 6.4 for the HF and in Table 6.6 for the\nAG. If a device indicates support for a feature, then it shall support that feature in the manner specified by\nthis Profile.\n\nThe codes assigned to the mnemonics used in the Value column, as well as the codes assigned to the\nattribute identifiers (if not specifically mentioned in the AttrID column), are listed in the Bluetooth Assigned\nNumbers [8] web page.\n\nThe values of the “SupportedFeatures” bitmap given in Table 6.4 shall be the same as the values of the\nBits 0 to 4 of the AT-command AT+BRSF (see Section 5.3).\n\n|Item|Col2|Col3|Definition|Type|Value|Status|Default|\n|---|---|---|---|---|---|---|---|\n|ServiceClassIDList|ServiceClassIDList|ServiceClassIDList||||M||\n||ServiceClass0|ServiceClass0||UUID|Hands-Free|M||\n||ServiceClass1|ServiceClass1||UUID|Generic Audio|M||\n|ProtocolDescriptorList|ProtocolDescriptorList|ProtocolDescriptorList||||M||\n||Protocol0|Protocol0||UUID|L2CAP|M||\n||Protocol1|Protocol1||UUID|RFCOMM|M||\n|||ProtocolSpecificParameter0|Server<br>Channel|Uint8|N=server channel<br>#|M||\n|BluetoothProfileDescriptorList|BluetoothProfileDescriptorList|BluetoothProfileDescriptorList||||M||\n\nBluetooth SIG Proprietary Page **108 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n|Item|Col2|Col3|Definition|Type|Value|Status|Default|\n|---|---|---|---|---|---|---|---|\n||Profile0|Profile0|Supported<br>Profiles|UUID|Hands-Free|M|Hands-Free|\n|||Param0|Profile<br>Version|Uint16|0x0109**6**|M||\n|ServiceName|ServiceName|ServiceName|Display-<br>able Text<br>name|String|_Service-provider_<br>_defined _|O|“Hands-Free<br>unit”|\n|SupportedFeatures|SupportedFeatures|SupportedFeatures|Features<br>supported|Uint16|_Device_<br>_dependent _|M|0x0000|\n\n|Bit<br>position<br>(0=LSB)|Feature|Default in HF|\n|---|---|---|\n|0|EC and/or NR function (yes/no, 1 = yes, 0 = no)|0|\n|1|Call waiting or three-way calling(yes/no, 1 = yes, 0 = no)|0|\n|2|CLI presentation capability (yes/no, 1 = yes, 0 = no)|0|\n|3|Voice recognition activation (yes/no, 1= yes, 0 = no)|0|\n|4|Remote audio volume control (yes/no, 1 = yes, 0 = no)|0|\n|5|Wide Band Speech (yes/no, 1 = yes, 0 = no)|0|\n|6|Enhanced Voice Recognition Status (yes/no, 1 = yes, 0 = no)|0|\n|7|Voice Recognition Text (yes/no, 1 = yes, 0 = no)|0|\n|8|Super Wide Band Speech (yes/no, 1 = yes, 0 = no)|0|\n\nThe \"Network\" attribute states if the AG has the capability to reject incoming calls [7] . This attribute is not\nencoded as a data element sequence; it is simply an 8-bit unsigned integer. The information given in the\n“Network” attribute shall be the same as the information given in Bit 5 of the unsolicited result code\n+BRSF (see Section 5.3). An attribute value of 0x00 is translated to a bit value of 0; an attribute value of\n0x01 is translated to a bit value of 1.\n\nThe values of the “SupportedFeatures” bitmap given in Table 6.6 shall be the same as the values of the\nBits 0 to 4 of the unsolicited result code +BRSF (see Section 5.3).\n\n6 Indicating version HFP 1.9\n\n7 In previous versions of the Hands-Free Profile, the attribute values were called \"GSM like\" and \"others\"\n\nBluetooth SIG Proprietary Page **109 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n|Item|Col2|Col3|Definition|Type|Value|Status|Default|\n|---|---|---|---|---|---|---|---|\n|ServiceClassIDList|ServiceClassIDList|ServiceClassIDList||||M||\n||ServiceClass0|ServiceClass0||UUID|AG Hands-Free|M||\n||ServiceClass1|ServiceClass1||UUID|Generic Audio|M||\n|ProtocolDescriptorList|ProtocolDescriptorList|ProtocolDescriptorList||||M||\n||Protocol0|Protocol0||UUID|L2CAP|M||\n||Protocol1|Protocol1||UUID|RFCOMM|M||\n|||ProtocolSpecificParameter0|Server<br>Channel|Uint8|N=server channel<br>#|M||\n|BluetoothProfileDescriptorList|BluetoothProfileDescriptorList|BluetoothProfileDescriptorList||||M||\n||Profile0|Profile0|Supported<br>Profiles|UUID|Hands-Free|M|Hands-Free|\n|||Param0|Profile<br>Version|Uint16|0x0109**8**|M||\n|ServiceName|ServiceName|ServiceName|Display-<br>able Text<br>name|String|_Service-provider_<br>_defined_|O|“Voice<br>gateway”|\n|Network|Network|Network||Uint8|0x01 – Ability to<br>reject a call<br>0x00 – No ability<br>to reject a call|M||\n|SupportedFeatures|SupportedFeatures|SupportedFeatures|Features<br>supported|Uint16|_Device dependent_|M|0x0009|\n\n|Bit<br>position<br>(0=LSB)|Feature|Default in<br>AG|\n|---|---|---|\n|0|Three-way calling (yes/no, 1 = yes, 0 = no)|1|\n|1|EC and/or NR function (yes/no, 1 = yes, 0 = no)|0|\n|2|Voice recognition function (yes/no, 1 = yes, 0 = no)|0|\n|3|In-band ring tone capability (yes/no, 1 = yes, 0 = no)|1|\n|4|Attach a phone number for a voice tag (yes/no, 1 = yes, 0 = no)|0|\n|5|Wide Band Speech (yes/no, 1 = yes, 0 = no)|0|\n\n8 Indicating version HFP 1.9\n\nBluetooth SIG Proprietary Page **110 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n|Bit<br>position<br>(0=LSB)|Feature|Default in<br>AG|\n|---|---|---|\n|6|Enhanced Voice Recognition Status (yes/no, 1 = yes, 0 = no)|0|\n|7|Voice Recognition Text (yes/no, 1 = yes, 0 = no)|0|\n|8|Super Wide Band Speech (yes/no, 1 = yes, 0 = no)|0|\n\n**6.3.1** **Interaction with Hands-Free Profile Rev 0.96 Implementations**\nHF implementations, which are according to the Hands-Free Profile specification Rev. 0.96, will not send\nthe AT+BRSF command. Likewise, AG implementations, which are according to the Hands-Free Profile\nspecification Rev. 0.96, will not be able to respond to AT+BRSF with the +BRSF unsolicited result code.\nInstead, they will respond with ERROR.\n\nIn order to retrieve the “SupportedFeatures” information from an HF, which does not send AT+BRSF,\nService Discovery should be used by the AG implementation. Whenever the “SupportedFeatures”\nattribute is not present in the HF service record, or if the AG does not perform the Service Discovery\nprocedure, default values as stated in Table 6.4 shall be assumed.\n\nIn order to retrieve the “SupportedFeatures” and “Network” information from an AG, which does not send\n+BRSF, Service Discovery should be used by the HF implementation. Whenever the\n“SupportedFeatures” attribute is not present in the AG service record, or if the HF does not perform the\nService Discovery procedure, default values as stated in Table 6.6 shall be assumed.\n\n**6.3.2** **Interaction with HFP 0.96, 1.0 and HFP 1.5 implementations**\nHF implementations that comply with the Hands-Free Profile specification Rev. 0.96,1.0 or 1.5, shall not\nindicate support for the Codec Negotiation feature and shall neither send the AT+BAC command nor the\nAT+BCC command to trigger an audio connection establishment by the AG.\n\nAG implementations that comply with the Hands-Free Profile specification Rev. 0.96,1.0 or 1.5, shall not\nindicate support for the Codec Negotiation feature and shall neither send the +BCS unsolicited response\nto the HF.\n\nFor backward compatibility, HFP Rev. “x.y” implementations shall be able to handle establishment of\nsynchronous connections according to Hands-Free Profile specification Rev. 1.0 or 1.5.\n\n- The HF shall be able to accept establishment of a synchronous connection from an HFP 1.0 or 1.5\nAG.\n\n- The AG shall be able to initiate establishment of a synchronous connection to an HFP 1.0 or 1.5 HF.\n\nBluetooth SIG Proprietary Page **111 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nThe HF shall be able to initiate establishment of a synchronous connection to an HFP 1.0 or 1.5 AG.\n\nThe AG shall be able to accept establishment of a synchronous connection from an HFP 1.0 or 1.5 HF.\n\nrouted\n\n|HF<br>AG<br>Established Service Level Connection<br>ernal event or<br>user action<br>Synchronous Connection Setup<br>Audio paths properly Audio<br>routed<br>Established Audio Connection|Col2|Col3|Col4|\n|---|---|---|---|\n|HF <br>AG <br>Synchronous Connection Setup <br>Established Audio Connection <br>Audio paths properly<br>routed<br>Audio<br>ernal event or<br>user action<br>Established Service Level Connection|HF <br>AG <br>Synchronous Connection Setup <br>Established Audio Connection <br>Audio paths properly<br>routed<br>Audio<br>ernal event or<br>user action<br>Established Service Level Connection|AG|AG|\n|HF <br>AG <br>Synchronous Connection Setup <br>Established Audio Connection <br>Audio paths properly<br>routed<br>Audio<br>ernal event or<br>user action<br>Established Service Level Connection|HF <br>AG <br>Synchronous Connection Setup <br>Established Audio Connection <br>Audio paths properly<br>routed<br>Audio<br>ernal event or<br>user action<br>Established Service Level Connection|AG|Audio|\n|HF <br>AG <br>Synchronous Connection Setup <br>Established Audio Connection <br>Audio paths properly<br>routed<br>Audio<br>ernal event or<br>user action<br>Established Service Level Connection|Synchronous Connection Setup <br>Established Audio Connection|Synchronous Connection Setup <br>Established Audio Connection|Synchronous Connection Setup <br>Established Audio Connection|\n\n##### **6.4 Link Manager (LM) Interoperability Requirements**\n\nThis profile requires support for encryption as defined in the Link Manager Protocol specification in\nVolume 2, Part C, Section 3.5 in [1].\n\nAdditionally this profile mandates that both the AG and HF devices shall support synchronous logical\ntransports, subject to the requirements in Section 6.6.\n\nBluetooth SIG Proprietary Page **112 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n##### **6.5 Link Control (LC) Interoperability Requirements**\n\nTable 6.7 shows the Link Controller (See Volume 2, Part B, Section 8 in [1]) interoperability requirements\nfor HFP.\n\n|Col1|Capability|Support in AG|Support in HF|\n|---|---|---|---|\n|1.|Inquiry||O|\n|2.|Inquiry scan|O||\n|7|Voice CODEC|||\n|C|CVSD|M|M|\n\n**6.5.1** **Class of Device**\nA device implementing the HF role of HFP shall set the \"Audio\" bit in the Service Class field. Optionally, if\nthe HF intends to be discovered as a \"Hands-Free\", it may use the following values in the Class of Device\nfield:\n\n1. Indicate \"Audio\" as Major Device class.\n\n2. Indicate “Hands-Free” as the Minor Device class.\n\nAn inquiring AG may use this information to filter the inquiry responses.\n\n##### **6.6 Baseband Interoperability Requirements**\n\nThe eSCO link and the air mode “Transparent Data” shall be supported if Wide Band Speech or Super\nWide Band Speech is supported and are optional otherwise.\n\nErroneous data delivery may be used for Wide Band Speech only if core version 2.1 or higher is\nsupported.\n\n|Item|Capability|Status|\n|---|---|---|\n|1.1.3/3|Support of eSCO link|M|\n|1.1.7/4|Transparent data|C1|\n|1.1.8/2|Erroneous data delivery|C2|\n\nC1: Mandatory if Wide Band Speech or Super Wide Band Speech is supported, or optional otherwise.\n\nC2: Optional if core version 2.1 or higher is supported, or excluded otherwise\n\n##### **6.7 Codec Interoperability Requirements**\n\nTable 6.9 shows supported _Mandatory_ and _Optional_ codecs in this profile.\n\n|Codec Type|Support|Ref|\n|---|---|---|\n|CVSD|M|6.7.3|\n|mSBC|C1|6.7.4|\n|LC3-SWB|C2|6.7.6|\n\nBluetooth SIG Proprietary Page **113 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nC1: Mandatory if Wide Band Speech is supported or excluded otherwise.\n\nC2: Mandatory if Super Wide Band Speech is supported or excluded otherwise\n\n**6.7.1** **Synchronous Connection Interoperability Requirements**"
    },
    {
        "section_number": "10.1.1",
        "section_title": "Mnemonics",
        "granularity_level": 3,
        "content": "The following mnemonics are defined to describe the different data types used in the coded bit-stream.\n\n|Mnemonic|Description|\n|---|---|\n|Char8|Character of 8 bits|\n|UiMsbf|Unsigned integer, Most significant bit first|\n|SiMsbf|Signed integer, Most significant bit first|\n|BsMsbf|Bit-stream, Most significant bit first|\n|PCM|Pulse Code Modulation|\n|Na|Not available|\n\n##### **10.2 Syntax**\n\n|Syntax|No. of bits|Mnemonic|\n|---|---|---|\n|audio_frame()<br>{ <br> <br>frame_header()<br> <br>scale_factors()<br> <br>audio_samples()<br> <br>padding()<br>}|<br> <br> <br> <br> <br> <br>|<br> <br> <br> <br> <br> <br>|\n\nNote: The syntax of the mSBC speech frame is not changed from the original SBC definition in\n\nA2DP [7].\n\nBluetooth SIG Proprietary Page **124 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n|Syntax|No. of bits|Mnemonic|\n|---|---|---|\n|frame_header()<br>{ <br> <br>**Syncword** <br> <br>**Reserved for future use** <br> <br>**crc_check** <br>}|<br> <br>8 <br>16<br>8 <br>|<br> <br>BsMsbf<br>UiMsbf<br>UiMsbf<br>|\n\n##### **10.3 Semantics**"
    },
    {
        "section_number": "10.3.1",
        "section_title": "Frame_header",
        "granularity_level": 3,
        "content": "**syncword** -- The 8 bit string %10101101 or $AD.\n\nThe syncword is different from that specified for the SBC in A2DP specifications so that implementations\nmay use this is an additional indication that the encoded stream is meant to contain Wide Band Speech.\n\n**Codec ID –** The following table represents the values of the various mSBC parameters that correspond to\nthe values specified in the Codec ID field.\n\n|8 bit<br>Codec ID|Mandatory<br>Or Optional|mSBC Parameters|Col4|Col5|Col6|Col7|Col8|\n|---|---|---|---|---|---|---|---|\n|**8 bit**<br>**Codec ID**|**Mandatory**<br>**Or Optional**|**Channel**<br>**Mode**|**Sampling**<br>**rate**|**Allocation**<br>**method**|**Subbands**|**Block**<br>**length**|**Bitpool**|\n|0x02|M|Mono|16 kHz|loudness|8|15|26|\n\nThe interpretation of the mSBC parameters as specified in Table 10.4 is identical to that specified in SBC\ndefinition in A2DP [7]."
    },
    {
        "section_number": "10.3.2",
        "section_title": "Padding",
        "granularity_level": 3,
        "content": "The all zero 8 bit string %00000000 or $00 shall be used for padding.\n\nBluetooth SIG Proprietary Page **125 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n## **11 Appendix B: Codec IDs**\n\nThe following table specifies the mapping of the codecs to their respective Codec Ids.\n\n|Codec Type|Codec ID|Ref.|\n|---|---|---|\n|CVSD|0x01|6.7.3|\n|mSBC|0x02|6.7.4|\n|LC3-SWB|0x03|6.7.6|\n|Other optional codecs may be added here|Reserved|Reserved|\n\nBluetooth SIG Proprietary Page **126 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n## **12 Appendix C: Example PLC Implementation**\n\nThis appendix describes a packet loss concealment (PLC) method based on the paper by D. Goodman,\net al. [9] and adapted for use with mSBC.\n\n##### **12.1 Baseline Packet Loss Concealment**\n\nA baseline packet loss concealment algorithm based on the techniques presented in [1] is discussed.\nThis baseline PLC is a generic PCM-based system and makes no assumptions on mSBC. Its integration\ninto mSBC to form a reference PLC for mSBC is described in a later section.\n\nThe following subsections describe the techniques used in the baseline PLC algorithm."
    },
    {
        "section_number": "12.1.1",
        "section_title": "Waveform Substitution Based On Pattern Matching",
        "granularity_level": 3,
        "content": "The technique in Section IV “Waveform Substitution Based on Pattern Matching” of [1] is used to\nconstruct an estimate of the waveform in missing packets. This algorithm searches a history buffer of\npreviously received samples to find a packet-worth of samples to replace the missing packet. The\nselection is based on constructing a template of M samples immediately preceding the missing packet\nand scanning a search window of N samples in the history buffer to find the M samples that best match\nthe template. It then uses as a replacement packet the L samples that follow the best match. The pattern\nmatching criterion used is the cross-correlation similar to that in equation (4) of the paper except the\ndenominator contains a square root as in the standard definition of cross-correlation. The implementation\nfollows the recommendations of the paper and uses a template of 4ms (M=64) and a search window of\n16ms (N=256). A frame size of 7.5ms (L=120) was used corresponding to the frame size of the default\nmSBC configuration."
    },
    {
        "section_number": "12.1.2",
        "section_title": "Overlap-Add",
        "granularity_level": 3,
        "content": "As described in Section III of the paper, in order to reduce the audible distortion caused by discontinuities\nat the boundaries between correct packets and substitution packets, it is important to “merge” the two\nwaveforms by way of an overlap-add procedure. The example PLC follows the recommendation of the\npaper and uses a raised-cosine weighting with a merge duration of 1ms (16 samples). The paper adds\n1ms of delay in order to merge at the boundary between the last correct packet and the substitution\npacket. However, the example PLC avoids this added delay by using the partial signal contained in the\nmSBC decoder memory. This will be described in more detail in Section 12.2.1. At the boundary between\nthe first correct packet, after packet loss, and the substitution packet, the paper extends the substitution\nwaveform 1ms into the correct packet in order to perform the merge. The example PLC follows a similar\nmethod except that the substitution waveform is further extended to allow for the mSBC decoder signal to\nre-\\converge after packet loss. This is also described later."
    },
    {
        "section_number": "12.1.3",
        "section_title": "Amplitude Matching",
        "granularity_level": 3,
        "content": "Section B of the paper describes a procedure to adjust the amplitude of the substitution packet to match\nthat of the preceding packet. The example PLC implements this approach with the mean-absolute-value\nmeasure of packet amplitude.\n\n##### **12.2 Integration of PLC with mSBC**\n\nThe PLC described in the paper was designed for PCM without any considerations for integration with a\ncodec such as mSBC. The main issue with mSBC as far as integration of a PLC is the response of the\nsub-band filters in the mSBC decoder. The integration is described in the next sub-sections.\n\nBluetooth SIG Proprietary Page **127 of 143**\n\n**Hands-Free Profile /** Profile Specification"
    },
    {
        "section_number": "12.2.1",
        "section_title": "Merging in the First Substitution Frame – Avoiding Delay",
        "granularity_level": 3,
        "content": "As previously mentioned, the paper performs a merge between the last correct packet and the\nsubstitution packet by introducing a 1ms delay. This delay is avoided in the example PLC by taking\nadvantage of the signal embedded in the mSBC decode sub-band filter memory. In the first substitution\nframe, the mSBC decoder is fed a bit-stream corresponding to an all-zero input signal. The output of\ndecoder is then used to merge with the substitution waveform using a 1ms raised-cosine weighting as\ndescribed in the paper. This procedure also has the advantage of setting the decoder memory to zero."
    },
    {
        "section_number": "12.2.2",
        "section_title": "Reconvergence of the mSBC Decoder in the First Correct Packet After",
        "granularity_level": 3,
        "content": "**Packet Loss**\nThe delay caused by the sub-band filters in the mSBC decoder means that when the first correct packet\nafter packet loss is decoded, there will be a period of time before the output reconverges to the desired\ndecoder output. Since the decoder memory is essentially reset to zero by the procedure described in\nSection 12.2.1, the decoder output will ramp up from zero as it reconverges. The substitution waveform is\nextended into the first correct packet after packet loss by an amount equal to this reconvergence time and\nused as output. Once the decoder output has sufficiently reconverged, the substitution waveform is\nmerged with the decoder output using a 1 ms raised-cosine weighting. The reconvergence time used was\nexperimentally tuned to 36 samples (2.25ms).\n\n##### **12.3 API Description**\n\nThis section describes the API for the example PLC for mSBC."
    },
    {
        "section_number": "12.3.1",
        "section_title": "Memory Allocation",
        "granularity_level": 3,
        "content": "The calling application allocates memory for the PLC memory structure.\n\nThe structure is defined in the file sbcplc.h and is shown below:\n\n```\n/* PLC State Information */\n\nstruct PLC_State\n\n{\n\nshort hist[LHIST+FS+SBCRT+OLAL];\n\nshort bestlag;\n\nint  nbf;\n\n};\n\n```\n\nThe main test program can allocate the space by simply declaring a variable as below:\n\n```\n    struct PLC_State plc_state;\n\n```"
    },
    {
        "section_number": "12.3.2",
        "section_title": "Initialization",
        "granularity_level": 3,
        "content": "The calling application initializes the PLC memory that was allocated as described in Section 12.3.1. The\ninitialization function is called once before processing begins. The initialization function is:\n\n```\n    void InitPLC(struct PLC_State *plc_state)\n\n```\n\nand is found in sbcplc.c.\n\nThe calling program should include `sbcplc.h` containing the header:\n\nBluetooth SIG Proprietary Page **128 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n```\n    #include \"sbcplc.h\"\n\n```\n\nand should call the initialization function:\n\n```\n    InitPLC(&plc_state);\n\n```"
    },
    {
        "section_number": "12.3.3",
        "section_title": "Good Frame Processing",
        "granularity_level": 3,
        "content": "If a good frame is received, the frame should be decoded by mSBC. The output PCM samples from the\nmSBC decoder are then passed to the function:\n\n```\n    void PLC_good_frame(struct PLC_State *plc_state, short *in, short *out)\n\n```\n\nwhere:\n\n`struct PLC_State *plc_state` the PLC memory block\n\n`short *in` Pointer to the array of samples from the mSBC\ndecoder containing the PCM samples of the good\ndecoded frame.\n\n`short *out` Pointer to the array of samples processed by\n```\n                      PLC_good_frame().\n\n```\n\nThe calling application owns the memory pointed to by _*in_ and _*out._\n\n   - The size of these arrays should be no smaller than the frame size.\n\n   - The samples pointed to by `*out` are the final output samples."
    },
    {
        "section_number": "12.3.4",
        "section_title": "Bad Frame Processing",
        "granularity_level": 3,
        "content": "If a frame is lost, the calling application does the following:\n\nCall the mSBC decoder with channel indices representing an all-zero input PCM signal. This is further\ndescribed in Section 12.3.5\n\nCall the mSBC PLC function\n\n```\n    void PLC_bad_frame(struct PLC_State *plc_state, short *ZIRbuf, short\n    *out)\n\n```\n\nwhere:\n\n```\nstruct PLC_State\n*plc_state\n\n```\n\nthe PLC memory block.\n\n`short *ZIRbuf` the zero input response of the mSBC decoder from step\n1) of length equal to the frame size.\n\n`short *out` pointer to the buffer where the PLC will write the\nconcealment samples for the current lost frame."
    },
    {
        "section_number": "12.3.5",
        "section_title": "SBC Decoder Zero-Input Response",
        "granularity_level": 3,
        "content": "At time of receiving the first bad frame, the mSBC decoder filter banks contain data from previous good\nframes, called signal memory. This signal memory can be extracted by calling the mSBC decoder with a\nbit-stream that represents an all-zero PCM signal. The resulting signal is termed the Zero-Input Response\n(ZIR) of the mSBC decoder. The example PLC requires this signal as part of its input.\n\nBluetooth SIG Proprietary Page **129 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nThe indices representing the all-zero signal can be obtained offline and stored. The indices are then used\nas input to the decoder every time a frame is lost.\n\nTo obtain the indices, use an all-zero PCM signal as input to the encoder, and capture the indices. Store\nthese indices and use them as described above.\n\nThe zero input bit stream for the default mSBC configuration is pre-computed and provided below:\n\n```\n#if FS==120 /* Frame Size of 120 samples\n\n#define FSIDX    57       /* Frame Size Indexes*/\n\n#define NROFBLK   15       /* NumbeR OF BLocKs*/\n\n#define CHMODE    0       /* CHannel MODE  0=mono, 1=dual,\n2=stereo, 3=joint  */\n\n#define ALLOCMETHOD 0       /* bit ALLOCation METHOD 0=loudness,\n1=SNR      */\n\n#define NROFSB    8       /* NumbeR OF SubBands */\n\n#define BITPOOL   26       /* BITPOOL size */\n\n#endif\n\nshort indices0[] = {0xad, 0x0, 0x0, 0xc5, 0x0, 0x0, 0x0, 0x0, 0x77, 0x6d,\n0xb6, 0xdd, 0xdb, 0x6d, 0xb7, 0x76, 0xdb, 0x6d, 0xdd, 0xb6, 0xdb, 0x77, 0x6d,\n0xb6, 0xdd, 0xdb, 0x6d, 0xb7, 0x76, 0xdb, 0x6d, 0xdd, 0xb6, 0xdb, 0x77, 0x6d,\n0xb6, 0xdd, 0xdb, 0x6d, 0xb7, 0x76, 0xdb, 0x6d, 0xdd, 0xb6, 0xdb, 0x77, 0x6d,\n0xb6, 0xdd, 0xdb, 0x6d, 0xb7, 0x76, 0xdb, 0x6c};\n\n```"
    },
    {
        "section_number": "12.3.6",
        "section_title": "Bad Frame Calling Example",
        "granularity_level": 3,
        "content": "In the case of a bad frame, using the above example data, the calling application would do the following:\n\n```\nSBCdecode( indices0, ZIRbuf);\n\nPLC_bad_frame(plc_state, ZIRbuf, outbuf);\n\n```\n\nThe application would then use the contents of _outbuf_ for playback.\n\n##### **12.4 Source Code (ANSI C)**"
    },
    {
        "section_number": "12.4.1",
        "section_title": "Source code for file – sbcplc.h",
        "granularity_level": 3,
        "content": "```\n/********************************************************\n\nSBC Example PLC ANSI-C Source Code\n\nFile: sbcplc.h\n\n********************************************************/\n\n#ifndef SBCPLC_H\n\n#define SBCPLC_H\n\n```\n\nBluetooth SIG Proprietary Page **130 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n```\n#define FS  120 /* Frame Size */\n\n#define N 256 /* 16ms - Window Length for pattern matching */\n\n#define M 64 /* 4ms - Template for matching */\n\n#define LHIST (N+FS-1) /* Length of history buffer required */\n\n#define SBCRT 36 /* SBC Reconvergence Time (samples) */\n\n#define OLAL 16 /* OverLap-Add Length (samples) */\n\n/* PLC State Information */\n\nstruct PLC_State\n\n{\n\nshort hist[LHIST+FS+SBCRT+OLAL];\n\nshort bestlag;\n\nint  nbf;\n\n};\n\n/* Prototypes */\n\nvoid InitPLC(struct PLC_State *plc_state);\n\nvoid PLC_bad_frame(struct PLC_State *plc_state, short *ZIRbuf, short *out);\n\nvoid PLC_good_frame(struct PLC_State *plc_state, short *in, short *out);\n\n#endif /* SBCPLC_H */\n\n```"
    },
    {
        "section_number": "12.4.2",
        "section_title": "Source code for the file – sbcplc.c",
        "granularity_level": 3,
        "content": "```\n/*************************************************************\n\nSBC Example PLC ANSI-C Source Code\n\nFile: sbcplc.c\n\n*************************************************************/\n\n#include <math.h>\n\n//#include \"sbc.h\"\n\n#include \"sbcplc.h\"\n\n/* Local Function Prototypes */\n\nfloat CrossCorrelation(short *x, short *y);\n\nint PatternMatch(short *y);\n\n```\n\nBluetooth SIG Proprietary Page **131 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n```\nfloat AmplitudeMatch(short *y, short bestmatch);\n\n/* Raised COSine table for OLA */\n\nfloat rcos[OLAL] = {0.99148655f,0.96623611f,0.92510857f,0.86950446f,\n\n0.80131732f,0.72286918f,0.63683150f,0.54613418f,\n\n0.45386582f,0.36316850f,0.27713082f,0.19868268f,\n\n0.13049554f,0.07489143f,0.03376389f,0.00851345f};\n\n+\n\n/****************************************************************************\n\n* Function: InitPLC() *\n\n* Purpose: Perform PLC initialization of memory vectors. *\n\n* Inputs: *plc_state - pointer to PLC state memory *\n\n* Outputs: *plc_state - initialized memory. *\n\n* Date: 03-18-2009\n\n****************************************************************************/\n\nvoid InitPLC(struct PLC_State *plc_state)\n\n{\n\nint i;\n\nplc_state->nbf=0;\n\nplc_state->bestlag=0;\n\nfor (i=0;i<LHIST+SBCRT;i++)\n\nplc_state->hist[i] = 0;\n\n}\n\n/***********************************************************\n\n* Function: PLC_bad_frame()\n\n*\n\n* Purpose: Perform bad frame processing.\n\n*\n\n* Inputs: *plc_state - pointer to PLC state memory\n\n*   *ZIRbuf  - pointer to the ZIR response of the SBC decoder\n\n*\n\n* Outputs: *out - pointer to the output samples\n\n*\n\n```\n\nBluetooth SIG Proprietary Page **132 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n```\n* Date: 03-18-2009\n\n************************************************************/\n\nvoid PLC_bad_frame(struct PLC_State *plc_state, short *ZIRbuf, short *out)\n\n{\n\nint  i;\n\nfloat val;\n\nfloat sf;\n\nplc_state->nbf++;\n\nsf=1.0f;\n\ni=0;\n\nif (plc_state->nbf==1)\n\n{\n\n/* Perform pattern matching to find where to replicate */\n\nplc_state->bestlag = PatternMatch(plc_state->hist);\n\nplc_state->bestlag += M; /* the replication begins after the template match\n*/\n\n/* Compute Scale Factor to Match Amplitude of Substitution Packet to that of\nPreceding Packet */\n\nsf = AmplitudeMatch(plc_state->hist, plc_state->bestlag);\n\nfor (i=0;i<OLAL;i++)\n\n{\n\nval = ZIRbuf[i]*rcos[i] + sf*plc_state->hist[plc_state>bestlag+i]*rcos[OLAL-i-1];\n\nif (val > 32767.0) val= 32767.0;\n\nif (val < -32768.0) val=-32768.0;\n\nplc_state->hist[LHIST+i] = (short)val;\n\n}\n\nfor (;i<FS;i++)\n\n{\n\nval = sf*plc_state->hist[plc_state->bestlag+i];\n\n```\n\nBluetooth SIG Proprietary Page **133 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n```\nif (val > 32767.0) val= 32767.0;\n\nif (val < -32768.0) val=-32768.0;\n\nplc_state->hist[LHIST+i] = (short)val;\n\n}\n\nfor (;i<FS+OLAL;i++)\n\n{\n\nval = sf*plc_state->hist[plc_state->bestlag+i]*rcos[i-FS]+plc_state>hist[plc_state->bestlag+i]*rcos[OLAL-1-i+FS];\n\nif (val > 32767.0) val= 32767.0;\n\nif (val < -32768.0) val=-32768.0;\n\nplc_state->hist[LHIST+i] = (short)val;\n\n}\n\nfor (;i<FS+SBCRT+OLAL;i++)\n\nplc_state->hist[LHIST+i] = plc_state->hist[plc_state->bestlag+i];\n\n}\n\nelse\n\n{\n\nfor (;i<FS;i++)\n\nplc_state->hist[LHIST+i] = plc_state->hist[plc_state->bestlag+i];\n\nfor (;i<FS+SBCRT+OLAL;i++)\n\nplc_state->hist[LHIST+i] = plc_state->hist[plc_state->bestlag+i];\n\n}\n\nfor (i=0;i<FS;i++)\n\nout[i] = plc_state->hist[LHIST+i];\n\n/* shift the history buffer */\n\nfor (i=0;i<LHIST+SBCRT+OLAL;i++)\n\nplc_state->hist[i] = plc_state->hist[i+FS];\n\n}\n\n```\n\nBluetooth SIG Proprietary Page **134 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n```\n/****************************************************************************\n\n* Function: PLC_good_frame()\n\n*\n\n* Purpose: Perform good frame processing. Most of the time, this function\n\n* just updates history buffers and passes the input to the output,\n\n* but in the first good frame after frame loss, it must conceal the\n\n* received signal as it reconverges with the true output.\n\n*\n\n* Inputs: *plc_state - pointer to PLC state memory\n\n*   *in  - pointer to the input vector\n\n*\n\n* Outputs: *out - pointer to the output samples\n\n* Date: 03-18-2009\n\n****************************************************************************/\n\nvoid PLC_good_frame(struct PLC_State *plc_state, short *in, short *out)\n\n{\n\nint i;\n\ni=0;\n\nif (plc_state->nbf>0)\n\n{\n\nfor (i=0;i<SBCRT;i++)\n\nout[i] = plc_state->hist[LHIST+i];\n\nfor (;i<SBCRT+OLAL;i++)\n\nout[i] = (short)(plc_state->hist[LHIST+i]*rcos[i-SBCRT] +\nin[i]*rcos[OLAL-1-i+SBCRT]);\n\n}\n\nfor (;i<FS;i++)\n\nout[i] = in[i];\n\n/*Copy the output to the history buffer */\n\nfor (i=0;i<FS;i++)\n\nplc_state->hist[LHIST+i] = out[i];\n\n```\n\nBluetooth SIG Proprietary Page **135 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n```\n/* shift the history buffer */\n\nfor (i=0;i<LHIST;i++)\n\nplc_state->hist[i] = plc_state->hist[i+FS];\n\nplc_state->nbf=0;\n\n}\n\n/****************************************************************************\n\n* Function: CrossCorrelation()\n\n*\n\n* Purpose: Compute the cross correlation according to Eq. (4) of Goodman\n\n*   paper, except that the true correlation is used. His formula\n\n*   seems to be incorrect.\n\n*\n\n* Inputs: *x  - pointer to x input vector\n\n*   *y  - pointer to y input vector\n\n*\n\n* Outputs: Cn  - return value containing the cross-correlation of x and y\n\n*\n\n* Date: 03-18-2009\n\n****************************************************************************/\n\nfloat CrossCorrelation(short *x, short *y)\n\n{\n\nint  m;\n\nfloat num;\n\nfloat den;\n\nfloat Cn;\n\nfloat x2, y2;\n\nnum=0;\n\nden=0;\n\nx2=0.0;\n\n```\n\nBluetooth SIG Proprietary Page **136 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n```\ny2=0.0;\n\nfor (m=0;m<M;m++)\n\n{\n\nnum+=((float)x[m])*y[m];\n\nx2+=((float)x[m])*x[m];\n\ny2+=((float)y[m])*y[m];\n\n}\n\nden = (float)sqrt(x2*y2);\n\nCn = num/den;\n\nreturn(Cn);\n\n}\n\n/****************************************************************************\n\n* Function: PatternMatch()\n\n*\n\n* Purpose: Perform pattern matching to find the match of template with the\n\n* history buffer according to Section B of Goodman paper.\n\n*\n\n* Inputs: *y : pointer to history buffer\n\n*\n\n* Outputs: return(int): the lag corresponding to the best match. The lag is\n\n* with respect to the beginning of the history buffer.\n\n*\n\n* Date: 03-18-2009\n\n****************************************************************************/\n\nint PatternMatch(short *y)\n\n{\n\nint  n;\n\nfloat maxCn;\n\nfloat Cn;\n\nint  bestmatch;\n\n```\n\nBluetooth SIG Proprietary Page **137 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n```\nmaxCn=-999999.0; /* large negative number */\n\nbestmatch=0;\n\nfor (n=0;n<N;n++)\n\n{\n\nCn = CrossCorrelation(&y[LHIST-M] /* x */, &y[n]);\n\nif (Cn>maxCn)\n\n{\n\nbestmatch=n;\n\nmaxCn = Cn;\n\n}\n\n}\n\nreturn(bestmatch);\n\n}\n\n/****************************************************************************\n\n* Function: AmplitudeMatch()\n\n*\n\n* Purpose: Perform amplitude matching using mean-absolute-value according\n\n*   to Goodman paper.\n\n*\n\n* Inputs: *y : pointer to history buffer\n\n*   bestmatch : value of the lag to the best match\n\n*\n\n* Outputs: return(float): scale factor\n\n*\n\n* Date: 03-19-2009\n\n****************************************************************************/\n\nfloat AmplitudeMatch(short *y, short bestmatch)\n\n{\n\nint  i;\n\nfloat sumx;\n\nfloat sumy;\n\n```\n\nBluetooth SIG Proprietary Page **138 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n```\nfloat sf;\n\nsumx = 0.0;\n\nsumy = 0.000001f;\n\nfor (i=0;i<FS;i++)\n\n{\n\nsumx += abs(y[LHIST-FS+i]);\n\nsumy += abs(y[bestmatch+i]);\n\n}\n\nsf = sumx/sumy;\n\n/* This is not in the paper, but limit the scaling factor to something\n\nreasonable to avoid creating artifacts */\n\nif (sf<0.75f) sf=0.75f;\n\nif (sf>1.2f) sf=1.2f;\n\nreturn(sf);\n\n}\n\n```\n\nBluetooth SIG Proprietary Page **139 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n## **13 Appendix D: Quality Metrics**\n\n##### **13.1 Audio levels**\n\nThe Bluetooth Core Specification (Volume 2, Part B, Section 9, Audio) describes the CVSD codec for\nvoice on the Bluetooth air interface. The Core Specification also provides general audio\nrecommendations for narrowband voice. This appendix provides recommendations for the Wide Band\nSpeech update of the Hands-Free Profile, and for the Super Wide Band Speech update of the HandsFree Profile.\n\nFor both CVSD (narrow band) and the Wide Band Speech codecs, the full scale sine wave PCM data\nshould meet the network level of +3dBm0 as previously specified for the CVSD codec.\n\nFor Super Wide Band Speech codecs, a full scale 6427 Hz sine wave PCM data signal should meet the\nnetwork level of +3dBm0 as previously specified for the CVSD codec. Note that for lower bitrates, the LC3\nutilizes a Long-Term Post Filter (LTPF) which may amplify the signal. The frequency 6427 Hz minimizes\nthis effect.\n\nThe AG manufacturer should adjust the gain from the Bluetooth Reference Point (BTR) to the cellular\nnetwork, as shown in the core specification. The HF is responsible to adjust the speech signal to the BTR,\nas shown in the core specification, to enable nominal speech level of -21dbm0 in the networks at given\nnominal sound pressure level of -4.7 dBPa at the mouth reference point of the HF as described in ITU-T\nP.1100.\n\n**dBm0:** absolute power level in dBm referred to a point of zero relative level (0 dBr point)\n\nA possible test setup is described in Figure 13.1.\n\nThe gain from BTR to the network and the gain from the network to the BTR should be adjusted for both\nsignal processing modes: either on the phone (AG) or on the hands-free (HF) device after confirming the\nAT+NREC=0 command. When the signal processing is confirmed to be disabled on the AG, a sine signal\ncan be used to verify the gain between the BTR and the network. When the active signal processing for\nEcho Cancellation and Noise Reduction are performed on the AG, a sine signal can lead to wrong results\nand a speech like signal, like P.50 (artificial voice), should be used. A Network simulator is highly\n\nBluetooth SIG Proprietary Page **140 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nrecommended during testing because of the unknown status of gain and signal processing in real\nnetworks.\n\n##### **13.2 Bluetooth Sensitivity Frequency Responses**"
    },
    {
        "section_number": "13.2.1",
        "section_title": "Bluetooth Send Sensitivity Frequency Response",
        "granularity_level": 3,
        "content": "The send sensitivity frequency response is measured from BTR to POI (reference speech codec of the\nsystem simulator, output).\n\nThe tolerance mask for the send sensitivity frequency response is enumerated in the Table below, the\nmask is drawn by straight lines between the breaking points on a logarithmic (frequency) - linear (dB\nsensitivity) scale.\n\n|Frequency (Hz)|Upper Limit|Lower Limit|\n|---|---|---|\n|200<br>5000<br>12500<br>14100<br>(14100 = 12500 +0.1*32000/2)<br>16000|0 <br>0 <br>0 <br>0 <br>0|-2<br>-2<br>-4<br> <br>-5<br> <br>no lower limit at the Nyquist<br>frequency|\n\nAll sensitivity values for Super Wide Band Mask values are expressed in dB on an arbitrary scale.\n\n|Frequency (Hz)|Upper Limit|Lower Limit|\n|---|---|---|\n|100<br>6 200<br>7 000|0 <br>0 <br>0|-2<br>-2<br>-3|\n\nAll sensitivity values for Wide Band Mask are expressed in dB on an arbitrary scale.\n\n|Frequency (Hz)|Upper Limit|Lower Limit|\n|---|---|---|\n|200<br>3 100<br>3 400|0 <br>0 <br>0|-2<br>-2<br>-3|\n\nAll sensitivity values for Narrow Band Mask are expressed in dB on an arbitrary scale. Narrow band stops\nat 3400 Hz."
    },
    {
        "section_number": "13.2.2",
        "section_title": "Bluetooth Receive Sensitivity Frequency Response",
        "granularity_level": 3,
        "content": "The receive sensitivity frequency response is measured from the electrical reference point (input of the\nsystem simulators, POI) to the Bluetooth reference interface.\n\nThe tolerance mask for the receive sensitivity frequency response is shown in the Table below, the mask\nis drawn by straight lines between the breaking points on a logarithmic (frequency) - linear (dB sensitivity)\nscale.\n\nBluetooth SIG Proprietary Page **141 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n|Frequency (Hz)|Upper Limit|Lower Limit|\n|---|---|---|\n|200<br>5000<br>12500<br>14100<br>(14100 = 12500 +0.1*32000/2)<br>16000|0 <br>0 <br>0 <br>0 <br>0|-2<br>-2<br>-4<br> <br>-5<br> <br>no lower limit at the Nyquist<br>frequency|\n\nAll sensitivity values for Super Wide Band Mask values are expressed in dB on an arbitrary scale.\n\n|Frequency (Hz)|Upper Limit|Lower Limit|\n|---|---|---|\n|100<br>6 200<br>7 000|0 <br>0 <br>0|-2<br>-2<br>-3|\n\nAll sensitivity values for Wide Band Mask are expressed in dB on an arbitrary scale.\n\n|Frequency (Hz)|Upper Limit|Lower Limit|\n|---|---|---|\n|200<br>3 100<br>3 400|0 <br>0 <br>0|-2<br>-2<br>-3|\n\nAll sensitivity values for Narrow Band Mask are expressed in dB on an arbitrary scale. Narrow band\nstops at 3400 Hz.\n\nBluetooth SIG Proprietary Page **142 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n## **14 Appendix E: Technical Specification of LC3-SWB**\n\n##### **14.1 Introduction**\n\nThis appendix describes the additions for defining the LC3-SWB codec. The additions are limited to LC3Codec ID and the LC3 parameter setup. All other parts of the LC3 definition remain unmodified.\n\n##### **14.2 Codec ID definition**\n\nLC3-SWB does not employ any additional frame header compared to mSBC.\n\nTable 14.1 represents the values of the LC3-SWB parameters that correspond to the values specified in\nthe Codec ID field. The Codec ID is used with the AT+BCS command, see Section 4.11.3.\n\n|8 bit Codec<br>ID|Mandatory<br>or Optional|LC3 Parameters|Col4|Col5|Col6|Col7|Col8|\n|---|---|---|---|---|---|---|---|\n|**8 bit Codec**<br>**ID**|**Mandatory**<br>**or Optional**|Channel<br>mode|Sampling<br>rate|byte_count|Bit<br>depth,<br>bits per<br>audio<br>sample|Frame<br>duration|Header<br>type|\n|0x03|M|Mono|32 kHz|58|16|7.5 ms|H2|\n\n##### **14.3 Padding**\n\nLC3-SWB does not employ any padding.\n\n##### **14.4 Handling of eSCO 16-bit CRC**\n\nThe erroneous data reporting feature (Volume 2, Part B in [1]) for the HCI Synchronous Data packets\nshall indicate lost data in the Packet Status flag.\n\nBluetooth SIG Proprietary Page **143 of 143**"
    },
    {
        "section_number": "1.4.1.1",
        "section_title": "Implementation alternatives",
        "granularity_level": 4,
        "content": "When specification content indicates that there are multiple alternatives to satisfy specification\nrequirements, if one alternative is explained or illustrated in an example it is not intended to limit other\nalternatives that the specification requirements permit."
    },
    {
        "section_number": "1.4.1.2",
        "section_title": "Discrepancies",
        "granularity_level": 4,
        "content": "It is the goal of Bluetooth SIG that specifications are clear, unambiguous, and do not contain\ndiscrepancies. However, members can report any perceived discrepancy by filing an erratum and can\nrequest a test case waiver as appropriate.\n\nCertain terms used in this specification have been updated and are no longer used by Bluetooth SIG. For\na list of terms that have been updated and their replacement terms, see the Appropriate Language\nMapping Tables [11].\n\n**1.4.2** **Reserved for Future Use**\nWhere a field in a packet, Protocol Data Unit (PDU), or other data structure is described as \"Reserved for\nFuture Use\" (irrespective of whether in uppercase or lowercase), the device creating the structure shall\nset its value to zero unless otherwise specified. Any device receiving or interpreting the structure shall\nignore that field; in particular, it shall not reject the structure because of the value of the field.\n\nBluetooth SIG Proprietary Page **15 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nWhere a field, parameter, or other variable object can take a range of values, and some values are\ndescribed as \"Reserved for Future Use,\" a device sending the object shall not set the object to those\nvalues. A device receiving an object with such a value should reject it, and any data structure containing\nit, as being erroneous; however, this does not apply in a context where the object is described as being\nignored or it is specified to ignore unrecognized values.\n\nWhen a field value is a bit field, unassigned bits can be marked as Reserved for Future Use and shall be\nset to 0. Implementations that receive a message that contains a Reserved for Future Use bit that is set\nto 1 shall process the message as if that bit was set to 0, except where specified otherwise.\n\nThe acronym RFU is equivalent to Reserved for Future Use.\n\n**1.4.3** **Prohibited**\nWhen a field value is an enumeration, unassigned values can be marked as “Prohibited.” These values\nshall never be used by an implementation, and any message received that includes a Prohibited value\nshall be ignored and shall not be processed and shall not be responded to.\n\nWhere a field, parameter, or other variable object can take a range of values, and some values are\ndescribed as “Prohibited,” devices shall not set the object to any of those Prohibited values. A device\nreceiving an object with such a value should reject it, and any data structure containing it, as being\nerroneous.\n\n“Prohibited” is never abbreviated.\n\nBluetooth SIG Proprietary Page **16 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n## **2 Profile Overview**\n\n##### **2.1 Protocol Stack**\n\n|Application<br>(Audio port emulation)|Col2|Col3|\n|---|---|---|\n|Hands-Free control|Hands-Free control|Hands-Free control|\n|RFCOMM|RFCOMM|SDP|\n|LMP|L2CAP|L2CAP|\n|Baseband|Baseband|Baseband|\n\n|s profile.|Col2|Col3|\n|---|---|---|\n|Application <br>(Audio driver)|Application <br>(Audio driver)|Application <br>(Audio driver)|\n|Hands-Free control|Hands-Free control|Hands-Free control|\n|RFCOMM <br>S|RFCOMM <br>S|DP|\n|LMP|L2CAP|L2CAP|\n|Baseband|Baseband|Baseband|\n\n**Audio Gateway side** **Hands-Free side**\n\nThe Baseband, LMP and L2CAP are the OSI layer 1 and 2 Bluetooth protocols. RFCOMM is the\nBluetooth serial port emulation entity. SDP is the Bluetooth Service Discovery Protocol. See [1] for more\ndetails on these topics.\n\nHands-Free control is the entity responsible for Hands-Free unit specific control signaling; this signaling is\nAT command based.\n\nAlthough not shown in the model above, it is assumed by this profile that Hands-Free Control has access\nto some lower layer procedures (for example, Synchronous Connection establishment).\n\nThe audio port emulation layer shown in Figure 2.1 is the entity emulating the audio port on the Audio\nGateway, and the audio driver is the driver software in the Hands-Free unit.\n\n##### **2.2 Configuration and Roles**\n\nFigure 2.2 shows typical configurations of devices for which the Hands-Free Profile is applicable:\n\nBluetooth SIG Proprietary Page **17 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nThe following roles are defined for this profile:\n\n**Audio Gateway (AG)** - This is the device that is the gateway of the audio, both for input and output.\nTypical devices acting as Audio Gateways are cellular phones.\n\n**Hands-Free unit (HF)** - This is the device acting as the Audio Gateway’s remote audio input and output\nmechanism. It also provides some remote control means.\n\nThese terms are used in the rest of this document to designate these roles.\n\n##### **2.3 User Requirements and Scenarios**\n\nThe following rules apply to this profile:\n\na) The profile states the mandatory and optional features when the “Hands-Free Profile” is active in the\n\nAudio Gateway and the Hands-Free unit.\n\nb) The profile mandates the usage of CVSD (see Volume 2, Part B, Section 9 in [1]) for transmission of\n\naudio (over the Bluetooth link). The resulting audio is monophonic, with a quality that, under normal\ncircumstances, does not have perceived audio degradation.\n\nc) Between the Hands-Free unit and the Audio Gateway, only one Audio Connection per Service Level\n\nConnection at a time is supported.\n\nd) Both the Audio Gateway and the Hands-Free unit may initiate Audio Connection establishment and\n\nrelease. Valid speech data shall exist on the Synchronous Connection in both directions after the\nAudio Connection is established. Since it is only the AG that knows if Wide Band Speech or Super\nWide Band Speech should be used, it should always be the AG that establishes the Synchronous\nConnection with the required codec.\n\ne) Whenever an “Audio Connection” exists, a related “Service Level Connection” shall also exist.\n\nf) The presence of a “Service Level Connection” shall not imply that an “Audio Connection” exists.\nReleasing a “Service Level Connection” shall also release any existing “Audio Connection” related to\nit.\n\n##### **2.4 Profile Fundamentals**\n\nIf an LMP link is not already established between the Hands-Free unit and the Audio Gateway, the LMP\nlink shall be set up before any other procedure is performed.\n\nThere are no fixed Central or Peripheral roles in the profile.\n\nThe Audio Gateway and Hands-Free unit provide serial port emulation. For the serial port emulation,\nRFCOMM (see [4]) is used. The serial port emulation is used to transport the user data including modem\ncontrol signals and AT command from the Hands-Free unit to the Audio Gateway. The AT commands are\nparsed by the Audio Gateway and responses are sent to the Hands-Free unit via the Bluetooth serial port\nconnection.\n\n##### **2.5 Conformance**\n\nEach capability of this specification shall be supported in the specified manner. This specification may\nprovide options for design flexibility, because, for example, some products do not implement every portion\nof the specification. For each implementation option that is supported, it shall be supported as specified.\n\nBluetooth SIG Proprietary Page **18 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n## **3 Application Layer**\n\nThis section describes the feature requirements for units complying with HFP.\n\nTable 3.1 shows the feature requirements for this profile.\n\n|Col1|Feature|Support in HF|Support in<br>AG|\n|---|---|---|---|\n|1.|Connection management|M|M|\n|2.|Phone status information|M**(note 1)**|M|\n|3.|Audio Connection handling|M|M|\n|4|Accept an incoming voice call|M|M|\n|5.|Reject an incoming voice call|M|O|\n|6.|Terminate a call|M|M|\n|7.|Audio Connection transfer during an ongoing call|M|M|\n|8.|Place a call with the phone number supplied by the HF|O|M|\n|9.|Place a call using memory dialing|O|M|\n|10.|Place a call to the last number dialed|O|M|\n|11.|Call waiting notification|O|M|\n|12.|Three-way calling|O**(note 2)**|O**(note 3)**|\n|13.|Calling Line Identification (CLI)|O|M|\n|14.|Echo canceling (EC) and noise reduction (NR)|O|O|\n|15.|Voice recognition activation|O|O|\n|16.|Attach a Phone number for a voice tag|O|O|\n|17.|Ability to transmit DTMF codes|O|M|\n|18.|Remote audio volume control|O|O|\n|19.|Respond and Hold|O|O|\n|20.|Subscriber Number Information|O|M|\n|21a.|Enhanced Call Status|O|M|\n|21b.|Enhanced Call Controls|O|O|\n|22.|Individual Indicator Activation|O|M|\n\nBluetooth SIG Proprietary Page **19 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n|Col1|Feature|Support in HF|Support in<br>AG|\n|---|---|---|---|\n|23|Wide Band Speech|O|O|\n|24|Codec Negotiation|O**(note 4)**|O**(note 4)**|\n|25|HF Indicators|O|O|\n|26|Super Wide Band Speech|O|O|\n|Note 1: The HF shall support at least the two indicators \"service\" and \"call\".<br>Note 2: If \"Three-way calling\" is supported by the HF, it shall support AT+CHLD values 1 and 2. The HF may<br>additionally support AT+CHLD values 0, 3 and 4.<br>Note 3: If \"Three-way calling\" is supported by the AG, it shall support AT+CHLD values 1 and 2.<br> <br>The AG may additionally support AT+CHLD values 0, 3, and 4.<br>Note 4: If Wide Band Speech or Super Wide Band Speech is supported, Codec Negotiation shall also be<br>supported.|Note 1: The HF shall support at least the two indicators \"service\" and \"call\".<br>Note 2: If \"Three-way calling\" is supported by the HF, it shall support AT+CHLD values 1 and 2. The HF may<br>additionally support AT+CHLD values 0, 3 and 4.<br>Note 3: If \"Three-way calling\" is supported by the AG, it shall support AT+CHLD values 1 and 2.<br> <br>The AG may additionally support AT+CHLD values 0, 3, and 4.<br>Note 4: If Wide Band Speech or Super Wide Band Speech is supported, Codec Negotiation shall also be<br>supported.|Note 1: The HF shall support at least the two indicators \"service\" and \"call\".<br>Note 2: If \"Three-way calling\" is supported by the HF, it shall support AT+CHLD values 1 and 2. The HF may<br>additionally support AT+CHLD values 0, 3 and 4.<br>Note 3: If \"Three-way calling\" is supported by the AG, it shall support AT+CHLD values 1 and 2.<br> <br>The AG may additionally support AT+CHLD values 0, 3, and 4.<br>Note 4: If Wide Band Speech or Super Wide Band Speech is supported, Codec Negotiation shall also be<br>supported.|Note 1: The HF shall support at least the two indicators \"service\" and \"call\".<br>Note 2: If \"Three-way calling\" is supported by the HF, it shall support AT+CHLD values 1 and 2. The HF may<br>additionally support AT+CHLD values 0, 3 and 4.<br>Note 3: If \"Three-way calling\" is supported by the AG, it shall support AT+CHLD values 1 and 2.<br> <br>The AG may additionally support AT+CHLD values 0, 3, and 4.<br>Note 4: If Wide Band Speech or Super Wide Band Speech is supported, Codec Negotiation shall also be<br>supported.|\n\nBluetooth SIG Proprietary Page **20 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nTable 3.2 maps each feature to the procedures used for that feature. All procedures are mandatory if the\nfeature is supported.\n\n|Col1|Feature|Procedure|Ref.|\n|---|---|---|---|\n|1.|Connection<br>management|Service Level Connection establishment|4.2|\n|1.|Connection<br>management|Service Level Connection release|4.3|\n|2.|Phone status<br>information|Transfer of Registration Status<br>Transfer of Signal Strength Indication<br>Transfer of Roaming Status Indication<br>Transfer of Battery Level Indication<br>Query of Operator Selection<br>Extended Audio Gateway Error Codes<br>Transfer of Call, Call Setup and Call<br>Held Status|4.4<br>4.5<br>4.6<br>4.7<br>4.8<br>4.9<br>4.10|\n|3.|Audio Connection<br>handling|Audio Connection set up<br>Audio Connection release<br>Codec Connection setup|4.11<br>4.12|\n|4.|Accept an incoming<br>voice call|Answer an incoming call|4.13|\n|5.|Reject an incoming<br>voice call|Reject an incoming call|4.14|\n|6.|Terminate a call|Terminate a call process|4.15|\n|7.|Audio Connection<br>transfer during an<br>ongoing call|Audio Connection transfer towards the<br>HF<br>Audio Connection transfer towards the<br>AG|4.16<br>4.17|\n|8.|Place a call with the<br>phone number supplied<br>by the HF|Place a call with the phone number<br>supplied by the HF|4.18|\n|9.|Place a call using<br>memory dialing|Memory dialing from the HF|4.19|\n|10.|Place a call to the last<br>number dialed|Last number re-dial from the HF|4.20|\n|11.|Call waiting notification|Call waiting notification activation|4.21|\n|12.|Three-way calling|Three-way call handling|4.22|\n|13.|Calling Line<br>Identification (CLI)|Calling Line Identification (CLI)<br>notification|4.23|\n\nBluetooth SIG Proprietary Page **21 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n|Col1|Feature|Procedure|Ref.|\n|---|---|---|---|\n|14.|Echo canceling (EC)<br>and noise reduction<br>(NR)|HF requests turning off the AG’s EC<br>and NR|4.24|\n|15.|Voice recognition<br>activation|Voice recognition activation|4.25|\n|16.|Attach a phone number<br>for a voice tag|Attach a voice tag to a phone number|4.27|\n|17.|Ability to transmit<br>DTMF codes|Transmit DTMF code|4.28|\n|18.|Remote audio volume<br>control|Remote audio volume control<br>Volume level synchronization|4.29|\n|19.|Response and Hold|Query response and hold status<br>Put an incoming call on hold from HF<br>Put an incoming call on hold from AG<br>Accept a held incoming call from HF<br>Accept a held incoming call from AG<br>Reject a held incoming call from HF<br>Reject a held incoming call from AG<br>Held incoming call terminated by caller|4.30<br>4.30<br>4.30<br>4.30<br>4.30<br>4.30<br>4.30<br>4.30|\n|20.|Subscriber Number<br>Information|Subscriber Number Information|4.31|\n|21a.|Enhanced Call Status|Query Call List|4.32|\n|21b.|Enhanced Call Control|Release Specified Call<br>Private Consult Mode|4.33<br>4.33|\n|22.|Individual Indicator<br>Activation|Indicators Activation and Deactivation|4.34|\n|23|Wide Band Speech|Wide Band Speech|10<br>11<br>12|\n|24|Codec Negotiation|Codec Negotiation|4.11|\n|25|HF Indicators|HF Indicators|4.35|\n|26|Super Wide Band<br>Speech|Super Wide Band Speech|Appendix E|\n\nTable 3.3 shows the codec requirements for this profile.\n\nBluetooth SIG Proprietary Page **22 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n|Col1|Codec|Support in HF|Support in<br>AG|\n|---|---|---|---|\n|1.|CVSD|M|M|\n|2.|mSBC|C.1|C.1|\n|3.|LC3-SWB|C.2|C.2|\n|**C.1**: Mandatory if Wide Band Speech is supported, or excluded otherwise<br>C.2: Mandatory if Super Wide Band Speech is supported, or excluded otherwise|**C.1**: Mandatory if Wide Band Speech is supported, or excluded otherwise<br>C.2: Mandatory if Super Wide Band Speech is supported, or excluded otherwise|**C.1**: Mandatory if Wide Band Speech is supported, or excluded otherwise<br>C.2: Mandatory if Super Wide Band Speech is supported, or excluded otherwise|**C.1**: Mandatory if Wide Band Speech is supported, or excluded otherwise<br>C.2: Mandatory if Super Wide Band Speech is supported, or excluded otherwise|\n\nTable 3.4 shows a summary of the mapping of codec requirements on link features for this profile.\n\n|Col1|Feature|Support in HF|Support in<br>AG|\n|---|---|---|---|\n|1.|D0 – CVSD on SCO link (HV1)|M|M|\n|2.|D1 – CVSD on SCO link (HV3)|M|M|\n|3.|S1 – CVSD eSCO link (EV3)|M|M|\n|4.|S2 – CVSD on EDR eSCO link (2-EV3)|M|M|\n|5.|S3 – CVSD on EDR eSCO link (2-EV3)|M|M|\n|6.|S4 – CVSD on EDR eSCO link (2-EV3)|M|M|\n|7.|T1 – mSBC on eSCO link (EV3)|C1|C1|\n|8.|T2 – mSBC on EDR eSCO link (2-EV3)|C1|C1|\n|9.|T1 – LC3-SWB on eSCO link (EV3)|C2|C2|\n|10.|T2 – LC3-SWB on EDR eSCO link (2-EV3)|C2|C2|\n|C1: Mandatory if Wide Band Speech is supported, excluded otherwise<br>C2: Mandatory if Super Wide Band Speech is supported, excluded otherwise|C1: Mandatory if Wide Band Speech is supported, excluded otherwise<br>C2: Mandatory if Super Wide Band Speech is supported, excluded otherwise|C1: Mandatory if Wide Band Speech is supported, excluded otherwise<br>C2: Mandatory if Super Wide Band Speech is supported, excluded otherwise|C1: Mandatory if Wide Band Speech is supported, excluded otherwise<br>C2: Mandatory if Super Wide Band Speech is supported, excluded otherwise|\n\nBluetooth SIG Proprietary Page **23 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n## **4 Hands-Free Control Interoperability Requirements**\n\n##### **4.1 Introduction**\n\nThe interoperability requirements for the Hands-Free Control entity are completely contained in this\nsection. Sections 4.2 through 4.29 specify the requirements for the procedures directly related to the\napplication layer features.\n\nThe procedures listed in this section are primarily based on the use of a minimum set of AT commands as\nthe control protocol. Section 5 specifies these AT commands and their result codes.\n\nSection 4.2 specifies how Service Level Connections are handled in general and specifically states how\nthe layers beneath the Hands-Free Control entity are used to establish and release a Service Level\nConnection.\n\n##### **4.2 Service Level Connection Establishment**\n\nUpon a user action or an internal event, either the HF or the AG may initiate a Service Level Connection\nestablishment procedure.\n\nA Service Level Connection establishment requires the existence of a RFCOMM connection, that is, a\nRFCOMM data link channel between the HF and the AG.\n\nBoth the HF and the AG may initiate the RFCOMM connection establishment. If there is no RFCOMM\nsession between the AG and the HF, the initiating device shall first initialize RFCOMM.\n\nThe RFCOMM connection establishment shall be performed as described in Generic Access Profile\n(Volume 3, Part C, Section 7.3 in [1]) and Section 6.1.1.\n\n**4.2.1** **Service Level Connection Initialization**\nWhen an RFCOMM connection has been established, the Service Level Connection Initialization\nprocedure shall be executed."
    },
    {
        "section_number": "4.2.1.1",
        "section_title": "Supported features exchange",
        "granularity_level": 4,
        "content": "First, in the initialization procedure, the HF shall send the AT+BRSF=<HF supported features> command\nto the AG to both notify the AG of the supported features in the HF, as well as to retrieve the supported\nfeatures in the AG using the +BRSF result code. [1]"
    },
    {
        "section_number": "4.2.1.2",
        "section_title": "Codec Negotiation",
        "granularity_level": 4,
        "content": "Secondly, in the initialization procedure, if the HF supports the Codec Negotiation feature, it shall check if\nthe AT+BRSF command response from the AG has indicated that it supports the Codec Negotiation\nfeature. If both the HF and AG do support the Codec Negotiation feature then the HF shall send the\nAT+BAC=<HF available codecs> command to the AG to notify the AG of the available codecs in the HF. [2]"
    },
    {
        "section_number": "4.2.1.3",
        "section_title": "AG Indicators",
        "granularity_level": 4,
        "content": "After having retrieved the supported features in the AG, the HF shall determine which indicators are\nsupported by the AG, as well as the ordering of the supported indicators. This is because, according to\nthe 3GPP 27.007 specification [2], the AG may support additional indicators not provided for by the\n\n1 Audio Gateways supporting the 0.96 version of Hands-Free Profile will return ERROR as a response to AT+BRSF\n\n2 Legacy devices shall not indicate support for the Codec Negotiation feature\n\nBluetooth SIG Proprietary Page **24 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nHands-Free Profile, and because the ordering of the indicators is implementation specific. The HF uses\nthe AT+CIND=? Test command to retrieve information about the supported indicators and their ordering.\n\nOnce the HF has the necessary supported indicator and ordering information, it shall retrieve the current\nstatus of the indicators in the AG using the AT+CIND? Read command.\n\nAfter having retrieved the status of the indicators in the AG, the HF shall then enable the \"Indicators\nstatus update\" function in the AG by issuing the AT+CMER command, to which the AG shall respond with\nOK. As a result, the AG shall send the +CIEV unsolicited result code with the corresponding indicator\nvalue whenever a change in service, call, or call setup status occurs. When an update is required for both\nthe call and call setup indicators, the AG shall send the +CIEV unsolicited result code for the call indicator\nbefore sending the +CIEV unsolicited result code for the call setup indicator. The HF shall use the\ninformation provided by the +CIEV code to update its own internal and/or external indications.\n\nOnce the \"Indicators status update\" function has been enabled, the AG shall keep the function enabled\nuntil either the AT+CMER command is issued to disable it, or the current Service Level Connection\nbetween the AG and the HF is dropped for any reason.\n\nAfter the HF has enabled the “Indicators status update” function in the AG, and if the “Call waiting and 3way calling” bit was set in the supported features bitmap by both the HF and the AG, the HF shall issue\nthe AT+CHLD=? test command to retrieve the information about how the call hold and multiparty services\nare supported in the AG. The HF shall not issue the AT+CHLD=? test command in case either the HF or\nthe AG does not support the \"Three-way calling\" feature."
    },
    {
        "section_number": "4.2.1.4",
        "section_title": "HF Indicators",
        "granularity_level": 4,
        "content": "If the HF supports the HF indicator feature, it shall check the +BRSF response to see if the AG also\nsupports the HF Indicator feature.\n\nIf both the HF and AG support the HF Indicator feature, then the HF shall send the AT+BIND=<HF\nsupported HF indicators> command to the AG to notify the AG of the supported indicators’ assigned\nnumbers in the HF. The AG shall respond with OK.\n\nAfter having provided the AG with the HF indicators it supports, the HF shall send the AT+BIND=? to\nrequest HF indicators supported by the AG. The AG shall reply with the +BIND response listing all HF\nindicators that it supports followed by an OK.\n\nOnce the HF receives the supported HF indicators list from the AG, the HF shall send the AT+BIND?\ncommand to determine which HF indicators are enabled. The AG shall respond with one or more +BIND\nresponses. The AG shall terminate the list with OK. (See Section 4.35.3).\n\nFrom this point onwards, the HF may send the AT+BIEV command with the corresponding HF indicator\nvalue whenever a change in value occurs of an enabled HF indicator.\n\nThe AG may enable or disable the notification of any HF indicator at any time by using the +BIND\nunsolicited response (See Section 4.35.4)."
    },
    {
        "section_number": "4.2.1.5",
        "section_title": "Completion of Service Level Connection Initialization",
        "granularity_level": 4,
        "content": "The HF shall consider the Service Level Connection fully initialized, and thereby established, in either of\nthe following cases:\n\n- After the HF has successfully retrieved information about HF indicators currently enabled by the AG\nusing the AT+BIND? command, if and only if the “HF indicators” bit was set in the HF supported\nfeatures bitmap and the AG supported features bitmap as exchanged via +BRSF command.\n\nBluetooth SIG Proprietary Page **25 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n- After the HF has successfully retrieved information about how call hold and multiparty services are\nsupported in the AG using the AT+CHLD command, if and only if the “Call waiting and 3-way calling”\nbit was set in the SupportedFeatures attribute of the SDP records for both HF and AG. This case\nshall apply when the “HF Indicators” bit is not set in the supported features bitmap for either the HF or\nthe AG as exchanged via +BRSF command.\n\n- After the HF has successfully enabled the “Indicator status update” using the AT+CMER command.\nThis case shall apply when the “Call waiting and 3-way calling” bit is not set in the\nSupportedFeatures attribute of the SDP records for either the HF or the AG, and when the “HF\nIndicators” bit is not set in the supported features bitmap for either the HF or the AG as exchanged\nvia +BRSF command.\n\nIf the HF receives an indication from the AG that a call is currently active, the HF may determine if an\nunanswered call is currently on hold by querying the Response and Hold state of the AG (see\nSection 4.30.1).\n\nThe AG shall consider the Service Level Connection to be fully initialized, and thereby established, in\neither of the following cases:\n\n- After the AG has successfully responded with information about which HF indicators are enabled on\nthe AG using +BIND as well as responded OK, if and only if the “HF Indicators” bit was set in the HF\nsupported features bitmap and the AG supported features bitmap as exchanged via +BRSF\ncommand.\n\n- After that the AG has successfully responded with information about how call hold and multiparty\nservices are supported in the AG using +CHLD as well as responded OK, if and only if the “Call\nwaiting and 3-way calling” bit was set in the SupportedFeatures of the SDP attribute for both HF and\nAG. This case shall apply when the “HF Indicators” bit is not set in the supported features bitmap for\neither the HF or the AG as exchanged via +BRSF command.\n\n- After the AG has successfully responded with OK to the AT+CMER command (to enable the\n“Indicator status update” function.) This case shall apply when the “Call waiting and 3-way calling” bit\nis not set in the supported features bitmap for either the HF or the AG, and when the “HF Indicators”\nbit is not set in the supported features bitmap for either the HF or the AG as exchanged via +BRSF\ncommand.\n\nSee Section 5 for more information on the AT+CIND, AT+CMER, AT+CHLD, AT+BAC and AT+BRSF\ncommands and the +CIEV unsolicited result code.\n\nBluetooth SIG Proprietary Page **26 of 143**\n\n**Hands-Free Profile /** Profile Specification"
    },
    {
        "section_number": "4.2.1.6",
        "section_title": "Service Level Connection Diagram",
        "granularity_level": 4,
        "content": "|HF AG<br>Internal ev<br>Internal event or<br>or user ac<br>user action<br>Service Level Connection<br>RFCOMM connection<br>Initialization Procedure<br>AT+BRSF=<HF supported features><br>The HF notifies the AG<br>about its own supported<br>features and the AG +BRSF: <AG supported features><br>responds with its supported<br>features. OK<br>AT+BAC=<HF Available Codecs ><br>The HF notifies the AG about<br>its own available codes if it<br>supports the Coded OK<br>Negotiation feature.<br>AT+CIND=?<br>The HF retrieves the<br>information describing the<br>+CIND:...<br>indicators supported in the<br>AG.<br>OK<br>AT+CIND?<br>The HF requests the current<br>status of indicators in the +CIND: ...<br>AG.<br>OK<br>AT+CMER<br>The HF requests enabling<br>Indicator Status update in<br>OK<br>the AG.<br>AT+CHLD=?<br>The HF retrieves the<br>information describing the<br>+CHLD:...<br>call hold and multiparty<br>serv ices supported in the<br>OK<br>AG.<br>AT+BIND=...<br>The HF lists supported Generic<br>Status Indicators.<br>OK<br>AT+BIND=?<br>The AG lists supported Generic<br>+BIND:…<br>Status Indicators.<br>OK<br>AT+BIND?<br>The AG lists initial enabled +BIND:…<br>or disabled state of Generic<br>+BIND:…<br>Status indicators<br>OK|Col2|\n|---|---|\n|The AG lists initial enabled<br>or disabled state of Generic<br>Status indicators <br>The AG lists supported Generic<br>Status Indicators. <br>The HF lists supported Generic<br>Status Indicators. <br>The HF retrieves the<br>information describing the<br>call hold and multiparty<br>services supported in the<br>AG. <br>The HF requests enabling<br>Indicator Status update in<br>the AG. <br>The HF requests the current<br>status of indicators in the<br>AG.<br>The HF retrieves the<br>information describing the<br>indicators supported in the<br>AG. <br>The HF notifies the AG<br>about its own supported<br>features and the AG<br>responds with its supported<br>features. <br>The HF notifies the AG about<br>its own available codes if it<br>supports the Coded<br>Negotiation feature.||\n\nBluetooth SIG Proprietary Page **27 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n**4.2.2** **Link Loss Recovery**\nThis section addresses the link loss recovery from an HF. The HF may reconnect with the AG whenever\nthere is loss of Bluetooth link.\n\nWhen a Service Level Connection is disconnected due to explicit termination at one end (using the\n\"Service connection release\" as described in Section Service Level Connection Release), then both\ndevices (AG and HF) shall wait for an explicit user action before an attempt is made to re-establish the\nService Level Connection.\n\nIf the HF determines that the Service Level Connection was disconnected due to a link supervision\ntimeout, then the HF may execute the \"Service Level Connection establishment\" procedure as described\nin Section 4.2 to establish a new Service Level Connection to the AG. Following a link loss due to link\nsupervision timeout, the HF shall not assume that the service level connection state from the previous\nconnection is valid (such as Call Status, Service Status).\n\n##### **4.3 Service Level Connection Release**\n\nThis section describes the procedure for releasing a Service Level Connection.\n\nThe disconnection of a Service Level Connection shall result in the immediate removal of the\ncorresponding RFCOMM data link channel between the HF and the AG. Also, an existing audio\nconnection has to be removed as a consequence of the removal of the Service Level Connection. The\nremoval of the L2CAP and link layers is optional.\n\nAn established Service Level Connection shall be released using a “Service Level Connection removal”\nprocedure.\n\n- Either the HF or AG shall initiate the “Service Level Connection release” procedure due to an explicit\nuser request.\n\n- The “Service Level Connection release” procedure shall be initiated if the Bluetooth functionality is\ndisabled in either the HF or AG.\n\n- The “Service Level Connection release” procedure may be initiated if an “Audio Connection transfer\ntowards the AG”, as stated in Section 4.17, is performed during an ongoing call in the AG. In the case\nthat the Service Level Connection is removed, the AG shall attempt to re-establish the Service Level\nConnection once the call is dropped.\n\nAs a precondition for this procedure, an ongoing Service Level Connection between the AG and the HF\nshall exist.\n\nBluetooth SIG Proprietary Page **28 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n##### **4.4 Transfer of Registration Status**\n\nThe AT+CMER command, as described in Section 5, enables the “Registration status update” function in\nthe AG.\n\nThe AT+BIA command, as described in Section 5.3, allows the HF to deactivate/reactivate individual\nindicators.\n\nWhen the CMER function is enabled and the registration status indicator has not been deactivated by the\nAT+BIA command, the AG shall send the +CIEV unsolicited result code with the corresponding service\nindicator and value whenever the AG's registration status changes. The HF shall be capable of\ninterpreting the information provided by the +CIEV result code to determine the service availability status\nas listed in Section 5.2.\n\nIf the CMER function is disabled or the indicator has been deactivated by the AT+BIA command, the AG\nshall not send the unsolicited result code.\n\n|HF AG<br>Established Service Level Connection<br>Internal e<br>Sta<br>gistration +CIEV: … The AG re<br>n the Reg|Col2|AG|Col4|\n|---|---|---|---|\n|HF <br>AG <br>+CIEV: …<br>  gistration<br> n <br>The AG re<br>the Reg<br>Internal e<br>Sta<br>Established Service Level Connection|HF <br>AG <br>+CIEV: …<br>  gistration<br> n <br>The AG re<br>the Reg<br>Internal e<br>Sta<br>Established Service Level Connection|AG|The AG re<br>the Reg<br>Internal e<br>Sta|\n|HF <br>AG <br>+CIEV: …<br>  gistration<br> n <br>The AG re<br>the Reg<br>Internal e<br>Sta<br>Established Service Level Connection|Established Service Level Connection|Established Service Level Connection|Established Service Level Connection|\n|HF <br>AG <br>+CIEV: …<br>  gistration<br> n <br>The AG re<br>the Reg<br>Internal e<br>Sta<br>Established Service Level Connection|+CIEV: …|+CIEV: …|+CIEV: …|\n\n##### **4.5 Transfer of Signal Strength Indication**\n\nThe AT+CMER command, as described in Section 5, enables the “Signal strength Indication” function in\nthe AG.\n\nThe AT+BIA command, as described in Section 5.3, allows the HF to deactivate/reactivate individual\nindicators.\n\nWhen the CMER function is enabled and the indicator has not been deactivated by the AT+BIA\ncommand, the AG shall send the +CIEV unsolicited result code with the corresponding signal strength\nindicator and value whenever the AG's signal strength changes. The HF shall be capable of interpreting\nthe information provided by the +CIEV result code to determine the signal strength as listed in Section\n5.2.\n\nIf the CMER function is disabled or the indicator has been deactivated by the AT+BIA command, the AG\nshall not send the unsolicited result code.\n\nBluetooth SIG Proprietary Page **29 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nInternal event: Signal\nstrength Status changes\n\nthe signal strength Status\n\n|HF|Col2|\n|---|---|\n|||\n||Established service level connection|\n||+CIEV: <Signal strength Ind>,<Value>|\n\nAs a result, the AG shall send the +CIEV unsolicited result code with the corresponding signal strength\nvalue whenever its signal strength changes.\n\n##### **4.6 Transfer of Roaming Status Indication**\n\nThe AT+CMER command, as described in Section 5, enables the “Roaming Status Indication” function in\nthe AG.\n\nThe AT+BIA command, as described in Section 5.3, allows the HF to deactivate/reactivate individual\nindicators.\n\nWhen the CMER function is enabled and the indicator has not been deactivated by the AT+BIA\ncommand, the AG shall send the +CIEV unsolicited result code with the corresponding roaming status\nindicator and value whenever the AG's roaming status changes. The HF shall be capable of interpreting\nthe information provided by the +CIEV result code to determine the roaming status as listed in Section\n5.2.\n\nIf the CMER function is disabled or the indicator has been deactivated by the AT+BIA command, the AG\nshall not send the unsolicited result code.\n\nBluetooth SIG Proprietary Page **30 of 143**\n\n|Col1|HF|Col3|AG<br>blished Service Level<br>Internal even<br>Roaming Stat<br>changes<br><RoamingInd>,<Value><br>[The AG reports the cha<br>the Roaming Statu|\n|---|---|---|---|\n|||+CIEV:<br>Esta|+CIEV:<br>Esta|\n|||||\n\n**Hands-Free Profile /** Profile Specification\n\n##### **4.7 Transfer of Battery Level Indication of AG**\n\nThe AT+CMER command, as described in Section 5 enables the “Battery Level Indication” function in the\nAG.\n\nThe AT+BIA command, as described in Section 5.3, allows the HF to deactivate/reactivate individual\nindicators.\n\nWhen the CMER function is enabled and the indicator has not been deactivated by the AT+BIA\ncommand, the AG shall send the +CIEV unsolicited result code with the corresponding battery level\nindicator and value whenever the AG's battery level changes. The HF shall be capable of interpreting the\ninformation provided by the +CIEV result code to determine the battery level as listed in Section 5.2.\n\nIf the CMER function is disabled or the indicator has been deactivated by the AT+BIA command, the AG\nshall not send the unsolicited result code.\n\nInternal event: Battery level\n\nthe Battery Status\n\n|HF|Col2|\n|---|---|\n|||\n||Established service level connection|\n||+CIEV: <Battery level Ind>,<Value>|\n\nBluetooth SIG Proprietary Page **31 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n##### **4.8 Query Operator Selection**\n\nThe HF shall execute this procedure to find out the name of the currently selected Network operator by\nAG.\n\nThe following precondition applies for this procedure:\n\n- An ongoing connection between the AG and the HF shall exist. If this connection did not exist, the AG\nshall establish a connection using “Service Level Connection set up” procedure described in\nSection 4.2.\n\nto be sent once)\n\nNetwork Name\n\n|H<br>ork<br>needs<br>rent|F A|G<br>The AG r<br>current N<br>operator<br>alphanum|\n|---|---|---|\n|H<br>   rent<br>    ork<br> <br>  needs|Established  service level connection|Established  service level connection|\n|H<br>   rent<br>    ork<br> <br>  needs|+COPS: <mode>, 0, <operator><br>AT+COPS?<br>OK<br>AT+COPS=3,0<br>OK|+COPS: <mode>, 0, <operator><br>AT+COPS?<br>OK<br>AT+COPS=3,0<br>OK|\n\n- HF shall send AT+COPS=3,0 command to set name format to long alphanumeric. Long alphanumeric\nis defined as a maximum of 16 characters. The value of 3 as the first parameter indicates that this\ncommand is only affecting the format parameter (the second parameter). The second parameter, 0, is\nthe value required to set the format to “long alphanumeric.”\n\n- Upon an internal event or user-initiated action, HF shall send the AT+COPS? (Read) command to\nfind the currently selected operator.\n\n- AG shall respond with +COPS response indicating the currently selected operator. If no operator is\nselected, <format> and <operator> are omitted.\n\n##### **4.9 Report Extended Audio Gateway Error Results Code**\n\nThe HF shall execute this procedure to enable/disable Extended Audio Gateway Error result codes in the\nAG.\n\nBluetooth SIG Proprietary Page **32 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nThe following precondition applies for this procedure:\n\n- An ongoing connection between the AG and the HF shall exist. If this connection did not exist, the AG\nshall establish a connection using “Service Level Connection set up” procedure described in\nSection 4.2.\n\n- The HF shall issue the AT+CMEE command to enable/disable the “Extended Audio Gateway Error\nResult Code” in the AG. The parameter <n> controls the activation/deactivation of the “Extended\nError result code” notification.\n\n- Whenever there is an error relating to the functionality of the AG as a result of AT command, the AG\nshall send +CME ERROR: <err> response to the HF.\n\n##### **4.10 Transfer of Call, Call Setup, and Held Call Status**\n\nThe AT+CMER command, as described in Section 5, enables the “Call Status indicators update” function\nin the AG.\n\nThe AT+BIA command, as described in Section 5.3, allows the HF to deactivate/reactivate individual\nindicators. The AT+BIA command shall have no effect on the Call, Call Setup, or Held Call indicators.\nThese indicators cannot be deactivated using the AT+BIA command.\n\nWhen the CMER function is enabled, the AG shall issue a +CIEV unsolicited result code with the\ncorresponding call indicator and value whenever the AG's current call status changes. Likewise, the AG\nshall issue a +CIEV unsolicited result code with the corresponding callsetup indicator and value whenever\nthe AG's current call setup status changes. The AG shall also issue a +CIEV unsolicited result code with\ncorresponding callheld indicator and value whenever the AG’s current held call status changes.\n\nIf the CMER function is disabled, the AG shall not send the unsolicited result code.\n\nThe HF shall be capable of interpreting the information provided by the +CIEV result code to determine\nthe call status as listed in Section 5.2.\n\nFurthermore, the HF may also be capable of interpreting the optional callsetup state information provided\nby the +CIEV result code as listed in Section 5.2.\n\nThe HF shall be able to accept unknown indicators provided by the +CIEV result code. The HF may\nignore unknown indicators provided by the +CIEV result code.\n\nBluetooth SIG Proprietary Page **33 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nNote: Although the HF is required to parse the +CIEV result codes, the HF is not required to provide\nUser Interface indicators for the +CIEV result codes."
    },
    {
        "section_number": "6.7.1.1",
        "section_title": "Selection of Synchronous Transport",
        "granularity_level": 4,
        "content": "The device starting the request for a Synchronous Connection is known as the Initiator and the device\nreceiving the request is known as the Responder. The Responder may accept or reject a request for a\nlogical transport\n\nTo select the type of synchronous transport (eSCO or SCO) to use, devices shall adhere to the following\nlogic:\n\n  - If eSCO is supported by the responder, the synchronous connection shall first be attempted on an\neSCO logical transport. See section 6.7.1.2.\n\n  - If eSCO is unavailable for use (e.g., not supported by the Responder or link establishment fails),\nand SCO is not currently forbidden because a BR/EDR secure connection is being used, the\nInitiator shall open a SCO logical connection. See section 6.7.1.3."
    },
    {
        "section_number": "6.7.1.2",
        "section_title": "Negotiation of eSCO Configuration Parameters",
        "granularity_level": 4,
        "content": "In this section, HCI level parameters are given as a reference. On systems not incorporating HCI,\nequivalent values for LMP level eSCO connection parameters TeSCO, WeSCO and packet length that\ncorrespond to those HCI parameters shall be used. The following requirements apply to the support and\nuse of eSCO logical transports and are based on parameter sets S1-S4 and T1-T2:\n\n- The Initiator’s request for an eSCO transport may involve any configuration parameters matching the\nbidirectional throughput requirements of the voice codec (see Section 6.5). If an HCI is supported on\nthis device, the request for setting up a synchronous connection may include single or multiple packet\ntypes masked within the same request.\n\n- The Responder may choose to accept or reject the request from the Initiator. It may reject the request\nfor an eSCO transport, or may accept it with parameters that do not match the requested parameters.\nIn this case, the Initiator may retry the Synchronous Connection setup with different configuration\nparameters.\n\n- It is recommended to use the S4 or T2 settings when BR/EDR Secure Connections is in use, when\nusing complicated topologies, or when a device wants to improve coexistence with other wireless\ntechnologies.\n\n- If the request for S4, S3 or T2 has failed and the Initiator needs to employ a time-division based\nsolution to MWS Coexistence, the Initiator should make its best efforts to reconfigure its MWS radio\nso that it no longer needs to employ a time-division based solution to MWS Coexistence. For\nexample, an AG might have the opportunity to change the cellular frequency band it is using in order\nto allow the MWS Coexistence features to be turned off for the duration of the synchronous\nconnection.\n\n- A device shall accept to use the S4 or T2 settings when requested by the remote device. Devices\nsupporting only 1.7.1 or earlier versions of this profile might refuse the S4 setting, in which case the\ninitiating device should request the S3 setting.\n\nBluetooth SIG Proprietary Page **114 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n- If a request for an eSCO logical transport fails, the Initiator shall not abandon the setup of an eSCO\ntransport without having requested eSCO using the “safe settings” specified in the following table:\n\n|Col1|CVSD<br>coding|mSBC<br>coding|LC3-SWB<br>coding|\n|---|---|---|---|\n|**If BR/EDR Secure Connections is not in use on the**<br>**connection**|**S1**|**T1**|**T1 **|\n|**If BR/EDR Secure Connections is in use on the**<br>**connection**|**S4**|**T2**|**T2 **|\n\n- Only for HCI-based devices: if the Responder does not reject the request for an eSCO transport, the\nresponse shall always include the parameters corresponding to the “safe settings” specified in Table\n6.10 when accepting a request. If the Initiator fails to establish an eSCO transport with the S1\nsettings, the Initiator shall request the setup of a SCO transport, if not currently forbidden because a\nBR/EDR secure connection is being used.\n\n- If Wide Band Speech or Super Wide Band Speech is supported, and the Initiator fails to establish an\neSCO transport with the T1 settings, or the Initiator fails to establish an eSCO transport with the T2\nsettings if Secure Connections is in use, the Initiator shall attempt to set up a Codec Connection\nusing the narrow band CVSD codec over eSCO (or SCO transport if not currently forbidden because\na BR/EDR secure connection is being used)."
    },
    {
        "section_number": "6.7.1.3",
        "section_title": "Negotiation of SCO Configuration Parameters",
        "granularity_level": 4,
        "content": "Requirements related to the use of SCO links, under the conditions when the use of a SCO logical\ntransport is permitted, are covered by the parameter sets D0-D1.\n\n**6.7.2** **Synchronization Header for Transparent Data**\nTwo synchronization headers have been defined; the first one only contains a sequence number. The\nsecond one has both a synchronization word and a sequence number.\n\nH1: Header with sequence number\n\nFigure 6.3 shows the layout of the header H1 that only contains the sequence number. The one octet\nheader shall contain a 4 bit sequence number (SN0,…, SN3). The sequence number is protected by a\nsimple repetition code (all bits are duplicated). Hence, each sequential pair of bits in the sequence\nnumber shall be always 00 or 11.\n\n0 7\n\nWhen using the Erroneous data delivery feature, the sequence number in the H1 header shall always be\ndifferent from 0. The reason is that the Erroneous data delivery feature sets 0 for payload data octets\ncorresponding to missing (e)SCO packets.\n\nBluetooth SIG Proprietary Page **115 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nH2: Header with synchronization word and sequence number\n\nFigure 6.4 shows the layout of the header H2 that contains both the synchronization word and the\nsequence number. The two octet header shall contain a 12 bit synchronization word and a 2 bit sequence\nnumber (SN0, SN1). The latter is protected by a simple repetition code (both bits are duplicated). Hence,\neach pair of bits in the sequence number shall be always 00 or 11.\n\n0 7 0 7\n\nIt should be noted that when the transparent data transport is used, any alignment of the coded audio\nstream frames (codec frames and synchronization word) with eSCO packet boundaries is left up to the\nimplementation. The use of the synchronization header enables unaligned codec audio frames to be\nrecovered by the receiving side. To successfully render audio, the receiving side shall not assume the\nlocation of the synchronization header within the eSCO packets. The receiving side shall be capable of\nrendering received audio.\n\n**6.7.3** **CVSD coding**\nTable 6.11 defines SCO configuration parameter sets D0 and D1 for usage of CVSD coding.\n\n|SCO parameter set|D0|D1|\n|---|---|---|\n|Packet type|HV1|HV3|\n|Transmit/Receive Bandwidth|8000|8000|\n|Voice_Setting (air coding)|CVSD|CVSD|\n|Max_Latency|0x0004 (4 ms)|0x0005 (5 ms)|\n|Retransmission_Effort|0x00 or 0xFF|0x00 or 0xFF|\n\nTable 6.12 defines eSCO configuration parameter sets S1, S2, S3 and S4 for usage of CVSD coding.\n\n|eSCO parameter set|S1|S2|S3|S4|\n|---|---|---|---|---|\n|Packet type|EV3|2-EV3|2-EV3|2-EV3|\n|Transmit/Receive Bandwidth|8000|8000|8000|8000|\n|Voice_Setting (air coding)|CVSD|CVSD|CVSD|CVSD|\n|Max_Latency|0x0007 (7 ms)|0x0007 (7 ms)|0x000A (10ms)|0x000C (12ms)|\n|Retransmission_Effort|0x01|0x01|0x01|0x02|\n\nBluetooth SIG Proprietary Page **116 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n**6.7.4** **mSBC coding**\nSupport for a modified version of the SBC codec (hereafter called mSBC) is mandatory if Wide Band\nSpeech is supported in this profile. The original SBC codec is specified in A2DP [7]. The modifications to\nSBC that constitute mSBC are specified in Appendix A of this profile.\n\nThe various mandatory and optional settings for this codec are specified in the tables below.\n\nSupport for the following mSBC configuration is mandatory if Wide Band Speech is supported.\n\n|Parameter|Value|\n|---|---|\n|Channel mode|Mono|\n|Sampling rate|16 kHz|\n|Allocation method|Loudness|\n|Subbands|8|\n|Blocklength|15|\n|Bitpool|26|\n\nAn mSBC frame shall have the synchronization header H2 before every frame. The H2 header allows the\nreceiver to know if one or more radio link packets are dropped.\n\nWide Band Speech, when using the mSBC codec, shall only use the eSCO transport. The eSCO T1\nsetting below shall be supported.\n\n|eSCO parameter set|T1|T2|\n|---|---|---|\n|Packet type|EV3|2-EV3|\n|Transmit/Receive Bandwidth|8000|8000|\n|Voice_Setting (air coding)|Transparent Data|Transparent Data|\n|Max_Latency|8 ms|13 ms|\n|Retransmission_Effort|0x02|0x02|\n\n_Speech connection using the LC3-SWB codec._\n\n**6.7.5** **Codec vs Link Parameter Negotiation**\nThe Codec Negotiation procedure defined in this profile determines which codec to use when establishing\nan audio connection. This procedure is not used to negotiate the link parameters used with the selected\ncodec. The link parameters are negotiated by the link managers using the link manager protocol.\n\nThe recommended link parameters are:\n\n- For CVSD: S4 is preferred over S3, S3 is preferred over S2, S2 is preferred over S1, S1 is preferred\nover D1 and D1 is preferred over D0. The decision to use S4 may also be based on implementationspecific coexistence use cases.\n\n- For mSBC: T2 is preferred over T1.\n\nBluetooth SIG Proprietary Page **117 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n- For LC3-SWB: T2 is preferred over T1.\n\n**6.7.6** **LC3-SWB coding**\nSupport for the LC3-SWB codec is mandatory if Super Wide Band Speech is supported in this profile. The\ncodec is specified in the LC3 Specification [10]. The AG and the HF shall implement both the encoder\nand decoder of the LC3-SWB codec.\n\nThe settings for LC3-SWB are specified in Table 6.14 and Table 6.15.\n\nSupport for the configuration shown in Table 6.15 is mandatory if Super Wide Band Speech is supported.\n\n|Parameter|Value|\n|---|---|\n|Channel mode|Mono|\n|Sampling rate|32 kHz|\n|Frame duration|7.5 ms|\n|Byte count per codec frame<br>(excluding H2 header)|58|\n|Resulting bit rate (excluding<br>H2 header)|61867 bits/s|\n\nSee Section 3.2.5 in [10] for the relation between the values of bit rate and the byte count.\n\nAn LC3-SWB frame shall have the synchronization header H2 before every frame. The 2-byte H2 header\nenables the receiver to determine if one or more radio link packets are dropped.\n\nSuper Wide Band Speech, when using LC3-SWB, shall use only the eSCO transport. The eSCO T1\nsetting shown in Table 6.14 shall be supported.\n\n##### **6.8 Speech Quality Recommendations**\n\nThe introduction of Wide Band Speech and Super Wide Band Speech to the HFP profile allows for\nincreased end-customer satisfaction in terms of perceived speech quality. Super Wide Band Speech\ncorresponds to the maximum audio bandwidth provided in 5G voice services and provided by many overthe-top (OTT) voice services. The available codec with the highest audio quality should be used. For\nexample, Super Wide Band Speech is preferred over Wide Band Speech, and Wide Band Speech is\npreferred over narrow band speech connections.\n\n**6.8.1** **Packet Loss Concealment (PLC)**\nIt is strongly recommended that some form of PLC should be implemented on the receiving ends of\ncompressed audio (such as mSBC and LC3-SWB) to reduce synthesized audio artifacts during degraded\nchannel conditions.\n\nFor mSBC, the example PLC algorithm provided in Appendix C may be used. The speech quality of this\nexample PLC under typical packet loss conditions is considered satisfactory. If implementations choose\nto modify or implement an alternate PLC scheme, the performance of any such alternate PLC should\nmeet or exceed the performance of the example PLC provided in Appendix C.\n\nBluetooth SIG Proprietary Page **118 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\nThe LC3 specification [10] also provides an example PLC algorithm that may be used with Super Wide\nBand Speech (see Appendix B in [10]).\n\n**6.8.2** **Signal Levels**\nFull swing at the 16 bit linear PCM interface to the codecs in this profile specification is defined to be\n3 dBm0. This definition applies to devices that support narrow band, Wide Band Speech, and Super Wide\nBand Speech.\n\nFurther details on recommended audio levels are specified in Appendix D, Section 13.1.\n\nRecommended specifications for send and receive frequency masks are provided in Appendix D,\nSection 13.2.\n\nBluetooth SIG Proprietary Page **119 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n## **7 Generic Access Profile**\n\nThis section defines the support requirements for the capabilities as defined in the “Generic Access\nProfile” of the Core Specification.\n\n##### **7.1 Modes**\n\nTable 7.1 shows the support status for GAP Modes in this profile.\n\n|Procedure|Support in HF|\n|---|---|\n|General discoverable mode|M|\n|**Procedure**|**Support in AG**|\n|Pairable mode|M|\n\n##### **7.2 Security Aspects**\n\nBaseband authentication and encryption is optional for both the Hands-Free unit and the Audio Gateway.\nIf both devices support authentication and encryption, the application on either device may require its use.\nHowever, if Secure Connections is supported by both devices, its use is mandated by the Bluetooth Core\n4.1 Specification (or later).\n\nA Hands-Free unit may be able to use the services of the Audio Gateway without the creation of a secure\nconnection. It is implementation specific whether the Hands-Free unit provides or supports security\nenforcement for the user.\n\nWhenever baseband authentication or encryption is used, the two devices shall create a secure\nconnection using the GAP authentication procedure as described in Generic Access Profile (Volume 3,\nPart C, Section 5.1 in [1]). This procedure may include entering a Bluetooth PIN code or passkey and\ncreation of proper link keys. If Simple Secure Pairing is not in use and when the UI of the Hands-Free unit\nis limited, a fixed Bluetooth PIN code may be used during the GAP authentication procedure.\n\nIf Secure Connections is used, the Authenticated Payload Timeout should be less than or equal to 10s.\nThe disconnection behavior following a timeout is implementation specific.\n\n##### **7.3 Idle Mode Procedures**\n\nTable 7.2 shows the support status for Idle mode procedures within this profile.\n\n|Procedure|Support in AG|\n|---|---|\n|Initiation of general inquiry|M|\n|Initiation of general bonding|O|\n|Initiation of dedicated bonding|O|\n\nBluetooth SIG Proprietary Page **120 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n## **8 References**\n\n[1] Bluetooth Core Specification, Version 4.2 or later\n\n[2] 3GPP 27.007 v6.8.0 now supersedes and replaces ETS 300 916, “Digital cellular\ntelecommunications system (Phase 2+); AT command set for GSM Mobile Equipment (ME) (GSM\n07.07 version 7.5.0),” http://www.3gpp.org/ftp/Specs/html-info/27007.htm\n\n[3] Headset Profile Specification, Version 1.1 or later\n\n[4] RFCOMM with TS 07.10 Specification, Version 1.2 or later\n\n[5] ITU-T50, Terminal Equipment and Protocols for telematic services: International Reference\nAlphabet (IRA) (Formerly International Alphabet No. 5 IA5). Information technology – 7-Bit coded\ncharacter set for information interchange\n\n[6] Digital cellular telecommunication system (Phase 2+); Mobile radio interface layer 3 specification,\n(GSM 04.08 version 6.11.0)\n\n[7] Advanced Audio Distribution Profile Specification, Version 1.2 or later\n\n[8] Bluetooth Assigned Numbers, https://www.bluetooth.com/specifications/assigned-numbers\n\n[9] D. Goodman, et al., “Waveform Substitution Techniques for Recovering Missing Speech Segments\nin Packet Voice Communications”, IEEE Transaction on Acoustics, Speech and Signal Processing,\nDecember 1986, pp. 1440 - 1448.\n\n[10] Low Complexity Communication Codec Specification, Version 1.0\n\n[[11] Appropriate Language Mapping Tables, https://www.bluetooth.com/language-mapping/Appropriate-](https://www.bluetooth.com/language-mapping/Appropriate-Language-Mapping-Table)\n\n[Language-Mapping-Table](https://www.bluetooth.com/language-mapping/Appropriate-Language-Mapping-Table)\n\nBluetooth SIG Proprietary Page **121 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n## **9 List of Acronyms and Abbreviations**\n\n|Abbreviation<br>or Acronym|Meaning|\n|---|---|\n|AG|Audio Gateway|\n|AT|Attention|\n|BTR|Bluetooth Reference Point|\n|BVRA|BluetoothVoice Recognition Activation|\n|CLI|Calling Line Identification|\n|CODEC|COder DECoder|\n|CVSD|Continuously Variable Slope Delta modulation|\n|DTMF|Dual Tone Multi-Frequency|\n|EC|Echo Cancellation|\n|EDR|Enhanced Data Rate|\n|eSCO|Extended Synchronous Connection Oriented|\n|GAP|Generic Access Profile|\n|GSM|Global System for Mobile communication|\n|HF|Hands-Free unit|\n|L2CAP|Logical Link Control and Adaptation Protocol|\n|LC3|Low Complexity Communication Codec|\n|LMP|Link Manager Protocol|\n|mSBC|Modified Sub Band Codec|\n|NR|Noise Reduction|\n|OSI|Open System Interconnection|\n|OTT|Over-the-top|\n|PCM|Pulse Code Modulation|\n|PLC|Packet Loss Concealment|\n|PIN|Personal Identification Number|\n|POI|Point Of Interconnection|\n|RFCOMM|Serial port transport protocol over L2CAP|\n|SBC|Sub Band Codec|\n|SCO|Synchronous Connection Oriented|\n|SDP|Service Discovery Protocol|\n|SWB|Super Wide Band|\n\nBluetooth SIG Proprietary Page **122 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n|Abbreviation<br>or Acronym|Meaning|\n|---|---|\n|UI|User Interface|\n|UUID|Universally Unique Identifier|\n|VR|Voice Recognition|\n\nBluetooth SIG Proprietary Page **123 of 143**\n\n**Hands-Free Profile /** Profile Specification\n\n## **10 Appendix A: Technical Specification of mSBC**\n\n##### **10.1 Introduction**\n\nThis appendix describes the changes to the SBC codec defined in A2DP [7] standard which comprises\nthe Modified SBC codec. The changes to the A2DP SBC are limited to the frame header syntax and\nsemantics. All other parts of the SBC definition remain un-modified."
    }
]