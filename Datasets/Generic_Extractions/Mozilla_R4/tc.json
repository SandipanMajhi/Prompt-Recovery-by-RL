[
    {
        "feature": "Global History",
        "sub_feature": "Record sites",
        "description": "Verify that visited links are recorded.",
        "tc_name": {
            "title": "record-links",
            "content": "https://www-archive.mozilla.org//quality/browser/front-end/testcases/history/record-links"
        },
        "test_case": [
            {
                "title": "Purpose",
                "content": "This basic testcase is designed to verify that links are properly added to the\nglobal history file."
            },
            {
                "title": "Initial Conditions",
                "content": "* You must have used the installation of the browser you plan to test.\n  * If you have not, browse around some, then come back. Or run the [gomenu-list](/quality/browser/front-end/testcases/history/gomenu-list) test first."
            },
            {
                "title": "Steps/Description",
                "content": "1. Select Go|History.\n  2. Observe the contents of the Global History Window.\n  3. Quit and restart the browser.\n  4. Select Go|History."
            },
            {
                "title": "Expected Results",
                "content": "1. If you've observed the initial conditions, the History window should be non-empty upon first observation.\n  2. After restart, the History window should still be non-empty."
            }
        ],
        "reference": [
            {
                "title": "Contents",
                "content": "* 1 Introduction\n  * 2 Places history features\n  * 3 Example\n  * 4 Bookmark pages and notes\n  * 5 Required information\n  * 6 Database design\n  * 7 Performance\n    * 7.1 Link coloring\n    * 7.2 Database size"
            },
            {
                "title": "Introduction",
                "content": "The places history system is a redesign of the Firefox global history system\nusing the new SQLite-based mozStorage APIs. This system provides additional\nperformance, flexibility, and querying capabilities.\n\nSee also:\n\n  * [Places](/Places \"Places\")\n  * [Annotations](/Annotations \"Annotations\")\n  * [Firefox:2.0_Bookmarks](/Firefox:2.0_Bookmarks \"Firefox:2.0 Bookmarks\")"
            },
            {
                "title": "Places history features",
                "content": "The major places history views will be queries over places visited by time.\nThe user will be able to select any date range and see when they visited each\npage. Actually showing which pages were visited during a given time period\nmeans we will have to store every time the user visits any page, rather than\njust the last visit time. This fixes some problems with the old history system\nwhere items would move around if you visited them again.\n\nThese view should be as organized and as concise as possible. The old history\nsystem includes many redirect pages in the view, and doesn't have things like\nfavicons and good grouping that might make it easier to locate pages of\ninterest. As a result, favicons for every page will be stored for viewing in\nhistory, and we will provide better domain-style grouping and a calendar for\npicking days rather than a tree view.\n\nThe second most user-visible history feature will be keyword searching. This\nwill be essentially unchanged from the old system, which is too bad because\nthe current system sucks. Because there is no word index, we do a brute-force\nsearch over all titles for the keyword in question. While sometimes useful,\nthis is not always what you want, resulting in a number of third-party history\nindexing products. Long term, it would be nice to index pages you visit. For\nthe coming release it might be nice to provide a hook for third-party products\nso they can provide text searching capabilities to the places system.\n\nThe last major change will be the ability to define complex queries over the\nhistory and bookmark systems. Most users will not be generating such queries,\nbut they can be used to provide a variety of nice features. For example, a\nquery folder can be created for \"My favorite pages\" which contains the 20 most\nfrequently visited URLs in history. A query for the most frequently visited\npages that are not bookmarked provides a good candidate list for suggesting\nbookmarks."
            },
            {
                "title": "Example",
                "content": "This screenshot shows some of these ideas:\n\n[](/File:History_grouping.png)  \n_Image credit: Brett Wilson,<http://maxradi.us/>_\n\nAll pages have favicons for better visual differentiation and grouping. Pages\nare arranged into \"sessions\" consisting of followed links. Typing a new URL or\nfollowing a bookmark gives you a new \"session\" which appears as a dotted line\nin this image. This is an actual screenshot, but the ugly redirect pages have\nbeen manually removed. Proper tracking of redirect pages is pending, see\n[Browser_History:Redirects](/Browser_History:Redirects \"Browser\nHistory:Redirects\").\n\nAn informal goal is to save and expose enough information for a variety of\ninteresting visualization or suggestion extensions to be created. For example:\n\n  * A graph of the user's browsing behavior, showing which pages were visited and when and how the user navigated between them.\n  * Suggesting links. By looking at what link the user frequently visits from the current page, perhaps some sort of suggestion or prefetching could take place. For some pages, this indication would be very strong. Other AI-like things could potentially be done. For example, many people visit the same set of sites when they open the browser in the morning. It would be nice if something could be done to make this nicer."
            },
            {
                "title": "Bookmark pages and notes",
                "content": "Firefox 2 will likely have some kind of bookmark button for easy bookmarking\nof pages. This button will be illuminated whenever the user is on a bookmarked\npage, but redirects provide an extra problem. If the bookmark page is moved,\nor more commonly, if the user manually sets a bookmark, for example\n\"amazon.com\", they will be redirected. This destination page won't be\nbookmarked, so the button will not be illuminated. The old history system also\nhad problems with redirected bookmarks because the favicons would never get\nset properly. Therefore, we need to know more about redirects to handle these\ncases correctly.\n\nIf other annotations are stored with pages, redirects could also pose\nproblems. For example, if I have notes on a page and it is redirected, my\nnotes will not be available to me. There should be a way for services using\nannotation functionality to see if the current page was ever redirected from\nsomewhere else, and to also check those pages for annotations of interest.\nMore on redirects can be read on\n[Browser_History:Redirects](/Browser_History:Redirects \"Browser\nHistory:Redirects\")."
            },
            {
                "title": "Required information",
                "content": "It will be necessary to collect and store much more information than is done\nin the old history system. To extract information about sequences of page\nviews, we need to know exactly which page generated each navigation. Because\nthe same page could be opened in more than one tab/window at once, the URL is\nnot sufficient for this task."
            },
            {
                "title": "Database design",
                "content": "The history will be stored in two SQL tables — \"moz_history\" and\n\"moz_historyvisit\".\n\nThe \"history\" table essentially duplicates the functionality of the current\n[Mork](/Mork \"Mork\") history table: It contains:\n\n  * Unique ID (primary key)\n  * URL\n  * Title\n  * User-defined title\n  * Visit count\n  * Last visit date\n  * Host name (see below)\n  * Hidden (bool)\n  * Typed (bool)\n\nNote that the host name is stored backwards, unlike the current table. This is\ndone so that it can be indexed alphabetically and we can quickly pull out all\npages within any \"mozilla.org\" domain by asking for hostname fields that begin\nwith \"gro.allizom.\" A period is always appended to the reversed hostname.\n\nThe second table stores transitions between pages, which is information\nunavailable now.\n\n  * Source *visit* ID\n  * Destination page ID\n  * Time\n  * Transition type\n\nTransition type will hopefully contain info about whether the link was a\nredirect clicked, opened in new tab/window, typed, just an image on the page,\netc.\n\nBecause the source for each visit is another visit, not just a URL, we can\ntrack transitions between specific viewings of pages."
            },
            {
                "title": "Performance",
                "content": "The SQLite database system does file-level locking to manage access to the\ndatabase. This means that for every transaction (even read), the database file\nmust be checked for changes to update the cache, and locked. Most systems can\ndo this quickly, although this operation is clearly not good for performance.\nSome Linux/Unix users may have their home directories and profiles stored on a\nnetwork-mounted drive. In these cases, individual database accesses can be\nrelatively expensive.\n\nTherefore, it is very important that database access be minimized and grouped\nin transactions. A new query/result format will be used instead of RDF. RDF\nrequires many extra transactions, to retrieve the ID of a URL, then to\nretrieve the title, then to retrieve the visit date, etc. This makes\nperformance, especially for network users, unacceptably slow. The new query\nsystem will retrieve one set of results for one query, meaning that there will\nbe only one database access or the accesses can be internally grouped in a\ntransaction. Initial tests of this system show that is is plenty fast enough\nover a good network and virtually instant for local users (the majority).\n\n### Link coloring\n\nLink coloring is perhaps the most important performance issue, since this\ndirectly affects page load time. A naive approach requires querying the\ndatabase for each link that comes in. Even when the history database is local,\nasking the OS for a file lock for each link on a page will be very bad for\nperformance.\n\nTo solve this problem, URLs will be loaded into an in-memory database when the\napplication starts (or, perhaps, the first time they are required). These\nlinks can be sorted so they can be accessed very quickly, and require no OS\ncalls or file locks. This list will only contain URLs, and none of the extra\ninformation such as visit dates, visit counts, and titles.\n\nBecause these data will reside in memory, it is important to not take too much\nspace. If we succeed in the goal of allowing users to keep large amounts of\nhistory, size could be significant. We will, therefore, want to limit the\nnumber of URLs that we bring into memory, either allowing, for example, the\npast 10,000 URLs, or the past 30 days of visits.\n\nA two-level approach may improve perceived size. Most URLs in the table are\nadvertisements and random images from Web sites to which the user will never\nsee a link, and probably wouldn't even care about if they did. Then there are\nthe top-level pages (with hidden=false) that are the top-level URLs that the\nuser actually visited. They are much more likely to care about these top-level\nlinks. To save space and speed things up, we could keep the past X URLs in\nmemory, plus the previous Y top-level URLs. It is unlikely that users will\neven notice that most of their history links are not being used for link\ncoloring.\n\n### Database size\n\nI just imported my [Mork](/Mork \"Mork\") history database file into the\nequivalent SQLite format. The SQLite file size was one-tenth of the original\nMork file. So, even though we will be storing more information (every time a\npage is visited) overall database size will probably be smaller.\n\nRetrieved from\n\"[https://wiki.mozilla.org/index.php?title=Browser_History&oldid=976107](https://wiki.mozilla.org/index.php?title=Browser_History&oldid=976107)\""
            },
            {
                "title": "Navigation menu",
                "content": "###  Personal tools\n\n  * [Log in](/index.php?title=Special:UserLogin&returnto=Browser+History \"You are encouraged to log in; however, it is not mandatory \\[o\\]\")\n  * [Request account](/Special:RequestAccount \"You are encouraged to create an account and log in; however, it is not mandatory\")\n\n###  Namespaces\n\n  * [Page](/Browser_History \"View the content page \\[c\\]\")\n  * [Discussion](/Talk:Browser_History \"Discussion about the content page \\[t\\]\")\n\nEnglish\n\n###  Views\n\n  * [Read](/Browser_History)\n  * [View source](/index.php?title=Browser_History&action=edit \"This page is protected.\nYou can view its source \\[e\\]\")\n\n  * [View history](/index.php?title=Browser_History&action=history \"Past revisions of this page \\[h\\]\")\n\nMore\n\n###  Search\n\n[](/Main_Page \"Visit the main page\")\n\n###  Navigation\n\n  * [Main page](/Main_Page \"Visit the main page \\[z\\]\")\n  * [Product releases](/Releases)\n  * [New pages](/Special:NewPages)\n  * [Recent changes](/Special:RecentChanges \"A list of recent changes in the wiki \\[r\\]\")\n  * [Recent uploads](/Special:NewFiles)\n  * [Help](/MozillaWiki:Help \"The place to find out\")\n\n###  How to Contribute\n\n  * [Contribute to Mozilla](/Contribute)\n  * [Community Portal](//community.mozilla.org)\n  * [Community Participation Guidelines](//www.mozilla.org/en-US/about/governance/policies/participation/)\n\n###  MozillaWiki\n\n  * [About](/MozillaWiki:About)\n  * [Team](/MozillaWiki:Team)\n  * [Policies](/MozillaWiki:Policies)\n  * [Report a wiki bug](//bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=wiki.mozilla.org)\n\n###  Around Mozilla\n\n  * [Mozilla Support](//support.mozilla.org/)\n  * [Give product Feedback](//connect.mozilla.org/)\n  * [Mozilla Developer Network](//developer.mozilla.org/)\n  * [Planet Mozilla](//planet.mozilla.org/)\n\n###  Tools\n\n  * [What links here](/Special:WhatLinksHere/Browser_History \"A list of all wiki pages that link here \\[j\\]\")\n  * [Related changes](/Special:RecentChangesLinked/Browser_History \"Recent changes in pages linked from this page \\[k\\]\")\n  * [Special pages](/Special:SpecialPages \"A list of all special pages \\[q\\]\")\n  * [Printable version](javascript:print\\(\\); \"Printable version of this page \\[p\\]\")\n  * [Permanent link](/index.php?title=Browser_History&oldid=976107 \"Permanent link to this revision of this page\")\n  * [Page information](/index.php?title=Browser_History&action=info \"More information about this page\")\n\n  * This page was last edited on 12 May 2014, at 22:33.\n\n  * [Privacy policy](/MozillaWiki:Privacy_policy)\n  * [About MozillaWiki](/MozillaWiki:About)\n  * [Mobile view](https://wiki.mozilla.org/index.php?title=Browser_History&mobileaction=toggle_view_mobile)\n\n  * [](https://www.mediawiki.org/)"
            }
        ]
    },
    {
        "feature": "Global History",
        "sub_feature": "Record after redirect",
        "description": "Verify that the correct link is recorded after a server redirect.",
        "tc_name": {
            "title": "record-redirect",
            "content": "https://www-archive.mozilla.org//quality/browser/front-end/testcases/history/record-redirect"
        },
        "test_case": [
            {
                "title": "Purpose",
                "content": "This basic testcase is designed to verify that the correct link is added to\nthe global history file after a server-side redirect."
            },
            {
                "title": "Initial Conditions",
                "content": "* You must have used the installation of the browser you plan to test.\n  * If you have not, browse around some, then come back. Or run the [gomenu-list](/quality/browser/front-end/testcases/history/gomenu-list) test first."
            },
            {
                "title": "Steps/Description",
                "content": "1. Select Go|History.\n  2. Click this [link](http://home.netscape.com/taskbar/6_0b1/bus4.html)."
            },
            {
                "title": "Expected Results",
                "content": "You should have only one new entry in your history. It should be titled Small\nBusiness. The url should be\nhttp://home.netscape.com/netcenter/smallbusiness/index.html, NOT\nhttp://home.netscape.com/taskbar/6_0b1/bus4.html."
            }
        ],
        "reference": [
            {
                "title": "Contents",
                "content": "* 1 Introduction\n  * 2 Places history features\n  * 3 Example\n  * 4 Bookmark pages and notes\n  * 5 Required information\n  * 6 Database design\n  * 7 Performance\n    * 7.1 Link coloring\n    * 7.2 Database size"
            },
            {
                "title": "Introduction",
                "content": "The places history system is a redesign of the Firefox global history system\nusing the new SQLite-based mozStorage APIs. This system provides additional\nperformance, flexibility, and querying capabilities.\n\nSee also:\n\n  * [Places](/Places \"Places\")\n  * [Annotations](/Annotations \"Annotations\")\n  * [Firefox:2.0_Bookmarks](/Firefox:2.0_Bookmarks \"Firefox:2.0 Bookmarks\")"
            },
            {
                "title": "Places history features",
                "content": "The major places history views will be queries over places visited by time.\nThe user will be able to select any date range and see when they visited each\npage. Actually showing which pages were visited during a given time period\nmeans we will have to store every time the user visits any page, rather than\njust the last visit time. This fixes some problems with the old history system\nwhere items would move around if you visited them again.\n\nThese view should be as organized and as concise as possible. The old history\nsystem includes many redirect pages in the view, and doesn't have things like\nfavicons and good grouping that might make it easier to locate pages of\ninterest. As a result, favicons for every page will be stored for viewing in\nhistory, and we will provide better domain-style grouping and a calendar for\npicking days rather than a tree view.\n\nThe second most user-visible history feature will be keyword searching. This\nwill be essentially unchanged from the old system, which is too bad because\nthe current system sucks. Because there is no word index, we do a brute-force\nsearch over all titles for the keyword in question. While sometimes useful,\nthis is not always what you want, resulting in a number of third-party history\nindexing products. Long term, it would be nice to index pages you visit. For\nthe coming release it might be nice to provide a hook for third-party products\nso they can provide text searching capabilities to the places system.\n\nThe last major change will be the ability to define complex queries over the\nhistory and bookmark systems. Most users will not be generating such queries,\nbut they can be used to provide a variety of nice features. For example, a\nquery folder can be created for \"My favorite pages\" which contains the 20 most\nfrequently visited URLs in history. A query for the most frequently visited\npages that are not bookmarked provides a good candidate list for suggesting\nbookmarks."
            },
            {
                "title": "Example",
                "content": "This screenshot shows some of these ideas:\n\n[](/File:History_grouping.png)  \n_Image credit: Brett Wilson,<http://maxradi.us/>_\n\nAll pages have favicons for better visual differentiation and grouping. Pages\nare arranged into \"sessions\" consisting of followed links. Typing a new URL or\nfollowing a bookmark gives you a new \"session\" which appears as a dotted line\nin this image. This is an actual screenshot, but the ugly redirect pages have\nbeen manually removed. Proper tracking of redirect pages is pending, see\n[Browser_History:Redirects](/Browser_History:Redirects \"Browser\nHistory:Redirects\").\n\nAn informal goal is to save and expose enough information for a variety of\ninteresting visualization or suggestion extensions to be created. For example:\n\n  * A graph of the user's browsing behavior, showing which pages were visited and when and how the user navigated between them.\n  * Suggesting links. By looking at what link the user frequently visits from the current page, perhaps some sort of suggestion or prefetching could take place. For some pages, this indication would be very strong. Other AI-like things could potentially be done. For example, many people visit the same set of sites when they open the browser in the morning. It would be nice if something could be done to make this nicer."
            },
            {
                "title": "Bookmark pages and notes",
                "content": "Firefox 2 will likely have some kind of bookmark button for easy bookmarking\nof pages. This button will be illuminated whenever the user is on a bookmarked\npage, but redirects provide an extra problem. If the bookmark page is moved,\nor more commonly, if the user manually sets a bookmark, for example\n\"amazon.com\", they will be redirected. This destination page won't be\nbookmarked, so the button will not be illuminated. The old history system also\nhad problems with redirected bookmarks because the favicons would never get\nset properly. Therefore, we need to know more about redirects to handle these\ncases correctly.\n\nIf other annotations are stored with pages, redirects could also pose\nproblems. For example, if I have notes on a page and it is redirected, my\nnotes will not be available to me. There should be a way for services using\nannotation functionality to see if the current page was ever redirected from\nsomewhere else, and to also check those pages for annotations of interest.\nMore on redirects can be read on\n[Browser_History:Redirects](/Browser_History:Redirects \"Browser\nHistory:Redirects\")."
            },
            {
                "title": "Required information",
                "content": "It will be necessary to collect and store much more information than is done\nin the old history system. To extract information about sequences of page\nviews, we need to know exactly which page generated each navigation. Because\nthe same page could be opened in more than one tab/window at once, the URL is\nnot sufficient for this task."
            },
            {
                "title": "Database design",
                "content": "The history will be stored in two SQL tables — \"moz_history\" and\n\"moz_historyvisit\".\n\nThe \"history\" table essentially duplicates the functionality of the current\n[Mork](/Mork \"Mork\") history table: It contains:\n\n  * Unique ID (primary key)\n  * URL\n  * Title\n  * User-defined title\n  * Visit count\n  * Last visit date\n  * Host name (see below)\n  * Hidden (bool)\n  * Typed (bool)\n\nNote that the host name is stored backwards, unlike the current table. This is\ndone so that it can be indexed alphabetically and we can quickly pull out all\npages within any \"mozilla.org\" domain by asking for hostname fields that begin\nwith \"gro.allizom.\" A period is always appended to the reversed hostname.\n\nThe second table stores transitions between pages, which is information\nunavailable now.\n\n  * Source *visit* ID\n  * Destination page ID\n  * Time\n  * Transition type\n\nTransition type will hopefully contain info about whether the link was a\nredirect clicked, opened in new tab/window, typed, just an image on the page,\netc.\n\nBecause the source for each visit is another visit, not just a URL, we can\ntrack transitions between specific viewings of pages."
            },
            {
                "title": "Performance",
                "content": "The SQLite database system does file-level locking to manage access to the\ndatabase. This means that for every transaction (even read), the database file\nmust be checked for changes to update the cache, and locked. Most systems can\ndo this quickly, although this operation is clearly not good for performance.\nSome Linux/Unix users may have their home directories and profiles stored on a\nnetwork-mounted drive. In these cases, individual database accesses can be\nrelatively expensive.\n\nTherefore, it is very important that database access be minimized and grouped\nin transactions. A new query/result format will be used instead of RDF. RDF\nrequires many extra transactions, to retrieve the ID of a URL, then to\nretrieve the title, then to retrieve the visit date, etc. This makes\nperformance, especially for network users, unacceptably slow. The new query\nsystem will retrieve one set of results for one query, meaning that there will\nbe only one database access or the accesses can be internally grouped in a\ntransaction. Initial tests of this system show that is is plenty fast enough\nover a good network and virtually instant for local users (the majority).\n\n### Link coloring\n\nLink coloring is perhaps the most important performance issue, since this\ndirectly affects page load time. A naive approach requires querying the\ndatabase for each link that comes in. Even when the history database is local,\nasking the OS for a file lock for each link on a page will be very bad for\nperformance.\n\nTo solve this problem, URLs will be loaded into an in-memory database when the\napplication starts (or, perhaps, the first time they are required). These\nlinks can be sorted so they can be accessed very quickly, and require no OS\ncalls or file locks. This list will only contain URLs, and none of the extra\ninformation such as visit dates, visit counts, and titles.\n\nBecause these data will reside in memory, it is important to not take too much\nspace. If we succeed in the goal of allowing users to keep large amounts of\nhistory, size could be significant. We will, therefore, want to limit the\nnumber of URLs that we bring into memory, either allowing, for example, the\npast 10,000 URLs, or the past 30 days of visits.\n\nA two-level approach may improve perceived size. Most URLs in the table are\nadvertisements and random images from Web sites to which the user will never\nsee a link, and probably wouldn't even care about if they did. Then there are\nthe top-level pages (with hidden=false) that are the top-level URLs that the\nuser actually visited. They are much more likely to care about these top-level\nlinks. To save space and speed things up, we could keep the past X URLs in\nmemory, plus the previous Y top-level URLs. It is unlikely that users will\neven notice that most of their history links are not being used for link\ncoloring.\n\n### Database size\n\nI just imported my [Mork](/Mork \"Mork\") history database file into the\nequivalent SQLite format. The SQLite file size was one-tenth of the original\nMork file. So, even though we will be storing more information (every time a\npage is visited) overall database size will probably be smaller.\n\nRetrieved from\n\"[https://wiki.mozilla.org/index.php?title=Browser_History&oldid=976107](https://wiki.mozilla.org/index.php?title=Browser_History&oldid=976107)\""
            },
            {
                "title": "Navigation menu",
                "content": "###  Personal tools\n\n  * [Log in](/index.php?title=Special:UserLogin&returnto=Browser+History \"You are encouraged to log in; however, it is not mandatory \\[o\\]\")\n  * [Request account](/Special:RequestAccount \"You are encouraged to create an account and log in; however, it is not mandatory\")\n\n###  Namespaces\n\n  * [Page](/Browser_History \"View the content page \\[c\\]\")\n  * [Discussion](/Talk:Browser_History \"Discussion about the content page \\[t\\]\")\n\nEnglish\n\n###  Views\n\n  * [Read](/Browser_History)\n  * [View source](/index.php?title=Browser_History&action=edit \"This page is protected.\nYou can view its source \\[e\\]\")\n\n  * [View history](/index.php?title=Browser_History&action=history \"Past revisions of this page \\[h\\]\")\n\nMore\n\n###  Search\n\n[](/Main_Page \"Visit the main page\")\n\n###  Navigation\n\n  * [Main page](/Main_Page \"Visit the main page \\[z\\]\")\n  * [Product releases](/Releases)\n  * [New pages](/Special:NewPages)\n  * [Recent changes](/Special:RecentChanges \"A list of recent changes in the wiki \\[r\\]\")\n  * [Recent uploads](/Special:NewFiles)\n  * [Help](/MozillaWiki:Help \"The place to find out\")\n\n###  How to Contribute\n\n  * [Contribute to Mozilla](/Contribute)\n  * [Community Portal](//community.mozilla.org)\n  * [Community Participation Guidelines](//www.mozilla.org/en-US/about/governance/policies/participation/)\n\n###  MozillaWiki\n\n  * [About](/MozillaWiki:About)\n  * [Team](/MozillaWiki:Team)\n  * [Policies](/MozillaWiki:Policies)\n  * [Report a wiki bug](//bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=wiki.mozilla.org)\n\n###  Around Mozilla\n\n  * [Mozilla Support](//support.mozilla.org/)\n  * [Give product Feedback](//connect.mozilla.org/)\n  * [Mozilla Developer Network](//developer.mozilla.org/)\n  * [Planet Mozilla](//planet.mozilla.org/)\n\n###  Tools\n\n  * [What links here](/Special:WhatLinksHere/Browser_History \"A list of all wiki pages that link here \\[j\\]\")\n  * [Related changes](/Special:RecentChangesLinked/Browser_History \"Recent changes in pages linked from this page \\[k\\]\")\n  * [Special pages](/Special:SpecialPages \"A list of all special pages \\[q\\]\")\n  * [Printable version](javascript:print\\(\\); \"Printable version of this page \\[p\\]\")\n  * [Permanent link](/index.php?title=Browser_History&oldid=976107 \"Permanent link to this revision of this page\")\n  * [Page information](/index.php?title=Browser_History&action=info \"More information about this page\")\n\n  * This page was last edited on 12 May 2014, at 22:33.\n\n  * [Privacy policy](/MozillaWiki:Privacy_policy)\n  * [About MozillaWiki](/MozillaWiki:About)\n  * [Mobile view](https://wiki.mozilla.org/index.php?title=Browser_History&mobileaction=toggle_view_mobile)\n\n  * [](https://www.mediawiki.org/)"
            }
        ]
    },
    {
        "feature": "Global History",
        "sub_feature": "Load recorded url",
        "description": "Verify that double-clicking on a history link causes it to be launched in a browser window.",
        "tc_name": {
            "title": "surf-history",
            "content": "https://www-archive.mozilla.org//quality/browser/front-end/testcases/history/surf-history"
        },
        "test_case": [
            {
                "title": "Purpose",
                "content": "This basic testcase is designed to verify that clicking on a history link\ntakes you to that page."
            },
            {
                "title": "Initial Conditions",
                "content": "* You must have used the installation of the browser you plan to test.\n  * If you have not, browse around some, then come back. Or run the [gomenu-list](/quality/browser/front-end/testcases/history/gomenu-list) test first."
            },
            {
                "title": "Steps/Description",
                "content": "1. Select Go|History.\n  2. Double-click any history link in the window."
            },
            {
                "title": "Expected Results",
                "content": "The url for that link should load in your preexisting \"topmost\" browser\nwindow, or create a new browser window if none existed."
            }
        ],
        "reference": [
            {
                "title": "Contents",
                "content": "* 1 Introduction\n  * 2 Places history features\n  * 3 Example\n  * 4 Bookmark pages and notes\n  * 5 Required information\n  * 6 Database design\n  * 7 Performance\n    * 7.1 Link coloring\n    * 7.2 Database size"
            },
            {
                "title": "Introduction",
                "content": "The places history system is a redesign of the Firefox global history system\nusing the new SQLite-based mozStorage APIs. This system provides additional\nperformance, flexibility, and querying capabilities.\n\nSee also:\n\n  * [Places](/Places \"Places\")\n  * [Annotations](/Annotations \"Annotations\")\n  * [Firefox:2.0_Bookmarks](/Firefox:2.0_Bookmarks \"Firefox:2.0 Bookmarks\")"
            },
            {
                "title": "Places history features",
                "content": "The major places history views will be queries over places visited by time.\nThe user will be able to select any date range and see when they visited each\npage. Actually showing which pages were visited during a given time period\nmeans we will have to store every time the user visits any page, rather than\njust the last visit time. This fixes some problems with the old history system\nwhere items would move around if you visited them again.\n\nThese view should be as organized and as concise as possible. The old history\nsystem includes many redirect pages in the view, and doesn't have things like\nfavicons and good grouping that might make it easier to locate pages of\ninterest. As a result, favicons for every page will be stored for viewing in\nhistory, and we will provide better domain-style grouping and a calendar for\npicking days rather than a tree view.\n\nThe second most user-visible history feature will be keyword searching. This\nwill be essentially unchanged from the old system, which is too bad because\nthe current system sucks. Because there is no word index, we do a brute-force\nsearch over all titles for the keyword in question. While sometimes useful,\nthis is not always what you want, resulting in a number of third-party history\nindexing products. Long term, it would be nice to index pages you visit. For\nthe coming release it might be nice to provide a hook for third-party products\nso they can provide text searching capabilities to the places system.\n\nThe last major change will be the ability to define complex queries over the\nhistory and bookmark systems. Most users will not be generating such queries,\nbut they can be used to provide a variety of nice features. For example, a\nquery folder can be created for \"My favorite pages\" which contains the 20 most\nfrequently visited URLs in history. A query for the most frequently visited\npages that are not bookmarked provides a good candidate list for suggesting\nbookmarks."
            },
            {
                "title": "Example",
                "content": "This screenshot shows some of these ideas:\n\n[](/File:History_grouping.png)  \n_Image credit: Brett Wilson,<http://maxradi.us/>_\n\nAll pages have favicons for better visual differentiation and grouping. Pages\nare arranged into \"sessions\" consisting of followed links. Typing a new URL or\nfollowing a bookmark gives you a new \"session\" which appears as a dotted line\nin this image. This is an actual screenshot, but the ugly redirect pages have\nbeen manually removed. Proper tracking of redirect pages is pending, see\n[Browser_History:Redirects](/Browser_History:Redirects \"Browser\nHistory:Redirects\").\n\nAn informal goal is to save and expose enough information for a variety of\ninteresting visualization or suggestion extensions to be created. For example:\n\n  * A graph of the user's browsing behavior, showing which pages were visited and when and how the user navigated between them.\n  * Suggesting links. By looking at what link the user frequently visits from the current page, perhaps some sort of suggestion or prefetching could take place. For some pages, this indication would be very strong. Other AI-like things could potentially be done. For example, many people visit the same set of sites when they open the browser in the morning. It would be nice if something could be done to make this nicer."
            },
            {
                "title": "Bookmark pages and notes",
                "content": "Firefox 2 will likely have some kind of bookmark button for easy bookmarking\nof pages. This button will be illuminated whenever the user is on a bookmarked\npage, but redirects provide an extra problem. If the bookmark page is moved,\nor more commonly, if the user manually sets a bookmark, for example\n\"amazon.com\", they will be redirected. This destination page won't be\nbookmarked, so the button will not be illuminated. The old history system also\nhad problems with redirected bookmarks because the favicons would never get\nset properly. Therefore, we need to know more about redirects to handle these\ncases correctly.\n\nIf other annotations are stored with pages, redirects could also pose\nproblems. For example, if I have notes on a page and it is redirected, my\nnotes will not be available to me. There should be a way for services using\nannotation functionality to see if the current page was ever redirected from\nsomewhere else, and to also check those pages for annotations of interest.\nMore on redirects can be read on\n[Browser_History:Redirects](/Browser_History:Redirects \"Browser\nHistory:Redirects\")."
            },
            {
                "title": "Required information",
                "content": "It will be necessary to collect and store much more information than is done\nin the old history system. To extract information about sequences of page\nviews, we need to know exactly which page generated each navigation. Because\nthe same page could be opened in more than one tab/window at once, the URL is\nnot sufficient for this task."
            },
            {
                "title": "Database design",
                "content": "The history will be stored in two SQL tables — \"moz_history\" and\n\"moz_historyvisit\".\n\nThe \"history\" table essentially duplicates the functionality of the current\n[Mork](/Mork \"Mork\") history table: It contains:\n\n  * Unique ID (primary key)\n  * URL\n  * Title\n  * User-defined title\n  * Visit count\n  * Last visit date\n  * Host name (see below)\n  * Hidden (bool)\n  * Typed (bool)\n\nNote that the host name is stored backwards, unlike the current table. This is\ndone so that it can be indexed alphabetically and we can quickly pull out all\npages within any \"mozilla.org\" domain by asking for hostname fields that begin\nwith \"gro.allizom.\" A period is always appended to the reversed hostname.\n\nThe second table stores transitions between pages, which is information\nunavailable now.\n\n  * Source *visit* ID\n  * Destination page ID\n  * Time\n  * Transition type\n\nTransition type will hopefully contain info about whether the link was a\nredirect clicked, opened in new tab/window, typed, just an image on the page,\netc.\n\nBecause the source for each visit is another visit, not just a URL, we can\ntrack transitions between specific viewings of pages."
            },
            {
                "title": "Performance",
                "content": "The SQLite database system does file-level locking to manage access to the\ndatabase. This means that for every transaction (even read), the database file\nmust be checked for changes to update the cache, and locked. Most systems can\ndo this quickly, although this operation is clearly not good for performance.\nSome Linux/Unix users may have their home directories and profiles stored on a\nnetwork-mounted drive. In these cases, individual database accesses can be\nrelatively expensive.\n\nTherefore, it is very important that database access be minimized and grouped\nin transactions. A new query/result format will be used instead of RDF. RDF\nrequires many extra transactions, to retrieve the ID of a URL, then to\nretrieve the title, then to retrieve the visit date, etc. This makes\nperformance, especially for network users, unacceptably slow. The new query\nsystem will retrieve one set of results for one query, meaning that there will\nbe only one database access or the accesses can be internally grouped in a\ntransaction. Initial tests of this system show that is is plenty fast enough\nover a good network and virtually instant for local users (the majority).\n\n### Link coloring\n\nLink coloring is perhaps the most important performance issue, since this\ndirectly affects page load time. A naive approach requires querying the\ndatabase for each link that comes in. Even when the history database is local,\nasking the OS for a file lock for each link on a page will be very bad for\nperformance.\n\nTo solve this problem, URLs will be loaded into an in-memory database when the\napplication starts (or, perhaps, the first time they are required). These\nlinks can be sorted so they can be accessed very quickly, and require no OS\ncalls or file locks. This list will only contain URLs, and none of the extra\ninformation such as visit dates, visit counts, and titles.\n\nBecause these data will reside in memory, it is important to not take too much\nspace. If we succeed in the goal of allowing users to keep large amounts of\nhistory, size could be significant. We will, therefore, want to limit the\nnumber of URLs that we bring into memory, either allowing, for example, the\npast 10,000 URLs, or the past 30 days of visits.\n\nA two-level approach may improve perceived size. Most URLs in the table are\nadvertisements and random images from Web sites to which the user will never\nsee a link, and probably wouldn't even care about if they did. Then there are\nthe top-level pages (with hidden=false) that are the top-level URLs that the\nuser actually visited. They are much more likely to care about these top-level\nlinks. To save space and speed things up, we could keep the past X URLs in\nmemory, plus the previous Y top-level URLs. It is unlikely that users will\neven notice that most of their history links are not being used for link\ncoloring.\n\n### Database size\n\nI just imported my [Mork](/Mork \"Mork\") history database file into the\nequivalent SQLite format. The SQLite file size was one-tenth of the original\nMork file. So, even though we will be storing more information (every time a\npage is visited) overall database size will probably be smaller.\n\nRetrieved from\n\"[https://wiki.mozilla.org/index.php?title=Browser_History&oldid=976107](https://wiki.mozilla.org/index.php?title=Browser_History&oldid=976107)\""
            },
            {
                "title": "Navigation menu",
                "content": "###  Personal tools\n\n  * [Log in](/index.php?title=Special:UserLogin&returnto=Browser+History \"You are encouraged to log in; however, it is not mandatory \\[o\\]\")\n  * [Request account](/Special:RequestAccount \"You are encouraged to create an account and log in; however, it is not mandatory\")\n\n###  Namespaces\n\n  * [Page](/Browser_History \"View the content page \\[c\\]\")\n  * [Discussion](/Talk:Browser_History \"Discussion about the content page \\[t\\]\")\n\nEnglish\n\n###  Views\n\n  * [Read](/Browser_History)\n  * [View source](/index.php?title=Browser_History&action=edit \"This page is protected.\nYou can view its source \\[e\\]\")\n\n  * [View history](/index.php?title=Browser_History&action=history \"Past revisions of this page \\[h\\]\")\n\nMore\n\n###  Search\n\n[](/Main_Page \"Visit the main page\")\n\n###  Navigation\n\n  * [Main page](/Main_Page \"Visit the main page \\[z\\]\")\n  * [Product releases](/Releases)\n  * [New pages](/Special:NewPages)\n  * [Recent changes](/Special:RecentChanges \"A list of recent changes in the wiki \\[r\\]\")\n  * [Recent uploads](/Special:NewFiles)\n  * [Help](/MozillaWiki:Help \"The place to find out\")\n\n###  How to Contribute\n\n  * [Contribute to Mozilla](/Contribute)\n  * [Community Portal](//community.mozilla.org)\n  * [Community Participation Guidelines](//www.mozilla.org/en-US/about/governance/policies/participation/)\n\n###  MozillaWiki\n\n  * [About](/MozillaWiki:About)\n  * [Team](/MozillaWiki:Team)\n  * [Policies](/MozillaWiki:Policies)\n  * [Report a wiki bug](//bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=wiki.mozilla.org)\n\n###  Around Mozilla\n\n  * [Mozilla Support](//support.mozilla.org/)\n  * [Give product Feedback](//connect.mozilla.org/)\n  * [Mozilla Developer Network](//developer.mozilla.org/)\n  * [Planet Mozilla](//planet.mozilla.org/)\n\n###  Tools\n\n  * [What links here](/Special:WhatLinksHere/Browser_History \"A list of all wiki pages that link here \\[j\\]\")\n  * [Related changes](/Special:RecentChangesLinked/Browser_History \"Recent changes in pages linked from this page \\[k\\]\")\n  * [Special pages](/Special:SpecialPages \"A list of all special pages \\[q\\]\")\n  * [Printable version](javascript:print\\(\\); \"Printable version of this page \\[p\\]\")\n  * [Permanent link](/index.php?title=Browser_History&oldid=976107 \"Permanent link to this revision of this page\")\n  * [Page information](/index.php?title=Browser_History&action=info \"More information about this page\")\n\n  * This page was last edited on 12 May 2014, at 22:33.\n\n  * [Privacy policy](/MozillaWiki:Privacy_policy)\n  * [About MozillaWiki](/MozillaWiki:About)\n  * [Mobile view](https://wiki.mozilla.org/index.php?title=Browser_History&mobileaction=toggle_view_mobile)\n\n  * [](https://www.mediawiki.org/)"
            }
        ]
    },
    {
        "feature": "Global History",
        "sub_feature": "Delete one entry",
        "description": "Delete a History entry",
        "tc_name": {
            "title": "delete-link",
            "content": "https://www-archive.mozilla.org//quality/browser/front-end/testcases/history/delete-link"
        },
        "test_case": [
            {
                "title": "Purpose",
                "content": "This basic testcase is designed to verify that links are properly deleted and\nno longer displayed"
            },
            {
                "title": "Initial Conditions",
                "content": "* You must have used the installation of the browser you plan to test.\n  * If you have not, browse around some, then come back. Or run the [gomenu-list](/quality/browser/front-end/testcases/history/gomenu-list) test first."
            },
            {
                "title": "Steps/Description",
                "content": "1. Select Go|History.\n  2. Select (highlight) a history entry, press the delete key, OR\n  3. Select (highlight) a history entry, Select Edit|Delete.\n  4. Restart the browser."
            },
            {
                "title": "Expected Results",
                "content": "1. After step(3) the title of and link to the history entry should now be removed from the history window.\n  2. After step(4) it should still be gone."
            }
        ],
        "reference": [
            {
                "title": "Contents",
                "content": "* 1 Introduction\n  * 2 Places history features\n  * 3 Example\n  * 4 Bookmark pages and notes\n  * 5 Required information\n  * 6 Database design\n  * 7 Performance\n    * 7.1 Link coloring\n    * 7.2 Database size"
            },
            {
                "title": "Introduction",
                "content": "The places history system is a redesign of the Firefox global history system\nusing the new SQLite-based mozStorage APIs. This system provides additional\nperformance, flexibility, and querying capabilities.\n\nSee also:\n\n  * [Places](/Places \"Places\")\n  * [Annotations](/Annotations \"Annotations\")\n  * [Firefox:2.0_Bookmarks](/Firefox:2.0_Bookmarks \"Firefox:2.0 Bookmarks\")"
            },
            {
                "title": "Places history features",
                "content": "The major places history views will be queries over places visited by time.\nThe user will be able to select any date range and see when they visited each\npage. Actually showing which pages were visited during a given time period\nmeans we will have to store every time the user visits any page, rather than\njust the last visit time. This fixes some problems with the old history system\nwhere items would move around if you visited them again.\n\nThese view should be as organized and as concise as possible. The old history\nsystem includes many redirect pages in the view, and doesn't have things like\nfavicons and good grouping that might make it easier to locate pages of\ninterest. As a result, favicons for every page will be stored for viewing in\nhistory, and we will provide better domain-style grouping and a calendar for\npicking days rather than a tree view.\n\nThe second most user-visible history feature will be keyword searching. This\nwill be essentially unchanged from the old system, which is too bad because\nthe current system sucks. Because there is no word index, we do a brute-force\nsearch over all titles for the keyword in question. While sometimes useful,\nthis is not always what you want, resulting in a number of third-party history\nindexing products. Long term, it would be nice to index pages you visit. For\nthe coming release it might be nice to provide a hook for third-party products\nso they can provide text searching capabilities to the places system.\n\nThe last major change will be the ability to define complex queries over the\nhistory and bookmark systems. Most users will not be generating such queries,\nbut they can be used to provide a variety of nice features. For example, a\nquery folder can be created for \"My favorite pages\" which contains the 20 most\nfrequently visited URLs in history. A query for the most frequently visited\npages that are not bookmarked provides a good candidate list for suggesting\nbookmarks."
            },
            {
                "title": "Example",
                "content": "This screenshot shows some of these ideas:\n\n[](/File:History_grouping.png)  \n_Image credit: Brett Wilson,<http://maxradi.us/>_\n\nAll pages have favicons for better visual differentiation and grouping. Pages\nare arranged into \"sessions\" consisting of followed links. Typing a new URL or\nfollowing a bookmark gives you a new \"session\" which appears as a dotted line\nin this image. This is an actual screenshot, but the ugly redirect pages have\nbeen manually removed. Proper tracking of redirect pages is pending, see\n[Browser_History:Redirects](/Browser_History:Redirects \"Browser\nHistory:Redirects\").\n\nAn informal goal is to save and expose enough information for a variety of\ninteresting visualization or suggestion extensions to be created. For example:\n\n  * A graph of the user's browsing behavior, showing which pages were visited and when and how the user navigated between them.\n  * Suggesting links. By looking at what link the user frequently visits from the current page, perhaps some sort of suggestion or prefetching could take place. For some pages, this indication would be very strong. Other AI-like things could potentially be done. For example, many people visit the same set of sites when they open the browser in the morning. It would be nice if something could be done to make this nicer."
            },
            {
                "title": "Bookmark pages and notes",
                "content": "Firefox 2 will likely have some kind of bookmark button for easy bookmarking\nof pages. This button will be illuminated whenever the user is on a bookmarked\npage, but redirects provide an extra problem. If the bookmark page is moved,\nor more commonly, if the user manually sets a bookmark, for example\n\"amazon.com\", they will be redirected. This destination page won't be\nbookmarked, so the button will not be illuminated. The old history system also\nhad problems with redirected bookmarks because the favicons would never get\nset properly. Therefore, we need to know more about redirects to handle these\ncases correctly.\n\nIf other annotations are stored with pages, redirects could also pose\nproblems. For example, if I have notes on a page and it is redirected, my\nnotes will not be available to me. There should be a way for services using\nannotation functionality to see if the current page was ever redirected from\nsomewhere else, and to also check those pages for annotations of interest.\nMore on redirects can be read on\n[Browser_History:Redirects](/Browser_History:Redirects \"Browser\nHistory:Redirects\")."
            },
            {
                "title": "Required information",
                "content": "It will be necessary to collect and store much more information than is done\nin the old history system. To extract information about sequences of page\nviews, we need to know exactly which page generated each navigation. Because\nthe same page could be opened in more than one tab/window at once, the URL is\nnot sufficient for this task."
            },
            {
                "title": "Database design",
                "content": "The history will be stored in two SQL tables — \"moz_history\" and\n\"moz_historyvisit\".\n\nThe \"history\" table essentially duplicates the functionality of the current\n[Mork](/Mork \"Mork\") history table: It contains:\n\n  * Unique ID (primary key)\n  * URL\n  * Title\n  * User-defined title\n  * Visit count\n  * Last visit date\n  * Host name (see below)\n  * Hidden (bool)\n  * Typed (bool)\n\nNote that the host name is stored backwards, unlike the current table. This is\ndone so that it can be indexed alphabetically and we can quickly pull out all\npages within any \"mozilla.org\" domain by asking for hostname fields that begin\nwith \"gro.allizom.\" A period is always appended to the reversed hostname.\n\nThe second table stores transitions between pages, which is information\nunavailable now.\n\n  * Source *visit* ID\n  * Destination page ID\n  * Time\n  * Transition type\n\nTransition type will hopefully contain info about whether the link was a\nredirect clicked, opened in new tab/window, typed, just an image on the page,\netc.\n\nBecause the source for each visit is another visit, not just a URL, we can\ntrack transitions between specific viewings of pages."
            },
            {
                "title": "Performance",
                "content": "The SQLite database system does file-level locking to manage access to the\ndatabase. This means that for every transaction (even read), the database file\nmust be checked for changes to update the cache, and locked. Most systems can\ndo this quickly, although this operation is clearly not good for performance.\nSome Linux/Unix users may have their home directories and profiles stored on a\nnetwork-mounted drive. In these cases, individual database accesses can be\nrelatively expensive.\n\nTherefore, it is very important that database access be minimized and grouped\nin transactions. A new query/result format will be used instead of RDF. RDF\nrequires many extra transactions, to retrieve the ID of a URL, then to\nretrieve the title, then to retrieve the visit date, etc. This makes\nperformance, especially for network users, unacceptably slow. The new query\nsystem will retrieve one set of results for one query, meaning that there will\nbe only one database access or the accesses can be internally grouped in a\ntransaction. Initial tests of this system show that is is plenty fast enough\nover a good network and virtually instant for local users (the majority).\n\n### Link coloring\n\nLink coloring is perhaps the most important performance issue, since this\ndirectly affects page load time. A naive approach requires querying the\ndatabase for each link that comes in. Even when the history database is local,\nasking the OS for a file lock for each link on a page will be very bad for\nperformance.\n\nTo solve this problem, URLs will be loaded into an in-memory database when the\napplication starts (or, perhaps, the first time they are required). These\nlinks can be sorted so they can be accessed very quickly, and require no OS\ncalls or file locks. This list will only contain URLs, and none of the extra\ninformation such as visit dates, visit counts, and titles.\n\nBecause these data will reside in memory, it is important to not take too much\nspace. If we succeed in the goal of allowing users to keep large amounts of\nhistory, size could be significant. We will, therefore, want to limit the\nnumber of URLs that we bring into memory, either allowing, for example, the\npast 10,000 URLs, or the past 30 days of visits.\n\nA two-level approach may improve perceived size. Most URLs in the table are\nadvertisements and random images from Web sites to which the user will never\nsee a link, and probably wouldn't even care about if they did. Then there are\nthe top-level pages (with hidden=false) that are the top-level URLs that the\nuser actually visited. They are much more likely to care about these top-level\nlinks. To save space and speed things up, we could keep the past X URLs in\nmemory, plus the previous Y top-level URLs. It is unlikely that users will\neven notice that most of their history links are not being used for link\ncoloring.\n\n### Database size\n\nI just imported my [Mork](/Mork \"Mork\") history database file into the\nequivalent SQLite format. The SQLite file size was one-tenth of the original\nMork file. So, even though we will be storing more information (every time a\npage is visited) overall database size will probably be smaller.\n\nRetrieved from\n\"[https://wiki.mozilla.org/index.php?title=Browser_History&oldid=976107](https://wiki.mozilla.org/index.php?title=Browser_History&oldid=976107)\""
            },
            {
                "title": "Navigation menu",
                "content": "###  Personal tools\n\n  * [Log in](/index.php?title=Special:UserLogin&returnto=Browser+History \"You are encouraged to log in; however, it is not mandatory \\[o\\]\")\n  * [Request account](/Special:RequestAccount \"You are encouraged to create an account and log in; however, it is not mandatory\")\n\n###  Namespaces\n\n  * [Page](/Browser_History \"View the content page \\[c\\]\")\n  * [Discussion](/Talk:Browser_History \"Discussion about the content page \\[t\\]\")\n\nEnglish\n\n###  Views\n\n  * [Read](/Browser_History)\n  * [View source](/index.php?title=Browser_History&action=edit \"This page is protected.\nYou can view its source \\[e\\]\")\n\n  * [View history](/index.php?title=Browser_History&action=history \"Past revisions of this page \\[h\\]\")\n\nMore\n\n###  Search\n\n[](/Main_Page \"Visit the main page\")\n\n###  Navigation\n\n  * [Main page](/Main_Page \"Visit the main page \\[z\\]\")\n  * [Product releases](/Releases)\n  * [New pages](/Special:NewPages)\n  * [Recent changes](/Special:RecentChanges \"A list of recent changes in the wiki \\[r\\]\")\n  * [Recent uploads](/Special:NewFiles)\n  * [Help](/MozillaWiki:Help \"The place to find out\")\n\n###  How to Contribute\n\n  * [Contribute to Mozilla](/Contribute)\n  * [Community Portal](//community.mozilla.org)\n  * [Community Participation Guidelines](//www.mozilla.org/en-US/about/governance/policies/participation/)\n\n###  MozillaWiki\n\n  * [About](/MozillaWiki:About)\n  * [Team](/MozillaWiki:Team)\n  * [Policies](/MozillaWiki:Policies)\n  * [Report a wiki bug](//bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=wiki.mozilla.org)\n\n###  Around Mozilla\n\n  * [Mozilla Support](//support.mozilla.org/)\n  * [Give product Feedback](//connect.mozilla.org/)\n  * [Mozilla Developer Network](//developer.mozilla.org/)\n  * [Planet Mozilla](//planet.mozilla.org/)\n\n###  Tools\n\n  * [What links here](/Special:WhatLinksHere/Browser_History \"A list of all wiki pages that link here \\[j\\]\")\n  * [Related changes](/Special:RecentChangesLinked/Browser_History \"Recent changes in pages linked from this page \\[k\\]\")\n  * [Special pages](/Special:SpecialPages \"A list of all special pages \\[q\\]\")\n  * [Printable version](javascript:print\\(\\); \"Printable version of this page \\[p\\]\")\n  * [Permanent link](/index.php?title=Browser_History&oldid=976107 \"Permanent link to this revision of this page\")\n  * [Page information](/index.php?title=Browser_History&action=info \"More information about this page\")\n\n  * This page was last edited on 12 May 2014, at 22:33.\n\n  * [Privacy policy](/MozillaWiki:Privacy_policy)\n  * [About MozillaWiki](/MozillaWiki:About)\n  * [Mobile view](https://wiki.mozilla.org/index.php?title=Browser_History&mobileaction=toggle_view_mobile)\n\n  * [](https://www.mediawiki.org/)"
            }
        ]
    },
    {
        "feature": "Global History",
        "sub_feature": "Delete multiple entries",
        "description": "Delete multiple History entries",
        "tc_name": {
            "title": "delete-multiple-links",
            "content": "https://www-archive.mozilla.org//quality/browser/front-end/testcases/history/delete-multiple-links"
        },
        "test_case": [
            {
                "title": "Purpose",
                "content": "This basic testcase is designed to verify that multiple links are properly\ndeleted and no longer displayed"
            },
            {
                "title": "Initial Conditions",
                "content": "* You must have used the installation of the browser you plan to test.\n  * If you have not, browse around some, then come back. Or run the [gomenu-list](/quality/browser/front-end/testcases/history/gomenu-list) test first."
            },
            {
                "title": "Steps/Description",
                "content": "1. Select Go|History.\n  2. Select any history entry. `Shift+click` or drag to select more (at least 3).\n  3. Select Edit|Delete.\n  4. Restart the browser. Select Go|History"
            },
            {
                "title": "Expected Results",
                "content": "1. After step(3) the titles and links to the history entries should now be removed from the history window.\n  2. After step(4) they should still be gone."
            }
        ],
        "reference": [
            {
                "title": "Contents",
                "content": "* 1 Introduction\n  * 2 Places history features\n  * 3 Example\n  * 4 Bookmark pages and notes\n  * 5 Required information\n  * 6 Database design\n  * 7 Performance\n    * 7.1 Link coloring\n    * 7.2 Database size"
            },
            {
                "title": "Introduction",
                "content": "The places history system is a redesign of the Firefox global history system\nusing the new SQLite-based mozStorage APIs. This system provides additional\nperformance, flexibility, and querying capabilities.\n\nSee also:\n\n  * [Places](/Places \"Places\")\n  * [Annotations](/Annotations \"Annotations\")\n  * [Firefox:2.0_Bookmarks](/Firefox:2.0_Bookmarks \"Firefox:2.0 Bookmarks\")"
            },
            {
                "title": "Places history features",
                "content": "The major places history views will be queries over places visited by time.\nThe user will be able to select any date range and see when they visited each\npage. Actually showing which pages were visited during a given time period\nmeans we will have to store every time the user visits any page, rather than\njust the last visit time. This fixes some problems with the old history system\nwhere items would move around if you visited them again.\n\nThese view should be as organized and as concise as possible. The old history\nsystem includes many redirect pages in the view, and doesn't have things like\nfavicons and good grouping that might make it easier to locate pages of\ninterest. As a result, favicons for every page will be stored for viewing in\nhistory, and we will provide better domain-style grouping and a calendar for\npicking days rather than a tree view.\n\nThe second most user-visible history feature will be keyword searching. This\nwill be essentially unchanged from the old system, which is too bad because\nthe current system sucks. Because there is no word index, we do a brute-force\nsearch over all titles for the keyword in question. While sometimes useful,\nthis is not always what you want, resulting in a number of third-party history\nindexing products. Long term, it would be nice to index pages you visit. For\nthe coming release it might be nice to provide a hook for third-party products\nso they can provide text searching capabilities to the places system.\n\nThe last major change will be the ability to define complex queries over the\nhistory and bookmark systems. Most users will not be generating such queries,\nbut they can be used to provide a variety of nice features. For example, a\nquery folder can be created for \"My favorite pages\" which contains the 20 most\nfrequently visited URLs in history. A query for the most frequently visited\npages that are not bookmarked provides a good candidate list for suggesting\nbookmarks."
            },
            {
                "title": "Example",
                "content": "This screenshot shows some of these ideas:\n\n[](/File:History_grouping.png)  \n_Image credit: Brett Wilson,<http://maxradi.us/>_\n\nAll pages have favicons for better visual differentiation and grouping. Pages\nare arranged into \"sessions\" consisting of followed links. Typing a new URL or\nfollowing a bookmark gives you a new \"session\" which appears as a dotted line\nin this image. This is an actual screenshot, but the ugly redirect pages have\nbeen manually removed. Proper tracking of redirect pages is pending, see\n[Browser_History:Redirects](/Browser_History:Redirects \"Browser\nHistory:Redirects\").\n\nAn informal goal is to save and expose enough information for a variety of\ninteresting visualization or suggestion extensions to be created. For example:\n\n  * A graph of the user's browsing behavior, showing which pages were visited and when and how the user navigated between them.\n  * Suggesting links. By looking at what link the user frequently visits from the current page, perhaps some sort of suggestion or prefetching could take place. For some pages, this indication would be very strong. Other AI-like things could potentially be done. For example, many people visit the same set of sites when they open the browser in the morning. It would be nice if something could be done to make this nicer."
            },
            {
                "title": "Bookmark pages and notes",
                "content": "Firefox 2 will likely have some kind of bookmark button for easy bookmarking\nof pages. This button will be illuminated whenever the user is on a bookmarked\npage, but redirects provide an extra problem. If the bookmark page is moved,\nor more commonly, if the user manually sets a bookmark, for example\n\"amazon.com\", they will be redirected. This destination page won't be\nbookmarked, so the button will not be illuminated. The old history system also\nhad problems with redirected bookmarks because the favicons would never get\nset properly. Therefore, we need to know more about redirects to handle these\ncases correctly.\n\nIf other annotations are stored with pages, redirects could also pose\nproblems. For example, if I have notes on a page and it is redirected, my\nnotes will not be available to me. There should be a way for services using\nannotation functionality to see if the current page was ever redirected from\nsomewhere else, and to also check those pages for annotations of interest.\nMore on redirects can be read on\n[Browser_History:Redirects](/Browser_History:Redirects \"Browser\nHistory:Redirects\")."
            },
            {
                "title": "Required information",
                "content": "It will be necessary to collect and store much more information than is done\nin the old history system. To extract information about sequences of page\nviews, we need to know exactly which page generated each navigation. Because\nthe same page could be opened in more than one tab/window at once, the URL is\nnot sufficient for this task."
            },
            {
                "title": "Database design",
                "content": "The history will be stored in two SQL tables — \"moz_history\" and\n\"moz_historyvisit\".\n\nThe \"history\" table essentially duplicates the functionality of the current\n[Mork](/Mork \"Mork\") history table: It contains:\n\n  * Unique ID (primary key)\n  * URL\n  * Title\n  * User-defined title\n  * Visit count\n  * Last visit date\n  * Host name (see below)\n  * Hidden (bool)\n  * Typed (bool)\n\nNote that the host name is stored backwards, unlike the current table. This is\ndone so that it can be indexed alphabetically and we can quickly pull out all\npages within any \"mozilla.org\" domain by asking for hostname fields that begin\nwith \"gro.allizom.\" A period is always appended to the reversed hostname.\n\nThe second table stores transitions between pages, which is information\nunavailable now.\n\n  * Source *visit* ID\n  * Destination page ID\n  * Time\n  * Transition type\n\nTransition type will hopefully contain info about whether the link was a\nredirect clicked, opened in new tab/window, typed, just an image on the page,\netc.\n\nBecause the source for each visit is another visit, not just a URL, we can\ntrack transitions between specific viewings of pages."
            },
            {
                "title": "Performance",
                "content": "The SQLite database system does file-level locking to manage access to the\ndatabase. This means that for every transaction (even read), the database file\nmust be checked for changes to update the cache, and locked. Most systems can\ndo this quickly, although this operation is clearly not good for performance.\nSome Linux/Unix users may have their home directories and profiles stored on a\nnetwork-mounted drive. In these cases, individual database accesses can be\nrelatively expensive.\n\nTherefore, it is very important that database access be minimized and grouped\nin transactions. A new query/result format will be used instead of RDF. RDF\nrequires many extra transactions, to retrieve the ID of a URL, then to\nretrieve the title, then to retrieve the visit date, etc. This makes\nperformance, especially for network users, unacceptably slow. The new query\nsystem will retrieve one set of results for one query, meaning that there will\nbe only one database access or the accesses can be internally grouped in a\ntransaction. Initial tests of this system show that is is plenty fast enough\nover a good network and virtually instant for local users (the majority).\n\n### Link coloring\n\nLink coloring is perhaps the most important performance issue, since this\ndirectly affects page load time. A naive approach requires querying the\ndatabase for each link that comes in. Even when the history database is local,\nasking the OS for a file lock for each link on a page will be very bad for\nperformance.\n\nTo solve this problem, URLs will be loaded into an in-memory database when the\napplication starts (or, perhaps, the first time they are required). These\nlinks can be sorted so they can be accessed very quickly, and require no OS\ncalls or file locks. This list will only contain URLs, and none of the extra\ninformation such as visit dates, visit counts, and titles.\n\nBecause these data will reside in memory, it is important to not take too much\nspace. If we succeed in the goal of allowing users to keep large amounts of\nhistory, size could be significant. We will, therefore, want to limit the\nnumber of URLs that we bring into memory, either allowing, for example, the\npast 10,000 URLs, or the past 30 days of visits.\n\nA two-level approach may improve perceived size. Most URLs in the table are\nadvertisements and random images from Web sites to which the user will never\nsee a link, and probably wouldn't even care about if they did. Then there are\nthe top-level pages (with hidden=false) that are the top-level URLs that the\nuser actually visited. They are much more likely to care about these top-level\nlinks. To save space and speed things up, we could keep the past X URLs in\nmemory, plus the previous Y top-level URLs. It is unlikely that users will\neven notice that most of their history links are not being used for link\ncoloring.\n\n### Database size\n\nI just imported my [Mork](/Mork \"Mork\") history database file into the\nequivalent SQLite format. The SQLite file size was one-tenth of the original\nMork file. So, even though we will be storing more information (every time a\npage is visited) overall database size will probably be smaller.\n\nRetrieved from\n\"[https://wiki.mozilla.org/index.php?title=Browser_History&oldid=976107](https://wiki.mozilla.org/index.php?title=Browser_History&oldid=976107)\""
            },
            {
                "title": "Navigation menu",
                "content": "###  Personal tools\n\n  * [Log in](/index.php?title=Special:UserLogin&returnto=Browser+History \"You are encouraged to log in; however, it is not mandatory \\[o\\]\")\n  * [Request account](/Special:RequestAccount \"You are encouraged to create an account and log in; however, it is not mandatory\")\n\n###  Namespaces\n\n  * [Page](/Browser_History \"View the content page \\[c\\]\")\n  * [Discussion](/Talk:Browser_History \"Discussion about the content page \\[t\\]\")\n\nEnglish\n\n###  Views\n\n  * [Read](/Browser_History)\n  * [View source](/index.php?title=Browser_History&action=edit \"This page is protected.\nYou can view its source \\[e\\]\")\n\n  * [View history](/index.php?title=Browser_History&action=history \"Past revisions of this page \\[h\\]\")\n\nMore\n\n###  Search\n\n[](/Main_Page \"Visit the main page\")\n\n###  Navigation\n\n  * [Main page](/Main_Page \"Visit the main page \\[z\\]\")\n  * [Product releases](/Releases)\n  * [New pages](/Special:NewPages)\n  * [Recent changes](/Special:RecentChanges \"A list of recent changes in the wiki \\[r\\]\")\n  * [Recent uploads](/Special:NewFiles)\n  * [Help](/MozillaWiki:Help \"The place to find out\")\n\n###  How to Contribute\n\n  * [Contribute to Mozilla](/Contribute)\n  * [Community Portal](//community.mozilla.org)\n  * [Community Participation Guidelines](//www.mozilla.org/en-US/about/governance/policies/participation/)\n\n###  MozillaWiki\n\n  * [About](/MozillaWiki:About)\n  * [Team](/MozillaWiki:Team)\n  * [Policies](/MozillaWiki:Policies)\n  * [Report a wiki bug](//bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=wiki.mozilla.org)\n\n###  Around Mozilla\n\n  * [Mozilla Support](//support.mozilla.org/)\n  * [Give product Feedback](//connect.mozilla.org/)\n  * [Mozilla Developer Network](//developer.mozilla.org/)\n  * [Planet Mozilla](//planet.mozilla.org/)\n\n###  Tools\n\n  * [What links here](/Special:WhatLinksHere/Browser_History \"A list of all wiki pages that link here \\[j\\]\")\n  * [Related changes](/Special:RecentChangesLinked/Browser_History \"Recent changes in pages linked from this page \\[k\\]\")\n  * [Special pages](/Special:SpecialPages \"A list of all special pages \\[q\\]\")\n  * [Printable version](javascript:print\\(\\); \"Printable version of this page \\[p\\]\")\n  * [Permanent link](/index.php?title=Browser_History&oldid=976107 \"Permanent link to this revision of this page\")\n  * [Page information](/index.php?title=Browser_History&action=info \"More information about this page\")\n\n  * This page was last edited on 12 May 2014, at 22:33.\n\n  * [Privacy policy](/MozillaWiki:Privacy_policy)\n  * [About MozillaWiki](/MozillaWiki:About)\n  * [Mobile view](https://wiki.mozilla.org/index.php?title=Browser_History&mobileaction=toggle_view_mobile)\n\n  * [](https://www.mediawiki.org/)"
            }
        ]
    },
    {
        "feature": "Global History",
        "sub_feature": "Erase all",
        "description": "Clear all of history",
        "tc_name": {
            "title": "clear-history",
            "content": "https://www-archive.mozilla.org//quality/browser/front-end/testcases/history/clear-history"
        },
        "test_case": [
            {
                "title": "Purpose",
                "content": "This basic testcase is designed to verify that all links are properly removed\nfrom the global history file."
            },
            {
                "title": "Initial Conditions",
                "content": "* You must have used the installation of the browser you plan to test.\n  * If you have not, browse around some, then come back. Or run the [gomenu-list](/quality/browser/front-end/testcases/history/gomenu-list) test first."
            },
            {
                "title": "Steps/Description",
                "content": "1. Select Go|History.\n  2. Observe the contents of the Global History Window.\n  3. Select Edit|Preferences (from a navigator window)\n  4. Browse to the Navigator|History Panel.\n  5. Under \"Browsing History\" click the \"Clear History\" button.\n  6. Return to observe the contents of the Global History Window."
            },
            {
                "title": "Expected Results",
                "content": "1. If you've observed the initial conditions, the History window should be non-empty upon first observation.\n  2. After pressing the button, the history window should be empty of individual history items."
            }
        ],
        "reference": [
            {
                "title": "Contents",
                "content": "* 1 Introduction\n  * 2 Places history features\n  * 3 Example\n  * 4 Bookmark pages and notes\n  * 5 Required information\n  * 6 Database design\n  * 7 Performance\n    * 7.1 Link coloring\n    * 7.2 Database size"
            },
            {
                "title": "Introduction",
                "content": "The places history system is a redesign of the Firefox global history system\nusing the new SQLite-based mozStorage APIs. This system provides additional\nperformance, flexibility, and querying capabilities.\n\nSee also:\n\n  * [Places](/Places \"Places\")\n  * [Annotations](/Annotations \"Annotations\")\n  * [Firefox:2.0_Bookmarks](/Firefox:2.0_Bookmarks \"Firefox:2.0 Bookmarks\")"
            },
            {
                "title": "Places history features",
                "content": "The major places history views will be queries over places visited by time.\nThe user will be able to select any date range and see when they visited each\npage. Actually showing which pages were visited during a given time period\nmeans we will have to store every time the user visits any page, rather than\njust the last visit time. This fixes some problems with the old history system\nwhere items would move around if you visited them again.\n\nThese view should be as organized and as concise as possible. The old history\nsystem includes many redirect pages in the view, and doesn't have things like\nfavicons and good grouping that might make it easier to locate pages of\ninterest. As a result, favicons for every page will be stored for viewing in\nhistory, and we will provide better domain-style grouping and a calendar for\npicking days rather than a tree view.\n\nThe second most user-visible history feature will be keyword searching. This\nwill be essentially unchanged from the old system, which is too bad because\nthe current system sucks. Because there is no word index, we do a brute-force\nsearch over all titles for the keyword in question. While sometimes useful,\nthis is not always what you want, resulting in a number of third-party history\nindexing products. Long term, it would be nice to index pages you visit. For\nthe coming release it might be nice to provide a hook for third-party products\nso they can provide text searching capabilities to the places system.\n\nThe last major change will be the ability to define complex queries over the\nhistory and bookmark systems. Most users will not be generating such queries,\nbut they can be used to provide a variety of nice features. For example, a\nquery folder can be created for \"My favorite pages\" which contains the 20 most\nfrequently visited URLs in history. A query for the most frequently visited\npages that are not bookmarked provides a good candidate list for suggesting\nbookmarks."
            },
            {
                "title": "Example",
                "content": "This screenshot shows some of these ideas:\n\n[](/File:History_grouping.png)  \n_Image credit: Brett Wilson,<http://maxradi.us/>_\n\nAll pages have favicons for better visual differentiation and grouping. Pages\nare arranged into \"sessions\" consisting of followed links. Typing a new URL or\nfollowing a bookmark gives you a new \"session\" which appears as a dotted line\nin this image. This is an actual screenshot, but the ugly redirect pages have\nbeen manually removed. Proper tracking of redirect pages is pending, see\n[Browser_History:Redirects](/Browser_History:Redirects \"Browser\nHistory:Redirects\").\n\nAn informal goal is to save and expose enough information for a variety of\ninteresting visualization or suggestion extensions to be created. For example:\n\n  * A graph of the user's browsing behavior, showing which pages were visited and when and how the user navigated between them.\n  * Suggesting links. By looking at what link the user frequently visits from the current page, perhaps some sort of suggestion or prefetching could take place. For some pages, this indication would be very strong. Other AI-like things could potentially be done. For example, many people visit the same set of sites when they open the browser in the morning. It would be nice if something could be done to make this nicer."
            },
            {
                "title": "Bookmark pages and notes",
                "content": "Firefox 2 will likely have some kind of bookmark button for easy bookmarking\nof pages. This button will be illuminated whenever the user is on a bookmarked\npage, but redirects provide an extra problem. If the bookmark page is moved,\nor more commonly, if the user manually sets a bookmark, for example\n\"amazon.com\", they will be redirected. This destination page won't be\nbookmarked, so the button will not be illuminated. The old history system also\nhad problems with redirected bookmarks because the favicons would never get\nset properly. Therefore, we need to know more about redirects to handle these\ncases correctly.\n\nIf other annotations are stored with pages, redirects could also pose\nproblems. For example, if I have notes on a page and it is redirected, my\nnotes will not be available to me. There should be a way for services using\nannotation functionality to see if the current page was ever redirected from\nsomewhere else, and to also check those pages for annotations of interest.\nMore on redirects can be read on\n[Browser_History:Redirects](/Browser_History:Redirects \"Browser\nHistory:Redirects\")."
            },
            {
                "title": "Required information",
                "content": "It will be necessary to collect and store much more information than is done\nin the old history system. To extract information about sequences of page\nviews, we need to know exactly which page generated each navigation. Because\nthe same page could be opened in more than one tab/window at once, the URL is\nnot sufficient for this task."
            },
            {
                "title": "Database design",
                "content": "The history will be stored in two SQL tables — \"moz_history\" and\n\"moz_historyvisit\".\n\nThe \"history\" table essentially duplicates the functionality of the current\n[Mork](/Mork \"Mork\") history table: It contains:\n\n  * Unique ID (primary key)\n  * URL\n  * Title\n  * User-defined title\n  * Visit count\n  * Last visit date\n  * Host name (see below)\n  * Hidden (bool)\n  * Typed (bool)\n\nNote that the host name is stored backwards, unlike the current table. This is\ndone so that it can be indexed alphabetically and we can quickly pull out all\npages within any \"mozilla.org\" domain by asking for hostname fields that begin\nwith \"gro.allizom.\" A period is always appended to the reversed hostname.\n\nThe second table stores transitions between pages, which is information\nunavailable now.\n\n  * Source *visit* ID\n  * Destination page ID\n  * Time\n  * Transition type\n\nTransition type will hopefully contain info about whether the link was a\nredirect clicked, opened in new tab/window, typed, just an image on the page,\netc.\n\nBecause the source for each visit is another visit, not just a URL, we can\ntrack transitions between specific viewings of pages."
            },
            {
                "title": "Performance",
                "content": "The SQLite database system does file-level locking to manage access to the\ndatabase. This means that for every transaction (even read), the database file\nmust be checked for changes to update the cache, and locked. Most systems can\ndo this quickly, although this operation is clearly not good for performance.\nSome Linux/Unix users may have their home directories and profiles stored on a\nnetwork-mounted drive. In these cases, individual database accesses can be\nrelatively expensive.\n\nTherefore, it is very important that database access be minimized and grouped\nin transactions. A new query/result format will be used instead of RDF. RDF\nrequires many extra transactions, to retrieve the ID of a URL, then to\nretrieve the title, then to retrieve the visit date, etc. This makes\nperformance, especially for network users, unacceptably slow. The new query\nsystem will retrieve one set of results for one query, meaning that there will\nbe only one database access or the accesses can be internally grouped in a\ntransaction. Initial tests of this system show that is is plenty fast enough\nover a good network and virtually instant for local users (the majority).\n\n### Link coloring\n\nLink coloring is perhaps the most important performance issue, since this\ndirectly affects page load time. A naive approach requires querying the\ndatabase for each link that comes in. Even when the history database is local,\nasking the OS for a file lock for each link on a page will be very bad for\nperformance.\n\nTo solve this problem, URLs will be loaded into an in-memory database when the\napplication starts (or, perhaps, the first time they are required). These\nlinks can be sorted so they can be accessed very quickly, and require no OS\ncalls or file locks. This list will only contain URLs, and none of the extra\ninformation such as visit dates, visit counts, and titles.\n\nBecause these data will reside in memory, it is important to not take too much\nspace. If we succeed in the goal of allowing users to keep large amounts of\nhistory, size could be significant. We will, therefore, want to limit the\nnumber of URLs that we bring into memory, either allowing, for example, the\npast 10,000 URLs, or the past 30 days of visits.\n\nA two-level approach may improve perceived size. Most URLs in the table are\nadvertisements and random images from Web sites to which the user will never\nsee a link, and probably wouldn't even care about if they did. Then there are\nthe top-level pages (with hidden=false) that are the top-level URLs that the\nuser actually visited. They are much more likely to care about these top-level\nlinks. To save space and speed things up, we could keep the past X URLs in\nmemory, plus the previous Y top-level URLs. It is unlikely that users will\neven notice that most of their history links are not being used for link\ncoloring.\n\n### Database size\n\nI just imported my [Mork](/Mork \"Mork\") history database file into the\nequivalent SQLite format. The SQLite file size was one-tenth of the original\nMork file. So, even though we will be storing more information (every time a\npage is visited) overall database size will probably be smaller.\n\nRetrieved from\n\"[https://wiki.mozilla.org/index.php?title=Browser_History&oldid=976107](https://wiki.mozilla.org/index.php?title=Browser_History&oldid=976107)\""
            },
            {
                "title": "Navigation menu",
                "content": "###  Personal tools\n\n  * [Log in](/index.php?title=Special:UserLogin&returnto=Browser+History \"You are encouraged to log in; however, it is not mandatory \\[o\\]\")\n  * [Request account](/Special:RequestAccount \"You are encouraged to create an account and log in; however, it is not mandatory\")\n\n###  Namespaces\n\n  * [Page](/Browser_History \"View the content page \\[c\\]\")\n  * [Discussion](/Talk:Browser_History \"Discussion about the content page \\[t\\]\")\n\nEnglish\n\n###  Views\n\n  * [Read](/Browser_History)\n  * [View source](/index.php?title=Browser_History&action=edit \"This page is protected.\nYou can view its source \\[e\\]\")\n\n  * [View history](/index.php?title=Browser_History&action=history \"Past revisions of this page \\[h\\]\")\n\nMore\n\n###  Search\n\n[](/Main_Page \"Visit the main page\")\n\n###  Navigation\n\n  * [Main page](/Main_Page \"Visit the main page \\[z\\]\")\n  * [Product releases](/Releases)\n  * [New pages](/Special:NewPages)\n  * [Recent changes](/Special:RecentChanges \"A list of recent changes in the wiki \\[r\\]\")\n  * [Recent uploads](/Special:NewFiles)\n  * [Help](/MozillaWiki:Help \"The place to find out\")\n\n###  How to Contribute\n\n  * [Contribute to Mozilla](/Contribute)\n  * [Community Portal](//community.mozilla.org)\n  * [Community Participation Guidelines](//www.mozilla.org/en-US/about/governance/policies/participation/)\n\n###  MozillaWiki\n\n  * [About](/MozillaWiki:About)\n  * [Team](/MozillaWiki:Team)\n  * [Policies](/MozillaWiki:Policies)\n  * [Report a wiki bug](//bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=wiki.mozilla.org)\n\n###  Around Mozilla\n\n  * [Mozilla Support](//support.mozilla.org/)\n  * [Give product Feedback](//connect.mozilla.org/)\n  * [Mozilla Developer Network](//developer.mozilla.org/)\n  * [Planet Mozilla](//planet.mozilla.org/)\n\n###  Tools\n\n  * [What links here](/Special:WhatLinksHere/Browser_History \"A list of all wiki pages that link here \\[j\\]\")\n  * [Related changes](/Special:RecentChangesLinked/Browser_History \"Recent changes in pages linked from this page \\[k\\]\")\n  * [Special pages](/Special:SpecialPages \"A list of all special pages \\[q\\]\")\n  * [Printable version](javascript:print\\(\\); \"Printable version of this page \\[p\\]\")\n  * [Permanent link](/index.php?title=Browser_History&oldid=976107 \"Permanent link to this revision of this page\")\n  * [Page information](/index.php?title=Browser_History&action=info \"More information about this page\")\n\n  * This page was last edited on 12 May 2014, at 22:33.\n\n  * [Privacy policy](/MozillaWiki:Privacy_policy)\n  * [About MozillaWiki](/MozillaWiki:About)\n  * [Mobile view](https://wiki.mozilla.org/index.php?title=Browser_History&mobileaction=toggle_view_mobile)\n\n  * [](https://www.mediawiki.org/)"
            }
        ]
    },
    {
        "feature": "Global History",
        "sub_feature": "Change grouping",
        "description": "Change the History View to Group by Day",
        "tc_name": {
            "title": "change-group",
            "content": "https://www-archive.mozilla.org//quality/browser/front-end/testcases/history/change-group"
        },
        "test_case": [
            {
                "title": "Purpose",
                "content": "This testcase is designed to verify that history items appear grouped in the\nnew \"by day\" format or the \"old skool\" flat format in the global history\nwindow."
            },
            {
                "title": "Initial Conditions",
                "content": "* You must have used the installation of the browser you plan to test.\n  * If you have not, browse around some, then come back. Or run the [gomenu-list](/quality/browser/front-end/testcases/history/gomenu-list) test first."
            },
            {
                "title": "Steps/Description",
                "content": "1. Select Go|History.\n  2. In the Global History window, select View|Group By|Day.\n  3. In the Global History window, select View|Group By|Site.\n  4. In the Global History window, select View|Group By|None."
            },
            {
                "title": "Expected Results",
                "content": "1. After Step(2), history entries should appear grouped into folders labeled \"Today\", \"Yesterday\", \"2 days ago\", ... ,\"6 days ago\", and \"Older than 6 days\".\n  2. After Step(3), the history items should appear grouped by domain name (no folders).\n  3. After Sep (4), the history items should appear -???"
            }
        ],
        "reference": [
            {
                "title": "Contents",
                "content": "* 1 Introduction\n  * 2 Places history features\n  * 3 Example\n  * 4 Bookmark pages and notes\n  * 5 Required information\n  * 6 Database design\n  * 7 Performance\n    * 7.1 Link coloring\n    * 7.2 Database size"
            },
            {
                "title": "Introduction",
                "content": "The places history system is a redesign of the Firefox global history system\nusing the new SQLite-based mozStorage APIs. This system provides additional\nperformance, flexibility, and querying capabilities.\n\nSee also:\n\n  * [Places](/Places \"Places\")\n  * [Annotations](/Annotations \"Annotations\")\n  * [Firefox:2.0_Bookmarks](/Firefox:2.0_Bookmarks \"Firefox:2.0 Bookmarks\")"
            },
            {
                "title": "Places history features",
                "content": "The major places history views will be queries over places visited by time.\nThe user will be able to select any date range and see when they visited each\npage. Actually showing which pages were visited during a given time period\nmeans we will have to store every time the user visits any page, rather than\njust the last visit time. This fixes some problems with the old history system\nwhere items would move around if you visited them again.\n\nThese view should be as organized and as concise as possible. The old history\nsystem includes many redirect pages in the view, and doesn't have things like\nfavicons and good grouping that might make it easier to locate pages of\ninterest. As a result, favicons for every page will be stored for viewing in\nhistory, and we will provide better domain-style grouping and a calendar for\npicking days rather than a tree view.\n\nThe second most user-visible history feature will be keyword searching. This\nwill be essentially unchanged from the old system, which is too bad because\nthe current system sucks. Because there is no word index, we do a brute-force\nsearch over all titles for the keyword in question. While sometimes useful,\nthis is not always what you want, resulting in a number of third-party history\nindexing products. Long term, it would be nice to index pages you visit. For\nthe coming release it might be nice to provide a hook for third-party products\nso they can provide text searching capabilities to the places system.\n\nThe last major change will be the ability to define complex queries over the\nhistory and bookmark systems. Most users will not be generating such queries,\nbut they can be used to provide a variety of nice features. For example, a\nquery folder can be created for \"My favorite pages\" which contains the 20 most\nfrequently visited URLs in history. A query for the most frequently visited\npages that are not bookmarked provides a good candidate list for suggesting\nbookmarks."
            },
            {
                "title": "Example",
                "content": "This screenshot shows some of these ideas:\n\n[](/File:History_grouping.png)  \n_Image credit: Brett Wilson,<http://maxradi.us/>_\n\nAll pages have favicons for better visual differentiation and grouping. Pages\nare arranged into \"sessions\" consisting of followed links. Typing a new URL or\nfollowing a bookmark gives you a new \"session\" which appears as a dotted line\nin this image. This is an actual screenshot, but the ugly redirect pages have\nbeen manually removed. Proper tracking of redirect pages is pending, see\n[Browser_History:Redirects](/Browser_History:Redirects \"Browser\nHistory:Redirects\").\n\nAn informal goal is to save and expose enough information for a variety of\ninteresting visualization or suggestion extensions to be created. For example:\n\n  * A graph of the user's browsing behavior, showing which pages were visited and when and how the user navigated between them.\n  * Suggesting links. By looking at what link the user frequently visits from the current page, perhaps some sort of suggestion or prefetching could take place. For some pages, this indication would be very strong. Other AI-like things could potentially be done. For example, many people visit the same set of sites when they open the browser in the morning. It would be nice if something could be done to make this nicer."
            },
            {
                "title": "Bookmark pages and notes",
                "content": "Firefox 2 will likely have some kind of bookmark button for easy bookmarking\nof pages. This button will be illuminated whenever the user is on a bookmarked\npage, but redirects provide an extra problem. If the bookmark page is moved,\nor more commonly, if the user manually sets a bookmark, for example\n\"amazon.com\", they will be redirected. This destination page won't be\nbookmarked, so the button will not be illuminated. The old history system also\nhad problems with redirected bookmarks because the favicons would never get\nset properly. Therefore, we need to know more about redirects to handle these\ncases correctly.\n\nIf other annotations are stored with pages, redirects could also pose\nproblems. For example, if I have notes on a page and it is redirected, my\nnotes will not be available to me. There should be a way for services using\nannotation functionality to see if the current page was ever redirected from\nsomewhere else, and to also check those pages for annotations of interest.\nMore on redirects can be read on\n[Browser_History:Redirects](/Browser_History:Redirects \"Browser\nHistory:Redirects\")."
            },
            {
                "title": "Required information",
                "content": "It will be necessary to collect and store much more information than is done\nin the old history system. To extract information about sequences of page\nviews, we need to know exactly which page generated each navigation. Because\nthe same page could be opened in more than one tab/window at once, the URL is\nnot sufficient for this task."
            },
            {
                "title": "Database design",
                "content": "The history will be stored in two SQL tables — \"moz_history\" and\n\"moz_historyvisit\".\n\nThe \"history\" table essentially duplicates the functionality of the current\n[Mork](/Mork \"Mork\") history table: It contains:\n\n  * Unique ID (primary key)\n  * URL\n  * Title\n  * User-defined title\n  * Visit count\n  * Last visit date\n  * Host name (see below)\n  * Hidden (bool)\n  * Typed (bool)\n\nNote that the host name is stored backwards, unlike the current table. This is\ndone so that it can be indexed alphabetically and we can quickly pull out all\npages within any \"mozilla.org\" domain by asking for hostname fields that begin\nwith \"gro.allizom.\" A period is always appended to the reversed hostname.\n\nThe second table stores transitions between pages, which is information\nunavailable now.\n\n  * Source *visit* ID\n  * Destination page ID\n  * Time\n  * Transition type\n\nTransition type will hopefully contain info about whether the link was a\nredirect clicked, opened in new tab/window, typed, just an image on the page,\netc.\n\nBecause the source for each visit is another visit, not just a URL, we can\ntrack transitions between specific viewings of pages."
            },
            {
                "title": "Performance",
                "content": "The SQLite database system does file-level locking to manage access to the\ndatabase. This means that for every transaction (even read), the database file\nmust be checked for changes to update the cache, and locked. Most systems can\ndo this quickly, although this operation is clearly not good for performance.\nSome Linux/Unix users may have their home directories and profiles stored on a\nnetwork-mounted drive. In these cases, individual database accesses can be\nrelatively expensive.\n\nTherefore, it is very important that database access be minimized and grouped\nin transactions. A new query/result format will be used instead of RDF. RDF\nrequires many extra transactions, to retrieve the ID of a URL, then to\nretrieve the title, then to retrieve the visit date, etc. This makes\nperformance, especially for network users, unacceptably slow. The new query\nsystem will retrieve one set of results for one query, meaning that there will\nbe only one database access or the accesses can be internally grouped in a\ntransaction. Initial tests of this system show that is is plenty fast enough\nover a good network and virtually instant for local users (the majority).\n\n### Link coloring\n\nLink coloring is perhaps the most important performance issue, since this\ndirectly affects page load time. A naive approach requires querying the\ndatabase for each link that comes in. Even when the history database is local,\nasking the OS for a file lock for each link on a page will be very bad for\nperformance.\n\nTo solve this problem, URLs will be loaded into an in-memory database when the\napplication starts (or, perhaps, the first time they are required). These\nlinks can be sorted so they can be accessed very quickly, and require no OS\ncalls or file locks. This list will only contain URLs, and none of the extra\ninformation such as visit dates, visit counts, and titles.\n\nBecause these data will reside in memory, it is important to not take too much\nspace. If we succeed in the goal of allowing users to keep large amounts of\nhistory, size could be significant. We will, therefore, want to limit the\nnumber of URLs that we bring into memory, either allowing, for example, the\npast 10,000 URLs, or the past 30 days of visits.\n\nA two-level approach may improve perceived size. Most URLs in the table are\nadvertisements and random images from Web sites to which the user will never\nsee a link, and probably wouldn't even care about if they did. Then there are\nthe top-level pages (with hidden=false) that are the top-level URLs that the\nuser actually visited. They are much more likely to care about these top-level\nlinks. To save space and speed things up, we could keep the past X URLs in\nmemory, plus the previous Y top-level URLs. It is unlikely that users will\neven notice that most of their history links are not being used for link\ncoloring.\n\n### Database size\n\nI just imported my [Mork](/Mork \"Mork\") history database file into the\nequivalent SQLite format. The SQLite file size was one-tenth of the original\nMork file. So, even though we will be storing more information (every time a\npage is visited) overall database size will probably be smaller.\n\nRetrieved from\n\"[https://wiki.mozilla.org/index.php?title=Browser_History&oldid=976107](https://wiki.mozilla.org/index.php?title=Browser_History&oldid=976107)\""
            },
            {
                "title": "Navigation menu",
                "content": "###  Personal tools\n\n  * [Log in](/index.php?title=Special:UserLogin&returnto=Browser+History \"You are encouraged to log in; however, it is not mandatory \\[o\\]\")\n  * [Request account](/Special:RequestAccount \"You are encouraged to create an account and log in; however, it is not mandatory\")\n\n###  Namespaces\n\n  * [Page](/Browser_History \"View the content page \\[c\\]\")\n  * [Discussion](/Talk:Browser_History \"Discussion about the content page \\[t\\]\")\n\nEnglish\n\n###  Views\n\n  * [Read](/Browser_History)\n  * [View source](/index.php?title=Browser_History&action=edit \"This page is protected.\nYou can view its source \\[e\\]\")\n\n  * [View history](/index.php?title=Browser_History&action=history \"Past revisions of this page \\[h\\]\")\n\nMore\n\n###  Search\n\n[](/Main_Page \"Visit the main page\")\n\n###  Navigation\n\n  * [Main page](/Main_Page \"Visit the main page \\[z\\]\")\n  * [Product releases](/Releases)\n  * [New pages](/Special:NewPages)\n  * [Recent changes](/Special:RecentChanges \"A list of recent changes in the wiki \\[r\\]\")\n  * [Recent uploads](/Special:NewFiles)\n  * [Help](/MozillaWiki:Help \"The place to find out\")\n\n###  How to Contribute\n\n  * [Contribute to Mozilla](/Contribute)\n  * [Community Portal](//community.mozilla.org)\n  * [Community Participation Guidelines](//www.mozilla.org/en-US/about/governance/policies/participation/)\n\n###  MozillaWiki\n\n  * [About](/MozillaWiki:About)\n  * [Team](/MozillaWiki:Team)\n  * [Policies](/MozillaWiki:Policies)\n  * [Report a wiki bug](//bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=wiki.mozilla.org)\n\n###  Around Mozilla\n\n  * [Mozilla Support](//support.mozilla.org/)\n  * [Give product Feedback](//connect.mozilla.org/)\n  * [Mozilla Developer Network](//developer.mozilla.org/)\n  * [Planet Mozilla](//planet.mozilla.org/)\n\n###  Tools\n\n  * [What links here](/Special:WhatLinksHere/Browser_History \"A list of all wiki pages that link here \\[j\\]\")\n  * [Related changes](/Special:RecentChangesLinked/Browser_History \"Recent changes in pages linked from this page \\[k\\]\")\n  * [Special pages](/Special:SpecialPages \"A list of all special pages \\[q\\]\")\n  * [Printable version](javascript:print\\(\\); \"Printable version of this page \\[p\\]\")\n  * [Permanent link](/index.php?title=Browser_History&oldid=976107 \"Permanent link to this revision of this page\")\n  * [Page information](/index.php?title=Browser_History&action=info \"More information about this page\")\n\n  * This page was last edited on 12 May 2014, at 22:33.\n\n  * [Privacy policy](/MozillaWiki:Privacy_policy)\n  * [About MozillaWiki](/MozillaWiki:About)\n  * [Mobile view](https://wiki.mozilla.org/index.php?title=Browser_History&mobileaction=toggle_view_mobile)\n\n  * [](https://www.mediawiki.org/)"
            }
        ]
    },
    {
        "feature": "Global History",
        "sub_feature": "Sort by columns",
        "description": "sort and reverse-sort per column",
        "tc_name": {
            "title": "sort-columns",
            "content": "https://www-archive.mozilla.org//quality/browser/front-end/testcases/history/sort-columns"
        },
        "test_case": [
            {
                "title": "Purpose",
                "content": "This testcase is designed to verify that the column sorting feature works\nproperly."
            },
            {
                "title": "Initial Conditions",
                "content": "* You must have used the installation of the browser you plan to test.\n  * If you have not, browse around some, then come back. Or run the [gomenu-list](/quality/browser/front-end/testcases/history/gomenu-list) test first."
            },
            {
                "title": "Steps/Description",
                "content": "Select Go|History. This is most easily tested by using the View|Group By|None\nsetting but not strictly necessary.\n\n  1. Click on the \"Title\" column once.\n  2. Click on the \"Title\" column a second time.\n  3. Click on the \"Title\" column a third time.\n  4. Click on the \"Location\" column once, and a second time.\n  5. Click on the \"Last Visited\" column once, and a second time."
            },
            {
                "title": "Expected Results",
                "content": "By step:\n\n  1. The bookmarks should sort into alphabetical order, by Title.\n  2. The bookmarks should sort into reverse-alphabetical order, by Title.\n  3. The bookmarks should sort into \"natural\" order (the way they were originally sorted).\n  4. The bookmarks should sort into order by Location and then the reverse of that order.\n  5. The bookmarks should sort into order by Last Visited and then the reverse of that order."
            }
        ],
        "reference": [
            {
                "title": "Contents",
                "content": "* 1 Introduction\n  * 2 Places history features\n  * 3 Example\n  * 4 Bookmark pages and notes\n  * 5 Required information\n  * 6 Database design\n  * 7 Performance\n    * 7.1 Link coloring\n    * 7.2 Database size"
            },
            {
                "title": "Introduction",
                "content": "The places history system is a redesign of the Firefox global history system\nusing the new SQLite-based mozStorage APIs. This system provides additional\nperformance, flexibility, and querying capabilities.\n\nSee also:\n\n  * [Places](/Places \"Places\")\n  * [Annotations](/Annotations \"Annotations\")\n  * [Firefox:2.0_Bookmarks](/Firefox:2.0_Bookmarks \"Firefox:2.0 Bookmarks\")"
            },
            {
                "title": "Places history features",
                "content": "The major places history views will be queries over places visited by time.\nThe user will be able to select any date range and see when they visited each\npage. Actually showing which pages were visited during a given time period\nmeans we will have to store every time the user visits any page, rather than\njust the last visit time. This fixes some problems with the old history system\nwhere items would move around if you visited them again.\n\nThese view should be as organized and as concise as possible. The old history\nsystem includes many redirect pages in the view, and doesn't have things like\nfavicons and good grouping that might make it easier to locate pages of\ninterest. As a result, favicons for every page will be stored for viewing in\nhistory, and we will provide better domain-style grouping and a calendar for\npicking days rather than a tree view.\n\nThe second most user-visible history feature will be keyword searching. This\nwill be essentially unchanged from the old system, which is too bad because\nthe current system sucks. Because there is no word index, we do a brute-force\nsearch over all titles for the keyword in question. While sometimes useful,\nthis is not always what you want, resulting in a number of third-party history\nindexing products. Long term, it would be nice to index pages you visit. For\nthe coming release it might be nice to provide a hook for third-party products\nso they can provide text searching capabilities to the places system.\n\nThe last major change will be the ability to define complex queries over the\nhistory and bookmark systems. Most users will not be generating such queries,\nbut they can be used to provide a variety of nice features. For example, a\nquery folder can be created for \"My favorite pages\" which contains the 20 most\nfrequently visited URLs in history. A query for the most frequently visited\npages that are not bookmarked provides a good candidate list for suggesting\nbookmarks."
            },
            {
                "title": "Example",
                "content": "This screenshot shows some of these ideas:\n\n[](/File:History_grouping.png)  \n_Image credit: Brett Wilson,<http://maxradi.us/>_\n\nAll pages have favicons for better visual differentiation and grouping. Pages\nare arranged into \"sessions\" consisting of followed links. Typing a new URL or\nfollowing a bookmark gives you a new \"session\" which appears as a dotted line\nin this image. This is an actual screenshot, but the ugly redirect pages have\nbeen manually removed. Proper tracking of redirect pages is pending, see\n[Browser_History:Redirects](/Browser_History:Redirects \"Browser\nHistory:Redirects\").\n\nAn informal goal is to save and expose enough information for a variety of\ninteresting visualization or suggestion extensions to be created. For example:\n\n  * A graph of the user's browsing behavior, showing which pages were visited and when and how the user navigated between them.\n  * Suggesting links. By looking at what link the user frequently visits from the current page, perhaps some sort of suggestion or prefetching could take place. For some pages, this indication would be very strong. Other AI-like things could potentially be done. For example, many people visit the same set of sites when they open the browser in the morning. It would be nice if something could be done to make this nicer."
            },
            {
                "title": "Bookmark pages and notes",
                "content": "Firefox 2 will likely have some kind of bookmark button for easy bookmarking\nof pages. This button will be illuminated whenever the user is on a bookmarked\npage, but redirects provide an extra problem. If the bookmark page is moved,\nor more commonly, if the user manually sets a bookmark, for example\n\"amazon.com\", they will be redirected. This destination page won't be\nbookmarked, so the button will not be illuminated. The old history system also\nhad problems with redirected bookmarks because the favicons would never get\nset properly. Therefore, we need to know more about redirects to handle these\ncases correctly.\n\nIf other annotations are stored with pages, redirects could also pose\nproblems. For example, if I have notes on a page and it is redirected, my\nnotes will not be available to me. There should be a way for services using\nannotation functionality to see if the current page was ever redirected from\nsomewhere else, and to also check those pages for annotations of interest.\nMore on redirects can be read on\n[Browser_History:Redirects](/Browser_History:Redirects \"Browser\nHistory:Redirects\")."
            },
            {
                "title": "Required information",
                "content": "It will be necessary to collect and store much more information than is done\nin the old history system. To extract information about sequences of page\nviews, we need to know exactly which page generated each navigation. Because\nthe same page could be opened in more than one tab/window at once, the URL is\nnot sufficient for this task."
            },
            {
                "title": "Database design",
                "content": "The history will be stored in two SQL tables — \"moz_history\" and\n\"moz_historyvisit\".\n\nThe \"history\" table essentially duplicates the functionality of the current\n[Mork](/Mork \"Mork\") history table: It contains:\n\n  * Unique ID (primary key)\n  * URL\n  * Title\n  * User-defined title\n  * Visit count\n  * Last visit date\n  * Host name (see below)\n  * Hidden (bool)\n  * Typed (bool)\n\nNote that the host name is stored backwards, unlike the current table. This is\ndone so that it can be indexed alphabetically and we can quickly pull out all\npages within any \"mozilla.org\" domain by asking for hostname fields that begin\nwith \"gro.allizom.\" A period is always appended to the reversed hostname.\n\nThe second table stores transitions between pages, which is information\nunavailable now.\n\n  * Source *visit* ID\n  * Destination page ID\n  * Time\n  * Transition type\n\nTransition type will hopefully contain info about whether the link was a\nredirect clicked, opened in new tab/window, typed, just an image on the page,\netc.\n\nBecause the source for each visit is another visit, not just a URL, we can\ntrack transitions between specific viewings of pages."
            },
            {
                "title": "Performance",
                "content": "The SQLite database system does file-level locking to manage access to the\ndatabase. This means that for every transaction (even read), the database file\nmust be checked for changes to update the cache, and locked. Most systems can\ndo this quickly, although this operation is clearly not good for performance.\nSome Linux/Unix users may have their home directories and profiles stored on a\nnetwork-mounted drive. In these cases, individual database accesses can be\nrelatively expensive.\n\nTherefore, it is very important that database access be minimized and grouped\nin transactions. A new query/result format will be used instead of RDF. RDF\nrequires many extra transactions, to retrieve the ID of a URL, then to\nretrieve the title, then to retrieve the visit date, etc. This makes\nperformance, especially for network users, unacceptably slow. The new query\nsystem will retrieve one set of results for one query, meaning that there will\nbe only one database access or the accesses can be internally grouped in a\ntransaction. Initial tests of this system show that is is plenty fast enough\nover a good network and virtually instant for local users (the majority).\n\n### Link coloring\n\nLink coloring is perhaps the most important performance issue, since this\ndirectly affects page load time. A naive approach requires querying the\ndatabase for each link that comes in. Even when the history database is local,\nasking the OS for a file lock for each link on a page will be very bad for\nperformance.\n\nTo solve this problem, URLs will be loaded into an in-memory database when the\napplication starts (or, perhaps, the first time they are required). These\nlinks can be sorted so they can be accessed very quickly, and require no OS\ncalls or file locks. This list will only contain URLs, and none of the extra\ninformation such as visit dates, visit counts, and titles.\n\nBecause these data will reside in memory, it is important to not take too much\nspace. If we succeed in the goal of allowing users to keep large amounts of\nhistory, size could be significant. We will, therefore, want to limit the\nnumber of URLs that we bring into memory, either allowing, for example, the\npast 10,000 URLs, or the past 30 days of visits.\n\nA two-level approach may improve perceived size. Most URLs in the table are\nadvertisements and random images from Web sites to which the user will never\nsee a link, and probably wouldn't even care about if they did. Then there are\nthe top-level pages (with hidden=false) that are the top-level URLs that the\nuser actually visited. They are much more likely to care about these top-level\nlinks. To save space and speed things up, we could keep the past X URLs in\nmemory, plus the previous Y top-level URLs. It is unlikely that users will\neven notice that most of their history links are not being used for link\ncoloring.\n\n### Database size\n\nI just imported my [Mork](/Mork \"Mork\") history database file into the\nequivalent SQLite format. The SQLite file size was one-tenth of the original\nMork file. So, even though we will be storing more information (every time a\npage is visited) overall database size will probably be smaller.\n\nRetrieved from\n\"[https://wiki.mozilla.org/index.php?title=Browser_History&oldid=976107](https://wiki.mozilla.org/index.php?title=Browser_History&oldid=976107)\""
            },
            {
                "title": "Navigation menu",
                "content": "###  Personal tools\n\n  * [Log in](/index.php?title=Special:UserLogin&returnto=Browser+History \"You are encouraged to log in; however, it is not mandatory \\[o\\]\")\n  * [Request account](/Special:RequestAccount \"You are encouraged to create an account and log in; however, it is not mandatory\")\n\n###  Namespaces\n\n  * [Page](/Browser_History \"View the content page \\[c\\]\")\n  * [Discussion](/Talk:Browser_History \"Discussion about the content page \\[t\\]\")\n\nEnglish\n\n###  Views\n\n  * [Read](/Browser_History)\n  * [View source](/index.php?title=Browser_History&action=edit \"This page is protected.\nYou can view its source \\[e\\]\")\n\n  * [View history](/index.php?title=Browser_History&action=history \"Past revisions of this page \\[h\\]\")\n\nMore\n\n###  Search\n\n[](/Main_Page \"Visit the main page\")\n\n###  Navigation\n\n  * [Main page](/Main_Page \"Visit the main page \\[z\\]\")\n  * [Product releases](/Releases)\n  * [New pages](/Special:NewPages)\n  * [Recent changes](/Special:RecentChanges \"A list of recent changes in the wiki \\[r\\]\")\n  * [Recent uploads](/Special:NewFiles)\n  * [Help](/MozillaWiki:Help \"The place to find out\")\n\n###  How to Contribute\n\n  * [Contribute to Mozilla](/Contribute)\n  * [Community Portal](//community.mozilla.org)\n  * [Community Participation Guidelines](//www.mozilla.org/en-US/about/governance/policies/participation/)\n\n###  MozillaWiki\n\n  * [About](/MozillaWiki:About)\n  * [Team](/MozillaWiki:Team)\n  * [Policies](/MozillaWiki:Policies)\n  * [Report a wiki bug](//bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=wiki.mozilla.org)\n\n###  Around Mozilla\n\n  * [Mozilla Support](//support.mozilla.org/)\n  * [Give product Feedback](//connect.mozilla.org/)\n  * [Mozilla Developer Network](//developer.mozilla.org/)\n  * [Planet Mozilla](//planet.mozilla.org/)\n\n###  Tools\n\n  * [What links here](/Special:WhatLinksHere/Browser_History \"A list of all wiki pages that link here \\[j\\]\")\n  * [Related changes](/Special:RecentChangesLinked/Browser_History \"Recent changes in pages linked from this page \\[k\\]\")\n  * [Special pages](/Special:SpecialPages \"A list of all special pages \\[q\\]\")\n  * [Printable version](javascript:print\\(\\); \"Printable version of this page \\[p\\]\")\n  * [Permanent link](/index.php?title=Browser_History&oldid=976107 \"Permanent link to this revision of this page\")\n  * [Page information](/index.php?title=Browser_History&action=info \"More information about this page\")\n\n  * This page was last edited on 12 May 2014, at 22:33.\n\n  * [Privacy policy](/MozillaWiki:Privacy_policy)\n  * [About MozillaWiki](/MozillaWiki:About)\n  * [Mobile view](https://wiki.mozilla.org/index.php?title=Browser_History&mobileaction=toggle_view_mobile)\n\n  * [](https://www.mediawiki.org/)"
            }
        ]
    },
    {
        "feature": "Global History",
        "sub_feature": "Resize columns",
        "description": "Verify that columns are resizable to show/hide more of entries",
        "tc_name": {
            "title": "resize-columns",
            "content": "https://www-archive.mozilla.org//quality/browser/front-end/testcases/history/resize-columns"
        },
        "test_case": [
            {
                "title": "Purpose",
                "content": "This testcase is designed to verify that columns are resizable by dragging\nthem to an arbitrary size."
            },
            {
                "title": "Initial Conditions",
                "content": "* You must have used the installation of the browser you plan to test.\n  * If you have not, browse around some, then come back. Or run the [gomenu-list](/quality/browser/front-end/testcases/history/gomenu-list) test first."
            },
            {
                "title": "Steps/Description",
                "content": "1. Select Go|History.\n  2. Mouseover the separator between the \"Name\" and \"URL\" columns.\n  3. Click and drag that separator to the left and right.\n  4. Repeat this with each of the other column separators."
            },
            {
                "title": "Expected Results",
                "content": "1. In step(2) the mouse pointer should change to a double-arrowed icon(platform specific or XP?).\n  2. In step(3) the column sizes on either side of the separator should shrink and grow as you drag. The content of the column should move with the column header. Column content that is obscured should be replaced by the ellipsis(?)."
            }
        ],
        "reference": [
            {
                "title": "Contents",
                "content": "* 1 Introduction\n  * 2 Places history features\n  * 3 Example\n  * 4 Bookmark pages and notes\n  * 5 Required information\n  * 6 Database design\n  * 7 Performance\n    * 7.1 Link coloring\n    * 7.2 Database size"
            },
            {
                "title": "Introduction",
                "content": "The places history system is a redesign of the Firefox global history system\nusing the new SQLite-based mozStorage APIs. This system provides additional\nperformance, flexibility, and querying capabilities.\n\nSee also:\n\n  * [Places](/Places \"Places\")\n  * [Annotations](/Annotations \"Annotations\")\n  * [Firefox:2.0_Bookmarks](/Firefox:2.0_Bookmarks \"Firefox:2.0 Bookmarks\")"
            },
            {
                "title": "Places history features",
                "content": "The major places history views will be queries over places visited by time.\nThe user will be able to select any date range and see when they visited each\npage. Actually showing which pages were visited during a given time period\nmeans we will have to store every time the user visits any page, rather than\njust the last visit time. This fixes some problems with the old history system\nwhere items would move around if you visited them again.\n\nThese view should be as organized and as concise as possible. The old history\nsystem includes many redirect pages in the view, and doesn't have things like\nfavicons and good grouping that might make it easier to locate pages of\ninterest. As a result, favicons for every page will be stored for viewing in\nhistory, and we will provide better domain-style grouping and a calendar for\npicking days rather than a tree view.\n\nThe second most user-visible history feature will be keyword searching. This\nwill be essentially unchanged from the old system, which is too bad because\nthe current system sucks. Because there is no word index, we do a brute-force\nsearch over all titles for the keyword in question. While sometimes useful,\nthis is not always what you want, resulting in a number of third-party history\nindexing products. Long term, it would be nice to index pages you visit. For\nthe coming release it might be nice to provide a hook for third-party products\nso they can provide text searching capabilities to the places system.\n\nThe last major change will be the ability to define complex queries over the\nhistory and bookmark systems. Most users will not be generating such queries,\nbut they can be used to provide a variety of nice features. For example, a\nquery folder can be created for \"My favorite pages\" which contains the 20 most\nfrequently visited URLs in history. A query for the most frequently visited\npages that are not bookmarked provides a good candidate list for suggesting\nbookmarks."
            },
            {
                "title": "Example",
                "content": "This screenshot shows some of these ideas:\n\n[](/File:History_grouping.png)  \n_Image credit: Brett Wilson,<http://maxradi.us/>_\n\nAll pages have favicons for better visual differentiation and grouping. Pages\nare arranged into \"sessions\" consisting of followed links. Typing a new URL or\nfollowing a bookmark gives you a new \"session\" which appears as a dotted line\nin this image. This is an actual screenshot, but the ugly redirect pages have\nbeen manually removed. Proper tracking of redirect pages is pending, see\n[Browser_History:Redirects](/Browser_History:Redirects \"Browser\nHistory:Redirects\").\n\nAn informal goal is to save and expose enough information for a variety of\ninteresting visualization or suggestion extensions to be created. For example:\n\n  * A graph of the user's browsing behavior, showing which pages were visited and when and how the user navigated between them.\n  * Suggesting links. By looking at what link the user frequently visits from the current page, perhaps some sort of suggestion or prefetching could take place. For some pages, this indication would be very strong. Other AI-like things could potentially be done. For example, many people visit the same set of sites when they open the browser in the morning. It would be nice if something could be done to make this nicer."
            },
            {
                "title": "Bookmark pages and notes",
                "content": "Firefox 2 will likely have some kind of bookmark button for easy bookmarking\nof pages. This button will be illuminated whenever the user is on a bookmarked\npage, but redirects provide an extra problem. If the bookmark page is moved,\nor more commonly, if the user manually sets a bookmark, for example\n\"amazon.com\", they will be redirected. This destination page won't be\nbookmarked, so the button will not be illuminated. The old history system also\nhad problems with redirected bookmarks because the favicons would never get\nset properly. Therefore, we need to know more about redirects to handle these\ncases correctly.\n\nIf other annotations are stored with pages, redirects could also pose\nproblems. For example, if I have notes on a page and it is redirected, my\nnotes will not be available to me. There should be a way for services using\nannotation functionality to see if the current page was ever redirected from\nsomewhere else, and to also check those pages for annotations of interest.\nMore on redirects can be read on\n[Browser_History:Redirects](/Browser_History:Redirects \"Browser\nHistory:Redirects\")."
            },
            {
                "title": "Required information",
                "content": "It will be necessary to collect and store much more information than is done\nin the old history system. To extract information about sequences of page\nviews, we need to know exactly which page generated each navigation. Because\nthe same page could be opened in more than one tab/window at once, the URL is\nnot sufficient for this task."
            },
            {
                "title": "Database design",
                "content": "The history will be stored in two SQL tables — \"moz_history\" and\n\"moz_historyvisit\".\n\nThe \"history\" table essentially duplicates the functionality of the current\n[Mork](/Mork \"Mork\") history table: It contains:\n\n  * Unique ID (primary key)\n  * URL\n  * Title\n  * User-defined title\n  * Visit count\n  * Last visit date\n  * Host name (see below)\n  * Hidden (bool)\n  * Typed (bool)\n\nNote that the host name is stored backwards, unlike the current table. This is\ndone so that it can be indexed alphabetically and we can quickly pull out all\npages within any \"mozilla.org\" domain by asking for hostname fields that begin\nwith \"gro.allizom.\" A period is always appended to the reversed hostname.\n\nThe second table stores transitions between pages, which is information\nunavailable now.\n\n  * Source *visit* ID\n  * Destination page ID\n  * Time\n  * Transition type\n\nTransition type will hopefully contain info about whether the link was a\nredirect clicked, opened in new tab/window, typed, just an image on the page,\netc.\n\nBecause the source for each visit is another visit, not just a URL, we can\ntrack transitions between specific viewings of pages."
            },
            {
                "title": "Performance",
                "content": "The SQLite database system does file-level locking to manage access to the\ndatabase. This means that for every transaction (even read), the database file\nmust be checked for changes to update the cache, and locked. Most systems can\ndo this quickly, although this operation is clearly not good for performance.\nSome Linux/Unix users may have their home directories and profiles stored on a\nnetwork-mounted drive. In these cases, individual database accesses can be\nrelatively expensive.\n\nTherefore, it is very important that database access be minimized and grouped\nin transactions. A new query/result format will be used instead of RDF. RDF\nrequires many extra transactions, to retrieve the ID of a URL, then to\nretrieve the title, then to retrieve the visit date, etc. This makes\nperformance, especially for network users, unacceptably slow. The new query\nsystem will retrieve one set of results for one query, meaning that there will\nbe only one database access or the accesses can be internally grouped in a\ntransaction. Initial tests of this system show that is is plenty fast enough\nover a good network and virtually instant for local users (the majority).\n\n### Link coloring\n\nLink coloring is perhaps the most important performance issue, since this\ndirectly affects page load time. A naive approach requires querying the\ndatabase for each link that comes in. Even when the history database is local,\nasking the OS for a file lock for each link on a page will be very bad for\nperformance.\n\nTo solve this problem, URLs will be loaded into an in-memory database when the\napplication starts (or, perhaps, the first time they are required). These\nlinks can be sorted so they can be accessed very quickly, and require no OS\ncalls or file locks. This list will only contain URLs, and none of the extra\ninformation such as visit dates, visit counts, and titles.\n\nBecause these data will reside in memory, it is important to not take too much\nspace. If we succeed in the goal of allowing users to keep large amounts of\nhistory, size could be significant. We will, therefore, want to limit the\nnumber of URLs that we bring into memory, either allowing, for example, the\npast 10,000 URLs, or the past 30 days of visits.\n\nA two-level approach may improve perceived size. Most URLs in the table are\nadvertisements and random images from Web sites to which the user will never\nsee a link, and probably wouldn't even care about if they did. Then there are\nthe top-level pages (with hidden=false) that are the top-level URLs that the\nuser actually visited. They are much more likely to care about these top-level\nlinks. To save space and speed things up, we could keep the past X URLs in\nmemory, plus the previous Y top-level URLs. It is unlikely that users will\neven notice that most of their history links are not being used for link\ncoloring.\n\n### Database size\n\nI just imported my [Mork](/Mork \"Mork\") history database file into the\nequivalent SQLite format. The SQLite file size was one-tenth of the original\nMork file. So, even though we will be storing more information (every time a\npage is visited) overall database size will probably be smaller.\n\nRetrieved from\n\"[https://wiki.mozilla.org/index.php?title=Browser_History&oldid=976107](https://wiki.mozilla.org/index.php?title=Browser_History&oldid=976107)\""
            },
            {
                "title": "Navigation menu",
                "content": "###  Personal tools\n\n  * [Log in](/index.php?title=Special:UserLogin&returnto=Browser+History \"You are encouraged to log in; however, it is not mandatory \\[o\\]\")\n  * [Request account](/Special:RequestAccount \"You are encouraged to create an account and log in; however, it is not mandatory\")\n\n###  Namespaces\n\n  * [Page](/Browser_History \"View the content page \\[c\\]\")\n  * [Discussion](/Talk:Browser_History \"Discussion about the content page \\[t\\]\")\n\nEnglish\n\n###  Views\n\n  * [Read](/Browser_History)\n  * [View source](/index.php?title=Browser_History&action=edit \"This page is protected.\nYou can view its source \\[e\\]\")\n\n  * [View history](/index.php?title=Browser_History&action=history \"Past revisions of this page \\[h\\]\")\n\nMore\n\n###  Search\n\n[](/Main_Page \"Visit the main page\")\n\n###  Navigation\n\n  * [Main page](/Main_Page \"Visit the main page \\[z\\]\")\n  * [Product releases](/Releases)\n  * [New pages](/Special:NewPages)\n  * [Recent changes](/Special:RecentChanges \"A list of recent changes in the wiki \\[r\\]\")\n  * [Recent uploads](/Special:NewFiles)\n  * [Help](/MozillaWiki:Help \"The place to find out\")\n\n###  How to Contribute\n\n  * [Contribute to Mozilla](/Contribute)\n  * [Community Portal](//community.mozilla.org)\n  * [Community Participation Guidelines](//www.mozilla.org/en-US/about/governance/policies/participation/)\n\n###  MozillaWiki\n\n  * [About](/MozillaWiki:About)\n  * [Team](/MozillaWiki:Team)\n  * [Policies](/MozillaWiki:Policies)\n  * [Report a wiki bug](//bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=wiki.mozilla.org)\n\n###  Around Mozilla\n\n  * [Mozilla Support](//support.mozilla.org/)\n  * [Give product Feedback](//connect.mozilla.org/)\n  * [Mozilla Developer Network](//developer.mozilla.org/)\n  * [Planet Mozilla](//planet.mozilla.org/)\n\n###  Tools\n\n  * [What links here](/Special:WhatLinksHere/Browser_History \"A list of all wiki pages that link here \\[j\\]\")\n  * [Related changes](/Special:RecentChangesLinked/Browser_History \"Recent changes in pages linked from this page \\[k\\]\")\n  * [Special pages](/Special:SpecialPages \"A list of all special pages \\[q\\]\")\n  * [Printable version](javascript:print\\(\\); \"Printable version of this page \\[p\\]\")\n  * [Permanent link](/index.php?title=Browser_History&oldid=976107 \"Permanent link to this revision of this page\")\n  * [Page information](/index.php?title=Browser_History&action=info \"More information about this page\")\n\n  * This page was last edited on 12 May 2014, at 22:33.\n\n  * [Privacy policy](/MozillaWiki:Privacy_policy)\n  * [About MozillaWiki](/MozillaWiki:About)\n  * [Mobile view](https://wiki.mozilla.org/index.php?title=Browser_History&mobileaction=toggle_view_mobile)\n\n  * [](https://www.mediawiki.org/)"
            }
        ]
    },
    {
        "feature": "Global History",
        "sub_feature": "Show/Hide columns",
        "description": "Show and hide columns.",
        "tc_name": {
            "title": "show-hide-columns",
            "content": "https://www-archive.mozilla.org//quality/browser/front-end/testcases/history/show-hide-columns"
        },
        "test_case": [
            {
                "title": "Purpose",
                "content": "This testcase is designed to verify that you can pick which columns you would\nlike to show/hide."
            },
            {
                "title": "Initial Conditions",
                "content": "* You must have used the installation of the browser you plan to test.\n  * If you have not, browse around some, then come back. Or run the [gomenu-list](/quality/browser/front-end/testcases/history/gomenu-list) test first."
            },
            {
                "title": "Steps/Description",
                "content": "1. Select Go|History.\n  2. Click the icon on the far right of the column headers.\n  3. Uncheck two of the items (columns).\n  4. Recheck an item.\n  5. Quit and restart the application."
            },
            {
                "title": "Expected Results",
                "content": "1. Step(2) a popup menu should appear listing all of the column headers as menuitems.\n  2. Step(3), they should all be checked by default and unchecking should cause that column to disappear from the manage bookmarks window.\n  3. Step(4), the columns should reappear upon rechecking its name on the list.\n  4. Step(5) the columns should appear just as the did after step(4)."
            }
        ],
        "reference": [
            {
                "title": "Contents",
                "content": "* 1 Introduction\n  * 2 Places history features\n  * 3 Example\n  * 4 Bookmark pages and notes\n  * 5 Required information\n  * 6 Database design\n  * 7 Performance\n    * 7.1 Link coloring\n    * 7.2 Database size"
            },
            {
                "title": "Introduction",
                "content": "The places history system is a redesign of the Firefox global history system\nusing the new SQLite-based mozStorage APIs. This system provides additional\nperformance, flexibility, and querying capabilities.\n\nSee also:\n\n  * [Places](/Places \"Places\")\n  * [Annotations](/Annotations \"Annotations\")\n  * [Firefox:2.0_Bookmarks](/Firefox:2.0_Bookmarks \"Firefox:2.0 Bookmarks\")"
            },
            {
                "title": "Places history features",
                "content": "The major places history views will be queries over places visited by time.\nThe user will be able to select any date range and see when they visited each\npage. Actually showing which pages were visited during a given time period\nmeans we will have to store every time the user visits any page, rather than\njust the last visit time. This fixes some problems with the old history system\nwhere items would move around if you visited them again.\n\nThese view should be as organized and as concise as possible. The old history\nsystem includes many redirect pages in the view, and doesn't have things like\nfavicons and good grouping that might make it easier to locate pages of\ninterest. As a result, favicons for every page will be stored for viewing in\nhistory, and we will provide better domain-style grouping and a calendar for\npicking days rather than a tree view.\n\nThe second most user-visible history feature will be keyword searching. This\nwill be essentially unchanged from the old system, which is too bad because\nthe current system sucks. Because there is no word index, we do a brute-force\nsearch over all titles for the keyword in question. While sometimes useful,\nthis is not always what you want, resulting in a number of third-party history\nindexing products. Long term, it would be nice to index pages you visit. For\nthe coming release it might be nice to provide a hook for third-party products\nso they can provide text searching capabilities to the places system.\n\nThe last major change will be the ability to define complex queries over the\nhistory and bookmark systems. Most users will not be generating such queries,\nbut they can be used to provide a variety of nice features. For example, a\nquery folder can be created for \"My favorite pages\" which contains the 20 most\nfrequently visited URLs in history. A query for the most frequently visited\npages that are not bookmarked provides a good candidate list for suggesting\nbookmarks."
            },
            {
                "title": "Example",
                "content": "This screenshot shows some of these ideas:\n\n[](/File:History_grouping.png)  \n_Image credit: Brett Wilson,<http://maxradi.us/>_\n\nAll pages have favicons for better visual differentiation and grouping. Pages\nare arranged into \"sessions\" consisting of followed links. Typing a new URL or\nfollowing a bookmark gives you a new \"session\" which appears as a dotted line\nin this image. This is an actual screenshot, but the ugly redirect pages have\nbeen manually removed. Proper tracking of redirect pages is pending, see\n[Browser_History:Redirects](/Browser_History:Redirects \"Browser\nHistory:Redirects\").\n\nAn informal goal is to save and expose enough information for a variety of\ninteresting visualization or suggestion extensions to be created. For example:\n\n  * A graph of the user's browsing behavior, showing which pages were visited and when and how the user navigated between them.\n  * Suggesting links. By looking at what link the user frequently visits from the current page, perhaps some sort of suggestion or prefetching could take place. For some pages, this indication would be very strong. Other AI-like things could potentially be done. For example, many people visit the same set of sites when they open the browser in the morning. It would be nice if something could be done to make this nicer."
            },
            {
                "title": "Bookmark pages and notes",
                "content": "Firefox 2 will likely have some kind of bookmark button for easy bookmarking\nof pages. This button will be illuminated whenever the user is on a bookmarked\npage, but redirects provide an extra problem. If the bookmark page is moved,\nor more commonly, if the user manually sets a bookmark, for example\n\"amazon.com\", they will be redirected. This destination page won't be\nbookmarked, so the button will not be illuminated. The old history system also\nhad problems with redirected bookmarks because the favicons would never get\nset properly. Therefore, we need to know more about redirects to handle these\ncases correctly.\n\nIf other annotations are stored with pages, redirects could also pose\nproblems. For example, if I have notes on a page and it is redirected, my\nnotes will not be available to me. There should be a way for services using\nannotation functionality to see if the current page was ever redirected from\nsomewhere else, and to also check those pages for annotations of interest.\nMore on redirects can be read on\n[Browser_History:Redirects](/Browser_History:Redirects \"Browser\nHistory:Redirects\")."
            },
            {
                "title": "Required information",
                "content": "It will be necessary to collect and store much more information than is done\nin the old history system. To extract information about sequences of page\nviews, we need to know exactly which page generated each navigation. Because\nthe same page could be opened in more than one tab/window at once, the URL is\nnot sufficient for this task."
            },
            {
                "title": "Database design",
                "content": "The history will be stored in two SQL tables — \"moz_history\" and\n\"moz_historyvisit\".\n\nThe \"history\" table essentially duplicates the functionality of the current\n[Mork](/Mork \"Mork\") history table: It contains:\n\n  * Unique ID (primary key)\n  * URL\n  * Title\n  * User-defined title\n  * Visit count\n  * Last visit date\n  * Host name (see below)\n  * Hidden (bool)\n  * Typed (bool)\n\nNote that the host name is stored backwards, unlike the current table. This is\ndone so that it can be indexed alphabetically and we can quickly pull out all\npages within any \"mozilla.org\" domain by asking for hostname fields that begin\nwith \"gro.allizom.\" A period is always appended to the reversed hostname.\n\nThe second table stores transitions between pages, which is information\nunavailable now.\n\n  * Source *visit* ID\n  * Destination page ID\n  * Time\n  * Transition type\n\nTransition type will hopefully contain info about whether the link was a\nredirect clicked, opened in new tab/window, typed, just an image on the page,\netc.\n\nBecause the source for each visit is another visit, not just a URL, we can\ntrack transitions between specific viewings of pages."
            },
            {
                "title": "Performance",
                "content": "The SQLite database system does file-level locking to manage access to the\ndatabase. This means that for every transaction (even read), the database file\nmust be checked for changes to update the cache, and locked. Most systems can\ndo this quickly, although this operation is clearly not good for performance.\nSome Linux/Unix users may have their home directories and profiles stored on a\nnetwork-mounted drive. In these cases, individual database accesses can be\nrelatively expensive.\n\nTherefore, it is very important that database access be minimized and grouped\nin transactions. A new query/result format will be used instead of RDF. RDF\nrequires many extra transactions, to retrieve the ID of a URL, then to\nretrieve the title, then to retrieve the visit date, etc. This makes\nperformance, especially for network users, unacceptably slow. The new query\nsystem will retrieve one set of results for one query, meaning that there will\nbe only one database access or the accesses can be internally grouped in a\ntransaction. Initial tests of this system show that is is plenty fast enough\nover a good network and virtually instant for local users (the majority).\n\n### Link coloring\n\nLink coloring is perhaps the most important performance issue, since this\ndirectly affects page load time. A naive approach requires querying the\ndatabase for each link that comes in. Even when the history database is local,\nasking the OS for a file lock for each link on a page will be very bad for\nperformance.\n\nTo solve this problem, URLs will be loaded into an in-memory database when the\napplication starts (or, perhaps, the first time they are required). These\nlinks can be sorted so they can be accessed very quickly, and require no OS\ncalls or file locks. This list will only contain URLs, and none of the extra\ninformation such as visit dates, visit counts, and titles.\n\nBecause these data will reside in memory, it is important to not take too much\nspace. If we succeed in the goal of allowing users to keep large amounts of\nhistory, size could be significant. We will, therefore, want to limit the\nnumber of URLs that we bring into memory, either allowing, for example, the\npast 10,000 URLs, or the past 30 days of visits.\n\nA two-level approach may improve perceived size. Most URLs in the table are\nadvertisements and random images from Web sites to which the user will never\nsee a link, and probably wouldn't even care about if they did. Then there are\nthe top-level pages (with hidden=false) that are the top-level URLs that the\nuser actually visited. They are much more likely to care about these top-level\nlinks. To save space and speed things up, we could keep the past X URLs in\nmemory, plus the previous Y top-level URLs. It is unlikely that users will\neven notice that most of their history links are not being used for link\ncoloring.\n\n### Database size\n\nI just imported my [Mork](/Mork \"Mork\") history database file into the\nequivalent SQLite format. The SQLite file size was one-tenth of the original\nMork file. So, even though we will be storing more information (every time a\npage is visited) overall database size will probably be smaller.\n\nRetrieved from\n\"[https://wiki.mozilla.org/index.php?title=Browser_History&oldid=976107](https://wiki.mozilla.org/index.php?title=Browser_History&oldid=976107)\""
            },
            {
                "title": "Navigation menu",
                "content": "###  Personal tools\n\n  * [Log in](/index.php?title=Special:UserLogin&returnto=Browser+History \"You are encouraged to log in; however, it is not mandatory \\[o\\]\")\n  * [Request account](/Special:RequestAccount \"You are encouraged to create an account and log in; however, it is not mandatory\")\n\n###  Namespaces\n\n  * [Page](/Browser_History \"View the content page \\[c\\]\")\n  * [Discussion](/Talk:Browser_History \"Discussion about the content page \\[t\\]\")\n\nEnglish\n\n###  Views\n\n  * [Read](/Browser_History)\n  * [View source](/index.php?title=Browser_History&action=edit \"This page is protected.\nYou can view its source \\[e\\]\")\n\n  * [View history](/index.php?title=Browser_History&action=history \"Past revisions of this page \\[h\\]\")\n\nMore\n\n###  Search\n\n[](/Main_Page \"Visit the main page\")\n\n###  Navigation\n\n  * [Main page](/Main_Page \"Visit the main page \\[z\\]\")\n  * [Product releases](/Releases)\n  * [New pages](/Special:NewPages)\n  * [Recent changes](/Special:RecentChanges \"A list of recent changes in the wiki \\[r\\]\")\n  * [Recent uploads](/Special:NewFiles)\n  * [Help](/MozillaWiki:Help \"The place to find out\")\n\n###  How to Contribute\n\n  * [Contribute to Mozilla](/Contribute)\n  * [Community Portal](//community.mozilla.org)\n  * [Community Participation Guidelines](//www.mozilla.org/en-US/about/governance/policies/participation/)\n\n###  MozillaWiki\n\n  * [About](/MozillaWiki:About)\n  * [Team](/MozillaWiki:Team)\n  * [Policies](/MozillaWiki:Policies)\n  * [Report a wiki bug](//bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=wiki.mozilla.org)\n\n###  Around Mozilla\n\n  * [Mozilla Support](//support.mozilla.org/)\n  * [Give product Feedback](//connect.mozilla.org/)\n  * [Mozilla Developer Network](//developer.mozilla.org/)\n  * [Planet Mozilla](//planet.mozilla.org/)\n\n###  Tools\n\n  * [What links here](/Special:WhatLinksHere/Browser_History \"A list of all wiki pages that link here \\[j\\]\")\n  * [Related changes](/Special:RecentChangesLinked/Browser_History \"Recent changes in pages linked from this page \\[k\\]\")\n  * [Special pages](/Special:SpecialPages \"A list of all special pages \\[q\\]\")\n  * [Printable version](javascript:print\\(\\); \"Printable version of this page \\[p\\]\")\n  * [Permanent link](/index.php?title=Browser_History&oldid=976107 \"Permanent link to this revision of this page\")\n  * [Page information](/index.php?title=Browser_History&action=info \"More information about this page\")\n\n  * This page was last edited on 12 May 2014, at 22:33.\n\n  * [Privacy policy](/MozillaWiki:Privacy_policy)\n  * [About MozillaWiki](/MozillaWiki:About)\n  * [Mobile view](https://wiki.mozilla.org/index.php?title=Browser_History&mobileaction=toggle_view_mobile)\n\n  * [](https://www.mediawiki.org/)"
            }
        ]
    },
    {
        "feature": "Session History",
        "sub_feature": "Go menu list",
        "description": "Verify correct recently visited sites are in go menu.",
        "tc_name": {
            "title": "gomenu-list",
            "content": "https://www-archive.mozilla.org//quality/browser/front-end/testcases/history/gomenu-list"
        },
        "test_case": [
            {
                "title": "Purpose",
                "content": "This basic testcase is designed to verify that links are properly added to the\nsession history and displayed in the browser's Go menu."
            },
            {
                "title": "Initial Conditions",
                "content": "* Your session history needs to be empty for this test so restart the browser or open a new window. To check, the \"Go\" menu should list no sites when the session history is empty."
            },
            {
                "title": "Steps/Description",
                "content": "1. Follow this [Netscape](http://home.netscape.com) link.\n  2. Follow this [Netscape People](http://people.netscape.com/claudius) link.\n  3. Wait for the redirect (15sec).\n  4. Follow this [Mozilla QA](http://www.mozilla.org/quality) link.\n  5. Follow this [Mozilla](http://www.mozilla.org/) link.\n  6. Click the browser \"Back\" button in the other window."
            },
            {
                "title": "Expected Results",
                "content": "Expected result by step:\n\n  1. The Go menu should list the title of this page, \"Netcenter\".\n  2. The Go menu should list \"Netcenter\" and \"How Claudius Got His Groove Back\".\n  3. The Go menu should list \"Netcenter\", \"How Claudius Got His Groove Back\" and \"CMaximus' Marquee\".\n  4. The Go menu should list \"Netcenter\", \"How Claudius Got His Groove Back\", \"CMaximus' Marquee\", and \"Mozilla QA Home Page\".\n  5. The Go menu should list \"Netcenter\", \"How Claudius Got His Groove Back\", \"CMaximus' Marquee\", \"Mozilla QA Home Page\", and \"Mozilla.org\".\n  6. The Go menu should look the same as in step(5), with the same order.\n  7. In each case ,the page you are currently visiting should be checked off on the list in the Go menu.\n\n* * *\n\n  * [Site Map](/sitemap)\n  * [Security Updates](../../../../../security/)\n  * [Contact Us](../../../../../contact/)\n  * [Donate](/foundation/donate)\n\nPortions of this content are (C) 1998-2009 by individual mozilla.org contributors; content available under a Creative Commons license | [Details](http://www.mozilla.org/foundation/licensing/website-content).\n\nLast modified March 3, 2007 [Document History](http://bonsai-\nwww.mozilla.org/cvslog.cgi?file=mozilla-org/html/quality/browser/front-\nend/testcases/history/gomenu-list.html&rev=&root=/www/)"
            }
        ],
        "reference": [
            {
                "title": "Contents",
                "content": "* 1 Introduction\n  * 2 Places history features\n  * 3 Example\n  * 4 Bookmark pages and notes\n  * 5 Required information\n  * 6 Database design\n  * 7 Performance\n    * 7.1 Link coloring\n    * 7.2 Database size"
            },
            {
                "title": "Introduction",
                "content": "The places history system is a redesign of the Firefox global history system\nusing the new SQLite-based mozStorage APIs. This system provides additional\nperformance, flexibility, and querying capabilities.\n\nSee also:\n\n  * [Places](/Places \"Places\")\n  * [Annotations](/Annotations \"Annotations\")\n  * [Firefox:2.0_Bookmarks](/Firefox:2.0_Bookmarks \"Firefox:2.0 Bookmarks\")"
            },
            {
                "title": "Places history features",
                "content": "The major places history views will be queries over places visited by time.\nThe user will be able to select any date range and see when they visited each\npage. Actually showing which pages were visited during a given time period\nmeans we will have to store every time the user visits any page, rather than\njust the last visit time. This fixes some problems with the old history system\nwhere items would move around if you visited them again.\n\nThese view should be as organized and as concise as possible. The old history\nsystem includes many redirect pages in the view, and doesn't have things like\nfavicons and good grouping that might make it easier to locate pages of\ninterest. As a result, favicons for every page will be stored for viewing in\nhistory, and we will provide better domain-style grouping and a calendar for\npicking days rather than a tree view.\n\nThe second most user-visible history feature will be keyword searching. This\nwill be essentially unchanged from the old system, which is too bad because\nthe current system sucks. Because there is no word index, we do a brute-force\nsearch over all titles for the keyword in question. While sometimes useful,\nthis is not always what you want, resulting in a number of third-party history\nindexing products. Long term, it would be nice to index pages you visit. For\nthe coming release it might be nice to provide a hook for third-party products\nso they can provide text searching capabilities to the places system.\n\nThe last major change will be the ability to define complex queries over the\nhistory and bookmark systems. Most users will not be generating such queries,\nbut they can be used to provide a variety of nice features. For example, a\nquery folder can be created for \"My favorite pages\" which contains the 20 most\nfrequently visited URLs in history. A query for the most frequently visited\npages that are not bookmarked provides a good candidate list for suggesting\nbookmarks."
            },
            {
                "title": "Example",
                "content": "This screenshot shows some of these ideas:\n\n[](/File:History_grouping.png)  \n_Image credit: Brett Wilson,<http://maxradi.us/>_\n\nAll pages have favicons for better visual differentiation and grouping. Pages\nare arranged into \"sessions\" consisting of followed links. Typing a new URL or\nfollowing a bookmark gives you a new \"session\" which appears as a dotted line\nin this image. This is an actual screenshot, but the ugly redirect pages have\nbeen manually removed. Proper tracking of redirect pages is pending, see\n[Browser_History:Redirects](/Browser_History:Redirects \"Browser\nHistory:Redirects\").\n\nAn informal goal is to save and expose enough information for a variety of\ninteresting visualization or suggestion extensions to be created. For example:\n\n  * A graph of the user's browsing behavior, showing which pages were visited and when and how the user navigated between them.\n  * Suggesting links. By looking at what link the user frequently visits from the current page, perhaps some sort of suggestion or prefetching could take place. For some pages, this indication would be very strong. Other AI-like things could potentially be done. For example, many people visit the same set of sites when they open the browser in the morning. It would be nice if something could be done to make this nicer."
            },
            {
                "title": "Bookmark pages and notes",
                "content": "Firefox 2 will likely have some kind of bookmark button for easy bookmarking\nof pages. This button will be illuminated whenever the user is on a bookmarked\npage, but redirects provide an extra problem. If the bookmark page is moved,\nor more commonly, if the user manually sets a bookmark, for example\n\"amazon.com\", they will be redirected. This destination page won't be\nbookmarked, so the button will not be illuminated. The old history system also\nhad problems with redirected bookmarks because the favicons would never get\nset properly. Therefore, we need to know more about redirects to handle these\ncases correctly.\n\nIf other annotations are stored with pages, redirects could also pose\nproblems. For example, if I have notes on a page and it is redirected, my\nnotes will not be available to me. There should be a way for services using\nannotation functionality to see if the current page was ever redirected from\nsomewhere else, and to also check those pages for annotations of interest.\nMore on redirects can be read on\n[Browser_History:Redirects](/Browser_History:Redirects \"Browser\nHistory:Redirects\")."
            },
            {
                "title": "Required information",
                "content": "It will be necessary to collect and store much more information than is done\nin the old history system. To extract information about sequences of page\nviews, we need to know exactly which page generated each navigation. Because\nthe same page could be opened in more than one tab/window at once, the URL is\nnot sufficient for this task."
            },
            {
                "title": "Database design",
                "content": "The history will be stored in two SQL tables — \"moz_history\" and\n\"moz_historyvisit\".\n\nThe \"history\" table essentially duplicates the functionality of the current\n[Mork](/Mork \"Mork\") history table: It contains:\n\n  * Unique ID (primary key)\n  * URL\n  * Title\n  * User-defined title\n  * Visit count\n  * Last visit date\n  * Host name (see below)\n  * Hidden (bool)\n  * Typed (bool)\n\nNote that the host name is stored backwards, unlike the current table. This is\ndone so that it can be indexed alphabetically and we can quickly pull out all\npages within any \"mozilla.org\" domain by asking for hostname fields that begin\nwith \"gro.allizom.\" A period is always appended to the reversed hostname.\n\nThe second table stores transitions between pages, which is information\nunavailable now.\n\n  * Source *visit* ID\n  * Destination page ID\n  * Time\n  * Transition type\n\nTransition type will hopefully contain info about whether the link was a\nredirect clicked, opened in new tab/window, typed, just an image on the page,\netc.\n\nBecause the source for each visit is another visit, not just a URL, we can\ntrack transitions between specific viewings of pages."
            },
            {
                "title": "Performance",
                "content": "The SQLite database system does file-level locking to manage access to the\ndatabase. This means that for every transaction (even read), the database file\nmust be checked for changes to update the cache, and locked. Most systems can\ndo this quickly, although this operation is clearly not good for performance.\nSome Linux/Unix users may have their home directories and profiles stored on a\nnetwork-mounted drive. In these cases, individual database accesses can be\nrelatively expensive.\n\nTherefore, it is very important that database access be minimized and grouped\nin transactions. A new query/result format will be used instead of RDF. RDF\nrequires many extra transactions, to retrieve the ID of a URL, then to\nretrieve the title, then to retrieve the visit date, etc. This makes\nperformance, especially for network users, unacceptably slow. The new query\nsystem will retrieve one set of results for one query, meaning that there will\nbe only one database access or the accesses can be internally grouped in a\ntransaction. Initial tests of this system show that is is plenty fast enough\nover a good network and virtually instant for local users (the majority).\n\n### Link coloring\n\nLink coloring is perhaps the most important performance issue, since this\ndirectly affects page load time. A naive approach requires querying the\ndatabase for each link that comes in. Even when the history database is local,\nasking the OS for a file lock for each link on a page will be very bad for\nperformance.\n\nTo solve this problem, URLs will be loaded into an in-memory database when the\napplication starts (or, perhaps, the first time they are required). These\nlinks can be sorted so they can be accessed very quickly, and require no OS\ncalls or file locks. This list will only contain URLs, and none of the extra\ninformation such as visit dates, visit counts, and titles.\n\nBecause these data will reside in memory, it is important to not take too much\nspace. If we succeed in the goal of allowing users to keep large amounts of\nhistory, size could be significant. We will, therefore, want to limit the\nnumber of URLs that we bring into memory, either allowing, for example, the\npast 10,000 URLs, or the past 30 days of visits.\n\nA two-level approach may improve perceived size. Most URLs in the table are\nadvertisements and random images from Web sites to which the user will never\nsee a link, and probably wouldn't even care about if they did. Then there are\nthe top-level pages (with hidden=false) that are the top-level URLs that the\nuser actually visited. They are much more likely to care about these top-level\nlinks. To save space and speed things up, we could keep the past X URLs in\nmemory, plus the previous Y top-level URLs. It is unlikely that users will\neven notice that most of their history links are not being used for link\ncoloring.\n\n### Database size\n\nI just imported my [Mork](/Mork \"Mork\") history database file into the\nequivalent SQLite format. The SQLite file size was one-tenth of the original\nMork file. So, even though we will be storing more information (every time a\npage is visited) overall database size will probably be smaller.\n\nRetrieved from\n\"[https://wiki.mozilla.org/index.php?title=Browser_History&oldid=976107](https://wiki.mozilla.org/index.php?title=Browser_History&oldid=976107)\""
            },
            {
                "title": "Navigation menu",
                "content": "###  Personal tools\n\n  * [Log in](/index.php?title=Special:UserLogin&returnto=Browser+History \"You are encouraged to log in; however, it is not mandatory \\[o\\]\")\n  * [Request account](/Special:RequestAccount \"You are encouraged to create an account and log in; however, it is not mandatory\")\n\n###  Namespaces\n\n  * [Page](/Browser_History \"View the content page \\[c\\]\")\n  * [Discussion](/Talk:Browser_History \"Discussion about the content page \\[t\\]\")\n\nEnglish\n\n###  Views\n\n  * [Read](/Browser_History)\n  * [View source](/index.php?title=Browser_History&action=edit \"This page is protected.\nYou can view its source \\[e\\]\")\n\n  * [View history](/index.php?title=Browser_History&action=history \"Past revisions of this page \\[h\\]\")\n\nMore\n\n###  Search\n\n[](/Main_Page \"Visit the main page\")\n\n###  Navigation\n\n  * [Main page](/Main_Page \"Visit the main page \\[z\\]\")\n  * [Product releases](/Releases)\n  * [New pages](/Special:NewPages)\n  * [Recent changes](/Special:RecentChanges \"A list of recent changes in the wiki \\[r\\]\")\n  * [Recent uploads](/Special:NewFiles)\n  * [Help](/MozillaWiki:Help \"The place to find out\")\n\n###  How to Contribute\n\n  * [Contribute to Mozilla](/Contribute)\n  * [Community Portal](//community.mozilla.org)\n  * [Community Participation Guidelines](//www.mozilla.org/en-US/about/governance/policies/participation/)\n\n###  MozillaWiki\n\n  * [About](/MozillaWiki:About)\n  * [Team](/MozillaWiki:Team)\n  * [Policies](/MozillaWiki:Policies)\n  * [Report a wiki bug](//bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=wiki.mozilla.org)\n\n###  Around Mozilla\n\n  * [Mozilla Support](//support.mozilla.org/)\n  * [Give product Feedback](//connect.mozilla.org/)\n  * [Mozilla Developer Network](//developer.mozilla.org/)\n  * [Planet Mozilla](//planet.mozilla.org/)\n\n###  Tools\n\n  * [What links here](/Special:WhatLinksHere/Browser_History \"A list of all wiki pages that link here \\[j\\]\")\n  * [Related changes](/Special:RecentChangesLinked/Browser_History \"Recent changes in pages linked from this page \\[k\\]\")\n  * [Special pages](/Special:SpecialPages \"A list of all special pages \\[q\\]\")\n  * [Printable version](javascript:print\\(\\); \"Printable version of this page \\[p\\]\")\n  * [Permanent link](/index.php?title=Browser_History&oldid=976107 \"Permanent link to this revision of this page\")\n  * [Page information](/index.php?title=Browser_History&action=info \"More information about this page\")\n\n  * This page was last edited on 12 May 2014, at 22:33.\n\n  * [Privacy policy](/MozillaWiki:Privacy_policy)\n  * [About MozillaWiki](/MozillaWiki:About)\n  * [Mobile view](https://wiki.mozilla.org/index.php?title=Browser_History&mobileaction=toggle_view_mobile)\n\n  * [](https://www.mediawiki.org/)"
            }
        ]
    },
    {
        "feature": "Session History",
        "sub_feature": "Back and Forward button dropdowns",
        "description": "Verify recently visited sites are in Back and Forward button dropdown menu and work.",
        "tc_name": {
            "title": "button-dropdown",
            "content": "https://www-archive.mozilla.org//quality/browser/front-end/testcases/history/button-dropdown"
        },
        "test_case": [
            {
                "title": "Purpose",
                "content": "This basic testcase is designed to verify that links are properly added to the\nglobal history file."
            },
            {
                "title": "Initial Conditions",
                "content": "* Your session history needs to be empty for this test so restart the browser or open a new window. To check, the Back/Forward buttons should be inactive and the dropdowns should not appear at all when the session history is empty."
            },
            {
                "title": "Steps/Description",
                "content": "1. Follow this [Netscape](http://home.netscape.com) link.\n  2. Follow this [Netscape People](http://people.netscape.com/claudius) link.\n  3. Wait for the redirect (15sec).\n  4. Follow this [Mozilla QA](http://www.mozilla.org/quality) link.\n  5. Follow this [Mozilla](http://www.mozilla.org) link.\n  6. From the \"Back\" button dropdown select the 4th item from the top \"Netscape.com\".\n  7. From the \"Forward\" button dropdown select the 3rd item from the top \"Mozilla QA Home Page\""
            },
            {
                "title": "Expected Results",
                "content": "1. For Step(6), the dropdown menu should be apparent and active, the 4th item should be \"Netscape.com\", the page title, and selecting it should actually load that page\n  2. For Step(7), the dropdown menu should be apparent and active, the 3rd item should be \"Mozilla QA Home Page\", the page title, and selecting it should actually load that page.\n\n* * *\n\n  * [Site Map](/sitemap)\n  * [Security Updates](../../../../../security/)\n  * [Contact Us](../../../../../contact/)\n  * [Donate](/foundation/donate)\n\nPortions of this content are (C) 1998-2009 by individual mozilla.org contributors; content available under a Creative Commons license | [Details](http://www.mozilla.org/foundation/licensing/website-content).\n\nLast modified March 3, 2007 [Document History](http://bonsai-\nwww.mozilla.org/cvslog.cgi?file=mozilla-org/html/quality/browser/front-\nend/testcases/history/button-dropdown.html&rev=&root=/www/)"
            }
        ],
        "reference": [
            {
                "title": "Contents",
                "content": "* 1 Introduction\n  * 2 Places history features\n  * 3 Example\n  * 4 Bookmark pages and notes\n  * 5 Required information\n  * 6 Database design\n  * 7 Performance\n    * 7.1 Link coloring\n    * 7.2 Database size"
            },
            {
                "title": "Introduction",
                "content": "The places history system is a redesign of the Firefox global history system\nusing the new SQLite-based mozStorage APIs. This system provides additional\nperformance, flexibility, and querying capabilities.\n\nSee also:\n\n  * [Places](/Places \"Places\")\n  * [Annotations](/Annotations \"Annotations\")\n  * [Firefox:2.0_Bookmarks](/Firefox:2.0_Bookmarks \"Firefox:2.0 Bookmarks\")"
            },
            {
                "title": "Places history features",
                "content": "The major places history views will be queries over places visited by time.\nThe user will be able to select any date range and see when they visited each\npage. Actually showing which pages were visited during a given time period\nmeans we will have to store every time the user visits any page, rather than\njust the last visit time. This fixes some problems with the old history system\nwhere items would move around if you visited them again.\n\nThese view should be as organized and as concise as possible. The old history\nsystem includes many redirect pages in the view, and doesn't have things like\nfavicons and good grouping that might make it easier to locate pages of\ninterest. As a result, favicons for every page will be stored for viewing in\nhistory, and we will provide better domain-style grouping and a calendar for\npicking days rather than a tree view.\n\nThe second most user-visible history feature will be keyword searching. This\nwill be essentially unchanged from the old system, which is too bad because\nthe current system sucks. Because there is no word index, we do a brute-force\nsearch over all titles for the keyword in question. While sometimes useful,\nthis is not always what you want, resulting in a number of third-party history\nindexing products. Long term, it would be nice to index pages you visit. For\nthe coming release it might be nice to provide a hook for third-party products\nso they can provide text searching capabilities to the places system.\n\nThe last major change will be the ability to define complex queries over the\nhistory and bookmark systems. Most users will not be generating such queries,\nbut they can be used to provide a variety of nice features. For example, a\nquery folder can be created for \"My favorite pages\" which contains the 20 most\nfrequently visited URLs in history. A query for the most frequently visited\npages that are not bookmarked provides a good candidate list for suggesting\nbookmarks."
            },
            {
                "title": "Example",
                "content": "This screenshot shows some of these ideas:\n\n[](/File:History_grouping.png)  \n_Image credit: Brett Wilson,<http://maxradi.us/>_\n\nAll pages have favicons for better visual differentiation and grouping. Pages\nare arranged into \"sessions\" consisting of followed links. Typing a new URL or\nfollowing a bookmark gives you a new \"session\" which appears as a dotted line\nin this image. This is an actual screenshot, but the ugly redirect pages have\nbeen manually removed. Proper tracking of redirect pages is pending, see\n[Browser_History:Redirects](/Browser_History:Redirects \"Browser\nHistory:Redirects\").\n\nAn informal goal is to save and expose enough information for a variety of\ninteresting visualization or suggestion extensions to be created. For example:\n\n  * A graph of the user's browsing behavior, showing which pages were visited and when and how the user navigated between them.\n  * Suggesting links. By looking at what link the user frequently visits from the current page, perhaps some sort of suggestion or prefetching could take place. For some pages, this indication would be very strong. Other AI-like things could potentially be done. For example, many people visit the same set of sites when they open the browser in the morning. It would be nice if something could be done to make this nicer."
            },
            {
                "title": "Bookmark pages and notes",
                "content": "Firefox 2 will likely have some kind of bookmark button for easy bookmarking\nof pages. This button will be illuminated whenever the user is on a bookmarked\npage, but redirects provide an extra problem. If the bookmark page is moved,\nor more commonly, if the user manually sets a bookmark, for example\n\"amazon.com\", they will be redirected. This destination page won't be\nbookmarked, so the button will not be illuminated. The old history system also\nhad problems with redirected bookmarks because the favicons would never get\nset properly. Therefore, we need to know more about redirects to handle these\ncases correctly.\n\nIf other annotations are stored with pages, redirects could also pose\nproblems. For example, if I have notes on a page and it is redirected, my\nnotes will not be available to me. There should be a way for services using\nannotation functionality to see if the current page was ever redirected from\nsomewhere else, and to also check those pages for annotations of interest.\nMore on redirects can be read on\n[Browser_History:Redirects](/Browser_History:Redirects \"Browser\nHistory:Redirects\")."
            },
            {
                "title": "Required information",
                "content": "It will be necessary to collect and store much more information than is done\nin the old history system. To extract information about sequences of page\nviews, we need to know exactly which page generated each navigation. Because\nthe same page could be opened in more than one tab/window at once, the URL is\nnot sufficient for this task."
            },
            {
                "title": "Database design",
                "content": "The history will be stored in two SQL tables — \"moz_history\" and\n\"moz_historyvisit\".\n\nThe \"history\" table essentially duplicates the functionality of the current\n[Mork](/Mork \"Mork\") history table: It contains:\n\n  * Unique ID (primary key)\n  * URL\n  * Title\n  * User-defined title\n  * Visit count\n  * Last visit date\n  * Host name (see below)\n  * Hidden (bool)\n  * Typed (bool)\n\nNote that the host name is stored backwards, unlike the current table. This is\ndone so that it can be indexed alphabetically and we can quickly pull out all\npages within any \"mozilla.org\" domain by asking for hostname fields that begin\nwith \"gro.allizom.\" A period is always appended to the reversed hostname.\n\nThe second table stores transitions between pages, which is information\nunavailable now.\n\n  * Source *visit* ID\n  * Destination page ID\n  * Time\n  * Transition type\n\nTransition type will hopefully contain info about whether the link was a\nredirect clicked, opened in new tab/window, typed, just an image on the page,\netc.\n\nBecause the source for each visit is another visit, not just a URL, we can\ntrack transitions between specific viewings of pages."
            },
            {
                "title": "Performance",
                "content": "The SQLite database system does file-level locking to manage access to the\ndatabase. This means that for every transaction (even read), the database file\nmust be checked for changes to update the cache, and locked. Most systems can\ndo this quickly, although this operation is clearly not good for performance.\nSome Linux/Unix users may have their home directories and profiles stored on a\nnetwork-mounted drive. In these cases, individual database accesses can be\nrelatively expensive.\n\nTherefore, it is very important that database access be minimized and grouped\nin transactions. A new query/result format will be used instead of RDF. RDF\nrequires many extra transactions, to retrieve the ID of a URL, then to\nretrieve the title, then to retrieve the visit date, etc. This makes\nperformance, especially for network users, unacceptably slow. The new query\nsystem will retrieve one set of results for one query, meaning that there will\nbe only one database access or the accesses can be internally grouped in a\ntransaction. Initial tests of this system show that is is plenty fast enough\nover a good network and virtually instant for local users (the majority).\n\n### Link coloring\n\nLink coloring is perhaps the most important performance issue, since this\ndirectly affects page load time. A naive approach requires querying the\ndatabase for each link that comes in. Even when the history database is local,\nasking the OS for a file lock for each link on a page will be very bad for\nperformance.\n\nTo solve this problem, URLs will be loaded into an in-memory database when the\napplication starts (or, perhaps, the first time they are required). These\nlinks can be sorted so they can be accessed very quickly, and require no OS\ncalls or file locks. This list will only contain URLs, and none of the extra\ninformation such as visit dates, visit counts, and titles.\n\nBecause these data will reside in memory, it is important to not take too much\nspace. If we succeed in the goal of allowing users to keep large amounts of\nhistory, size could be significant. We will, therefore, want to limit the\nnumber of URLs that we bring into memory, either allowing, for example, the\npast 10,000 URLs, or the past 30 days of visits.\n\nA two-level approach may improve perceived size. Most URLs in the table are\nadvertisements and random images from Web sites to which the user will never\nsee a link, and probably wouldn't even care about if they did. Then there are\nthe top-level pages (with hidden=false) that are the top-level URLs that the\nuser actually visited. They are much more likely to care about these top-level\nlinks. To save space and speed things up, we could keep the past X URLs in\nmemory, plus the previous Y top-level URLs. It is unlikely that users will\neven notice that most of their history links are not being used for link\ncoloring.\n\n### Database size\n\nI just imported my [Mork](/Mork \"Mork\") history database file into the\nequivalent SQLite format. The SQLite file size was one-tenth of the original\nMork file. So, even though we will be storing more information (every time a\npage is visited) overall database size will probably be smaller.\n\nRetrieved from\n\"[https://wiki.mozilla.org/index.php?title=Browser_History&oldid=976107](https://wiki.mozilla.org/index.php?title=Browser_History&oldid=976107)\""
            },
            {
                "title": "Navigation menu",
                "content": "###  Personal tools\n\n  * [Log in](/index.php?title=Special:UserLogin&returnto=Browser+History \"You are encouraged to log in; however, it is not mandatory \\[o\\]\")\n  * [Request account](/Special:RequestAccount \"You are encouraged to create an account and log in; however, it is not mandatory\")\n\n###  Namespaces\n\n  * [Page](/Browser_History \"View the content page \\[c\\]\")\n  * [Discussion](/Talk:Browser_History \"Discussion about the content page \\[t\\]\")\n\nEnglish\n\n###  Views\n\n  * [Read](/Browser_History)\n  * [View source](/index.php?title=Browser_History&action=edit \"This page is protected.\nYou can view its source \\[e\\]\")\n\n  * [View history](/index.php?title=Browser_History&action=history \"Past revisions of this page \\[h\\]\")\n\nMore\n\n###  Search\n\n[](/Main_Page \"Visit the main page\")\n\n###  Navigation\n\n  * [Main page](/Main_Page \"Visit the main page \\[z\\]\")\n  * [Product releases](/Releases)\n  * [New pages](/Special:NewPages)\n  * [Recent changes](/Special:RecentChanges \"A list of recent changes in the wiki \\[r\\]\")\n  * [Recent uploads](/Special:NewFiles)\n  * [Help](/MozillaWiki:Help \"The place to find out\")\n\n###  How to Contribute\n\n  * [Contribute to Mozilla](/Contribute)\n  * [Community Portal](//community.mozilla.org)\n  * [Community Participation Guidelines](//www.mozilla.org/en-US/about/governance/policies/participation/)\n\n###  MozillaWiki\n\n  * [About](/MozillaWiki:About)\n  * [Team](/MozillaWiki:Team)\n  * [Policies](/MozillaWiki:Policies)\n  * [Report a wiki bug](//bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=wiki.mozilla.org)\n\n###  Around Mozilla\n\n  * [Mozilla Support](//support.mozilla.org/)\n  * [Give product Feedback](//connect.mozilla.org/)\n  * [Mozilla Developer Network](//developer.mozilla.org/)\n  * [Planet Mozilla](//planet.mozilla.org/)\n\n###  Tools\n\n  * [What links here](/Special:WhatLinksHere/Browser_History \"A list of all wiki pages that link here \\[j\\]\")\n  * [Related changes](/Special:RecentChangesLinked/Browser_History \"Recent changes in pages linked from this page \\[k\\]\")\n  * [Special pages](/Special:SpecialPages \"A list of all special pages \\[q\\]\")\n  * [Printable version](javascript:print\\(\\); \"Printable version of this page \\[p\\]\")\n  * [Permanent link](/index.php?title=Browser_History&oldid=976107 \"Permanent link to this revision of this page\")\n  * [Page information](/index.php?title=Browser_History&action=info \"More information about this page\")\n\n  * This page was last edited on 12 May 2014, at 22:33.\n\n  * [Privacy policy](/MozillaWiki:Privacy_policy)\n  * [About MozillaWiki](/MozillaWiki:About)\n  * [Mobile view](https://wiki.mozilla.org/index.php?title=Browser_History&mobileaction=toggle_view_mobile)\n\n  * [](https://www.mediawiki.org/)"
            }
        ]
    },
    {
        "feature": "Session History",
        "sub_feature": "Surf Go menuitems",
        "description": "Verify browser goes back and forward to recently visited sites",
        "tc_name": {
            "title": "surf-golinks",
            "content": "https://www-archive.mozilla.org//quality/browser/front-end/testcases/history/surf-golinks"
        },
        "test_case": [
            {
                "title": "Purpose",
                "content": "This basic testcase is designed to verify that links generated from session\nhistory in the Go menu function properly."
            },
            {
                "title": "Initial Conditions",
                "content": "Execute the [gomenu-list.html](/quality/browser/front-\nend/testcases/history/gomenu-list) testcase first."
            },
            {
                "title": "Steps/Description",
                "content": "1. Select Go|Back.\n  2. Select Go|Forward.\n  3. Select Go|Netcenter.\n  4. Click any link on the page."
            },
            {
                "title": "Expected Results",
                "content": "1. Each selection should take you to the appropriate page in your session history.\n  2. After step(4), the Go menu should only contain \"Netcenter\" and the title of the page you just surfed to by clicking a link.\n\n* * *\n\n  * [Site Map](/sitemap)\n  * [Security Updates](../../../../../security/)\n  * [Contact Us](../../../../../contact/)\n  * [Donate](/foundation/donate)\n\nPortions of this content are (C) 1998-2009 by individual mozilla.org contributors; content available under a Creative Commons license | [Details](http://www.mozilla.org/foundation/licensing/website-content).\n\nLast modified March 3, 2007 [Document History](http://bonsai-\nwww.mozilla.org/cvslog.cgi?file=mozilla-org/html/quality/browser/front-\nend/testcases/history/surf-golinks.html&rev=&root=/www/)"
            }
        ],
        "reference": [
            {
                "title": "Contents",
                "content": "* 1 Introduction\n  * 2 Places history features\n  * 3 Example\n  * 4 Bookmark pages and notes\n  * 5 Required information\n  * 6 Database design\n  * 7 Performance\n    * 7.1 Link coloring\n    * 7.2 Database size"
            },
            {
                "title": "Introduction",
                "content": "The places history system is a redesign of the Firefox global history system\nusing the new SQLite-based mozStorage APIs. This system provides additional\nperformance, flexibility, and querying capabilities.\n\nSee also:\n\n  * [Places](/Places \"Places\")\n  * [Annotations](/Annotations \"Annotations\")\n  * [Firefox:2.0_Bookmarks](/Firefox:2.0_Bookmarks \"Firefox:2.0 Bookmarks\")"
            },
            {
                "title": "Places history features",
                "content": "The major places history views will be queries over places visited by time.\nThe user will be able to select any date range and see when they visited each\npage. Actually showing which pages were visited during a given time period\nmeans we will have to store every time the user visits any page, rather than\njust the last visit time. This fixes some problems with the old history system\nwhere items would move around if you visited them again.\n\nThese view should be as organized and as concise as possible. The old history\nsystem includes many redirect pages in the view, and doesn't have things like\nfavicons and good grouping that might make it easier to locate pages of\ninterest. As a result, favicons for every page will be stored for viewing in\nhistory, and we will provide better domain-style grouping and a calendar for\npicking days rather than a tree view.\n\nThe second most user-visible history feature will be keyword searching. This\nwill be essentially unchanged from the old system, which is too bad because\nthe current system sucks. Because there is no word index, we do a brute-force\nsearch over all titles for the keyword in question. While sometimes useful,\nthis is not always what you want, resulting in a number of third-party history\nindexing products. Long term, it would be nice to index pages you visit. For\nthe coming release it might be nice to provide a hook for third-party products\nso they can provide text searching capabilities to the places system.\n\nThe last major change will be the ability to define complex queries over the\nhistory and bookmark systems. Most users will not be generating such queries,\nbut they can be used to provide a variety of nice features. For example, a\nquery folder can be created for \"My favorite pages\" which contains the 20 most\nfrequently visited URLs in history. A query for the most frequently visited\npages that are not bookmarked provides a good candidate list for suggesting\nbookmarks."
            },
            {
                "title": "Example",
                "content": "This screenshot shows some of these ideas:\n\n[](/File:History_grouping.png)  \n_Image credit: Brett Wilson,<http://maxradi.us/>_\n\nAll pages have favicons for better visual differentiation and grouping. Pages\nare arranged into \"sessions\" consisting of followed links. Typing a new URL or\nfollowing a bookmark gives you a new \"session\" which appears as a dotted line\nin this image. This is an actual screenshot, but the ugly redirect pages have\nbeen manually removed. Proper tracking of redirect pages is pending, see\n[Browser_History:Redirects](/Browser_History:Redirects \"Browser\nHistory:Redirects\").\n\nAn informal goal is to save and expose enough information for a variety of\ninteresting visualization or suggestion extensions to be created. For example:\n\n  * A graph of the user's browsing behavior, showing which pages were visited and when and how the user navigated between them.\n  * Suggesting links. By looking at what link the user frequently visits from the current page, perhaps some sort of suggestion or prefetching could take place. For some pages, this indication would be very strong. Other AI-like things could potentially be done. For example, many people visit the same set of sites when they open the browser in the morning. It would be nice if something could be done to make this nicer."
            },
            {
                "title": "Bookmark pages and notes",
                "content": "Firefox 2 will likely have some kind of bookmark button for easy bookmarking\nof pages. This button will be illuminated whenever the user is on a bookmarked\npage, but redirects provide an extra problem. If the bookmark page is moved,\nor more commonly, if the user manually sets a bookmark, for example\n\"amazon.com\", they will be redirected. This destination page won't be\nbookmarked, so the button will not be illuminated. The old history system also\nhad problems with redirected bookmarks because the favicons would never get\nset properly. Therefore, we need to know more about redirects to handle these\ncases correctly.\n\nIf other annotations are stored with pages, redirects could also pose\nproblems. For example, if I have notes on a page and it is redirected, my\nnotes will not be available to me. There should be a way for services using\nannotation functionality to see if the current page was ever redirected from\nsomewhere else, and to also check those pages for annotations of interest.\nMore on redirects can be read on\n[Browser_History:Redirects](/Browser_History:Redirects \"Browser\nHistory:Redirects\")."
            },
            {
                "title": "Required information",
                "content": "It will be necessary to collect and store much more information than is done\nin the old history system. To extract information about sequences of page\nviews, we need to know exactly which page generated each navigation. Because\nthe same page could be opened in more than one tab/window at once, the URL is\nnot sufficient for this task."
            },
            {
                "title": "Database design",
                "content": "The history will be stored in two SQL tables — \"moz_history\" and\n\"moz_historyvisit\".\n\nThe \"history\" table essentially duplicates the functionality of the current\n[Mork](/Mork \"Mork\") history table: It contains:\n\n  * Unique ID (primary key)\n  * URL\n  * Title\n  * User-defined title\n  * Visit count\n  * Last visit date\n  * Host name (see below)\n  * Hidden (bool)\n  * Typed (bool)\n\nNote that the host name is stored backwards, unlike the current table. This is\ndone so that it can be indexed alphabetically and we can quickly pull out all\npages within any \"mozilla.org\" domain by asking for hostname fields that begin\nwith \"gro.allizom.\" A period is always appended to the reversed hostname.\n\nThe second table stores transitions between pages, which is information\nunavailable now.\n\n  * Source *visit* ID\n  * Destination page ID\n  * Time\n  * Transition type\n\nTransition type will hopefully contain info about whether the link was a\nredirect clicked, opened in new tab/window, typed, just an image on the page,\netc.\n\nBecause the source for each visit is another visit, not just a URL, we can\ntrack transitions between specific viewings of pages."
            },
            {
                "title": "Performance",
                "content": "The SQLite database system does file-level locking to manage access to the\ndatabase. This means that for every transaction (even read), the database file\nmust be checked for changes to update the cache, and locked. Most systems can\ndo this quickly, although this operation is clearly not good for performance.\nSome Linux/Unix users may have their home directories and profiles stored on a\nnetwork-mounted drive. In these cases, individual database accesses can be\nrelatively expensive.\n\nTherefore, it is very important that database access be minimized and grouped\nin transactions. A new query/result format will be used instead of RDF. RDF\nrequires many extra transactions, to retrieve the ID of a URL, then to\nretrieve the title, then to retrieve the visit date, etc. This makes\nperformance, especially for network users, unacceptably slow. The new query\nsystem will retrieve one set of results for one query, meaning that there will\nbe only one database access or the accesses can be internally grouped in a\ntransaction. Initial tests of this system show that is is plenty fast enough\nover a good network and virtually instant for local users (the majority).\n\n### Link coloring\n\nLink coloring is perhaps the most important performance issue, since this\ndirectly affects page load time. A naive approach requires querying the\ndatabase for each link that comes in. Even when the history database is local,\nasking the OS for a file lock for each link on a page will be very bad for\nperformance.\n\nTo solve this problem, URLs will be loaded into an in-memory database when the\napplication starts (or, perhaps, the first time they are required). These\nlinks can be sorted so they can be accessed very quickly, and require no OS\ncalls or file locks. This list will only contain URLs, and none of the extra\ninformation such as visit dates, visit counts, and titles.\n\nBecause these data will reside in memory, it is important to not take too much\nspace. If we succeed in the goal of allowing users to keep large amounts of\nhistory, size could be significant. We will, therefore, want to limit the\nnumber of URLs that we bring into memory, either allowing, for example, the\npast 10,000 URLs, or the past 30 days of visits.\n\nA two-level approach may improve perceived size. Most URLs in the table are\nadvertisements and random images from Web sites to which the user will never\nsee a link, and probably wouldn't even care about if they did. Then there are\nthe top-level pages (with hidden=false) that are the top-level URLs that the\nuser actually visited. They are much more likely to care about these top-level\nlinks. To save space and speed things up, we could keep the past X URLs in\nmemory, plus the previous Y top-level URLs. It is unlikely that users will\neven notice that most of their history links are not being used for link\ncoloring.\n\n### Database size\n\nI just imported my [Mork](/Mork \"Mork\") history database file into the\nequivalent SQLite format. The SQLite file size was one-tenth of the original\nMork file. So, even though we will be storing more information (every time a\npage is visited) overall database size will probably be smaller.\n\nRetrieved from\n\"[https://wiki.mozilla.org/index.php?title=Browser_History&oldid=976107](https://wiki.mozilla.org/index.php?title=Browser_History&oldid=976107)\""
            },
            {
                "title": "Navigation menu",
                "content": "###  Personal tools\n\n  * [Log in](/index.php?title=Special:UserLogin&returnto=Browser+History \"You are encouraged to log in; however, it is not mandatory \\[o\\]\")\n  * [Request account](/Special:RequestAccount \"You are encouraged to create an account and log in; however, it is not mandatory\")\n\n###  Namespaces\n\n  * [Page](/Browser_History \"View the content page \\[c\\]\")\n  * [Discussion](/Talk:Browser_History \"Discussion about the content page \\[t\\]\")\n\nEnglish\n\n###  Views\n\n  * [Read](/Browser_History)\n  * [View source](/index.php?title=Browser_History&action=edit \"This page is protected.\nYou can view its source \\[e\\]\")\n\n  * [View history](/index.php?title=Browser_History&action=history \"Past revisions of this page \\[h\\]\")\n\nMore\n\n###  Search\n\n[](/Main_Page \"Visit the main page\")\n\n###  Navigation\n\n  * [Main page](/Main_Page \"Visit the main page \\[z\\]\")\n  * [Product releases](/Releases)\n  * [New pages](/Special:NewPages)\n  * [Recent changes](/Special:RecentChanges \"A list of recent changes in the wiki \\[r\\]\")\n  * [Recent uploads](/Special:NewFiles)\n  * [Help](/MozillaWiki:Help \"The place to find out\")\n\n###  How to Contribute\n\n  * [Contribute to Mozilla](/Contribute)\n  * [Community Portal](//community.mozilla.org)\n  * [Community Participation Guidelines](//www.mozilla.org/en-US/about/governance/policies/participation/)\n\n###  MozillaWiki\n\n  * [About](/MozillaWiki:About)\n  * [Team](/MozillaWiki:Team)\n  * [Policies](/MozillaWiki:Policies)\n  * [Report a wiki bug](//bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=wiki.mozilla.org)\n\n###  Around Mozilla\n\n  * [Mozilla Support](//support.mozilla.org/)\n  * [Give product Feedback](//connect.mozilla.org/)\n  * [Mozilla Developer Network](//developer.mozilla.org/)\n  * [Planet Mozilla](//planet.mozilla.org/)\n\n###  Tools\n\n  * [What links here](/Special:WhatLinksHere/Browser_History \"A list of all wiki pages that link here \\[j\\]\")\n  * [Related changes](/Special:RecentChangesLinked/Browser_History \"Recent changes in pages linked from this page \\[k\\]\")\n  * [Special pages](/Special:SpecialPages \"A list of all special pages \\[q\\]\")\n  * [Printable version](javascript:print\\(\\); \"Printable version of this page \\[p\\]\")\n  * [Permanent link](/index.php?title=Browser_History&oldid=976107 \"Permanent link to this revision of this page\")\n  * [Page information](/index.php?title=Browser_History&action=info \"More information about this page\")\n\n  * This page was last edited on 12 May 2014, at 22:33.\n\n  * [Privacy policy](/MozillaWiki:Privacy_policy)\n  * [About MozillaWiki](/MozillaWiki:About)\n  * [Mobile view](https://wiki.mozilla.org/index.php?title=Browser_History&mobileaction=toggle_view_mobile)\n\n  * [](https://www.mediawiki.org/)"
            }
        ]
    },
    {
        "feature": "Session History",
        "sub_feature": "Back and forward with frames",
        "description": "Verify browser goes back and forward correctly from page with frames.",
        "tc_name": {
            "title": "frame-history",
            "content": "https://www-archive.mozilla.org//quality/browser/front-end/testcases/history/frame-history"
        },
        "test_case": [],
        "reference": [
            {
                "title": "Contents",
                "content": "* 1 Introduction\n  * 2 Places history features\n  * 3 Example\n  * 4 Bookmark pages and notes\n  * 5 Required information\n  * 6 Database design\n  * 7 Performance\n    * 7.1 Link coloring\n    * 7.2 Database size"
            },
            {
                "title": "Introduction",
                "content": "The places history system is a redesign of the Firefox global history system\nusing the new SQLite-based mozStorage APIs. This system provides additional\nperformance, flexibility, and querying capabilities.\n\nSee also:\n\n  * [Places](/Places \"Places\")\n  * [Annotations](/Annotations \"Annotations\")\n  * [Firefox:2.0_Bookmarks](/Firefox:2.0_Bookmarks \"Firefox:2.0 Bookmarks\")"
            },
            {
                "title": "Places history features",
                "content": "The major places history views will be queries over places visited by time.\nThe user will be able to select any date range and see when they visited each\npage. Actually showing which pages were visited during a given time period\nmeans we will have to store every time the user visits any page, rather than\njust the last visit time. This fixes some problems with the old history system\nwhere items would move around if you visited them again.\n\nThese view should be as organized and as concise as possible. The old history\nsystem includes many redirect pages in the view, and doesn't have things like\nfavicons and good grouping that might make it easier to locate pages of\ninterest. As a result, favicons for every page will be stored for viewing in\nhistory, and we will provide better domain-style grouping and a calendar for\npicking days rather than a tree view.\n\nThe second most user-visible history feature will be keyword searching. This\nwill be essentially unchanged from the old system, which is too bad because\nthe current system sucks. Because there is no word index, we do a brute-force\nsearch over all titles for the keyword in question. While sometimes useful,\nthis is not always what you want, resulting in a number of third-party history\nindexing products. Long term, it would be nice to index pages you visit. For\nthe coming release it might be nice to provide a hook for third-party products\nso they can provide text searching capabilities to the places system.\n\nThe last major change will be the ability to define complex queries over the\nhistory and bookmark systems. Most users will not be generating such queries,\nbut they can be used to provide a variety of nice features. For example, a\nquery folder can be created for \"My favorite pages\" which contains the 20 most\nfrequently visited URLs in history. A query for the most frequently visited\npages that are not bookmarked provides a good candidate list for suggesting\nbookmarks."
            },
            {
                "title": "Example",
                "content": "This screenshot shows some of these ideas:\n\n[](/File:History_grouping.png)  \n_Image credit: Brett Wilson,<http://maxradi.us/>_\n\nAll pages have favicons for better visual differentiation and grouping. Pages\nare arranged into \"sessions\" consisting of followed links. Typing a new URL or\nfollowing a bookmark gives you a new \"session\" which appears as a dotted line\nin this image. This is an actual screenshot, but the ugly redirect pages have\nbeen manually removed. Proper tracking of redirect pages is pending, see\n[Browser_History:Redirects](/Browser_History:Redirects \"Browser\nHistory:Redirects\").\n\nAn informal goal is to save and expose enough information for a variety of\ninteresting visualization or suggestion extensions to be created. For example:\n\n  * A graph of the user's browsing behavior, showing which pages were visited and when and how the user navigated between them.\n  * Suggesting links. By looking at what link the user frequently visits from the current page, perhaps some sort of suggestion or prefetching could take place. For some pages, this indication would be very strong. Other AI-like things could potentially be done. For example, many people visit the same set of sites when they open the browser in the morning. It would be nice if something could be done to make this nicer."
            },
            {
                "title": "Bookmark pages and notes",
                "content": "Firefox 2 will likely have some kind of bookmark button for easy bookmarking\nof pages. This button will be illuminated whenever the user is on a bookmarked\npage, but redirects provide an extra problem. If the bookmark page is moved,\nor more commonly, if the user manually sets a bookmark, for example\n\"amazon.com\", they will be redirected. This destination page won't be\nbookmarked, so the button will not be illuminated. The old history system also\nhad problems with redirected bookmarks because the favicons would never get\nset properly. Therefore, we need to know more about redirects to handle these\ncases correctly.\n\nIf other annotations are stored with pages, redirects could also pose\nproblems. For example, if I have notes on a page and it is redirected, my\nnotes will not be available to me. There should be a way for services using\nannotation functionality to see if the current page was ever redirected from\nsomewhere else, and to also check those pages for annotations of interest.\nMore on redirects can be read on\n[Browser_History:Redirects](/Browser_History:Redirects \"Browser\nHistory:Redirects\")."
            },
            {
                "title": "Required information",
                "content": "It will be necessary to collect and store much more information than is done\nin the old history system. To extract information about sequences of page\nviews, we need to know exactly which page generated each navigation. Because\nthe same page could be opened in more than one tab/window at once, the URL is\nnot sufficient for this task."
            },
            {
                "title": "Database design",
                "content": "The history will be stored in two SQL tables — \"moz_history\" and\n\"moz_historyvisit\".\n\nThe \"history\" table essentially duplicates the functionality of the current\n[Mork](/Mork \"Mork\") history table: It contains:\n\n  * Unique ID (primary key)\n  * URL\n  * Title\n  * User-defined title\n  * Visit count\n  * Last visit date\n  * Host name (see below)\n  * Hidden (bool)\n  * Typed (bool)\n\nNote that the host name is stored backwards, unlike the current table. This is\ndone so that it can be indexed alphabetically and we can quickly pull out all\npages within any \"mozilla.org\" domain by asking for hostname fields that begin\nwith \"gro.allizom.\" A period is always appended to the reversed hostname.\n\nThe second table stores transitions between pages, which is information\nunavailable now.\n\n  * Source *visit* ID\n  * Destination page ID\n  * Time\n  * Transition type\n\nTransition type will hopefully contain info about whether the link was a\nredirect clicked, opened in new tab/window, typed, just an image on the page,\netc.\n\nBecause the source for each visit is another visit, not just a URL, we can\ntrack transitions between specific viewings of pages."
            },
            {
                "title": "Performance",
                "content": "The SQLite database system does file-level locking to manage access to the\ndatabase. This means that for every transaction (even read), the database file\nmust be checked for changes to update the cache, and locked. Most systems can\ndo this quickly, although this operation is clearly not good for performance.\nSome Linux/Unix users may have their home directories and profiles stored on a\nnetwork-mounted drive. In these cases, individual database accesses can be\nrelatively expensive.\n\nTherefore, it is very important that database access be minimized and grouped\nin transactions. A new query/result format will be used instead of RDF. RDF\nrequires many extra transactions, to retrieve the ID of a URL, then to\nretrieve the title, then to retrieve the visit date, etc. This makes\nperformance, especially for network users, unacceptably slow. The new query\nsystem will retrieve one set of results for one query, meaning that there will\nbe only one database access or the accesses can be internally grouped in a\ntransaction. Initial tests of this system show that is is plenty fast enough\nover a good network and virtually instant for local users (the majority).\n\n### Link coloring\n\nLink coloring is perhaps the most important performance issue, since this\ndirectly affects page load time. A naive approach requires querying the\ndatabase for each link that comes in. Even when the history database is local,\nasking the OS for a file lock for each link on a page will be very bad for\nperformance.\n\nTo solve this problem, URLs will be loaded into an in-memory database when the\napplication starts (or, perhaps, the first time they are required). These\nlinks can be sorted so they can be accessed very quickly, and require no OS\ncalls or file locks. This list will only contain URLs, and none of the extra\ninformation such as visit dates, visit counts, and titles.\n\nBecause these data will reside in memory, it is important to not take too much\nspace. If we succeed in the goal of allowing users to keep large amounts of\nhistory, size could be significant. We will, therefore, want to limit the\nnumber of URLs that we bring into memory, either allowing, for example, the\npast 10,000 URLs, or the past 30 days of visits.\n\nA two-level approach may improve perceived size. Most URLs in the table are\nadvertisements and random images from Web sites to which the user will never\nsee a link, and probably wouldn't even care about if they did. Then there are\nthe top-level pages (with hidden=false) that are the top-level URLs that the\nuser actually visited. They are much more likely to care about these top-level\nlinks. To save space and speed things up, we could keep the past X URLs in\nmemory, plus the previous Y top-level URLs. It is unlikely that users will\neven notice that most of their history links are not being used for link\ncoloring.\n\n### Database size\n\nI just imported my [Mork](/Mork \"Mork\") history database file into the\nequivalent SQLite format. The SQLite file size was one-tenth of the original\nMork file. So, even though we will be storing more information (every time a\npage is visited) overall database size will probably be smaller.\n\nRetrieved from\n\"[https://wiki.mozilla.org/index.php?title=Browser_History&oldid=976107](https://wiki.mozilla.org/index.php?title=Browser_History&oldid=976107)\""
            },
            {
                "title": "Navigation menu",
                "content": "###  Personal tools\n\n  * [Log in](/index.php?title=Special:UserLogin&returnto=Browser+History \"You are encouraged to log in; however, it is not mandatory \\[o\\]\")\n  * [Request account](/Special:RequestAccount \"You are encouraged to create an account and log in; however, it is not mandatory\")\n\n###  Namespaces\n\n  * [Page](/Browser_History \"View the content page \\[c\\]\")\n  * [Discussion](/Talk:Browser_History \"Discussion about the content page \\[t\\]\")\n\nEnglish\n\n###  Views\n\n  * [Read](/Browser_History)\n  * [View source](/index.php?title=Browser_History&action=edit \"This page is protected.\nYou can view its source \\[e\\]\")\n\n  * [View history](/index.php?title=Browser_History&action=history \"Past revisions of this page \\[h\\]\")\n\nMore\n\n###  Search\n\n[](/Main_Page \"Visit the main page\")\n\n###  Navigation\n\n  * [Main page](/Main_Page \"Visit the main page \\[z\\]\")\n  * [Product releases](/Releases)\n  * [New pages](/Special:NewPages)\n  * [Recent changes](/Special:RecentChanges \"A list of recent changes in the wiki \\[r\\]\")\n  * [Recent uploads](/Special:NewFiles)\n  * [Help](/MozillaWiki:Help \"The place to find out\")\n\n###  How to Contribute\n\n  * [Contribute to Mozilla](/Contribute)\n  * [Community Portal](//community.mozilla.org)\n  * [Community Participation Guidelines](//www.mozilla.org/en-US/about/governance/policies/participation/)\n\n###  MozillaWiki\n\n  * [About](/MozillaWiki:About)\n  * [Team](/MozillaWiki:Team)\n  * [Policies](/MozillaWiki:Policies)\n  * [Report a wiki bug](//bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=wiki.mozilla.org)\n\n###  Around Mozilla\n\n  * [Mozilla Support](//support.mozilla.org/)\n  * [Give product Feedback](//connect.mozilla.org/)\n  * [Mozilla Developer Network](//developer.mozilla.org/)\n  * [Planet Mozilla](//planet.mozilla.org/)\n\n###  Tools\n\n  * [What links here](/Special:WhatLinksHere/Browser_History \"A list of all wiki pages that link here \\[j\\]\")\n  * [Related changes](/Special:RecentChangesLinked/Browser_History \"Recent changes in pages linked from this page \\[k\\]\")\n  * [Special pages](/Special:SpecialPages \"A list of all special pages \\[q\\]\")\n  * [Printable version](javascript:print\\(\\); \"Printable version of this page \\[p\\]\")\n  * [Permanent link](/index.php?title=Browser_History&oldid=976107 \"Permanent link to this revision of this page\")\n  * [Page information](/index.php?title=Browser_History&action=info \"More information about this page\")\n\n  * This page was last edited on 12 May 2014, at 22:33.\n\n  * [Privacy policy](/MozillaWiki:Privacy_policy)\n  * [About MozillaWiki](/MozillaWiki:About)\n  * [Mobile view](https://wiki.mozilla.org/index.php?title=Browser_History&mobileaction=toggle_view_mobile)\n\n  * [](https://www.mediawiki.org/)"
            }
        ]
    },
    {
        "feature": "Session History",
        "sub_feature": "New session",
        "description": "Verify that a new session is started with a new browser window or a restart.",
        "tc_name": {
            "title": "new-session",
            "content": "https://www-archive.mozilla.org//quality/browser/front-end/testcases/history/new-session"
        },
        "test_case": [
            {
                "title": "Purpose",
                "content": "This basic testcase is designed to verify that a new, empty session history\nfile is created when appropriate."
            },
            {
                "title": "Initial Conditions",
                "content": "* You must have used the installation of the browser you plan to test.\n  * If you have not, browse around some, then come back. Or run the [gomenu-list](/quality/browser/front-end/testcases/history/gomenu-list) test first."
            },
            {
                "title": "Steps/Description",
                "content": "1. Select File|New Navigator Window.\n  2. Select the Go menu.\n  3. Quit and restart the browser.\n  4. Select the Go menu."
            },
            {
                "title": "Expected Results",
                "content": "After steps(2) and (4) the browser go meu should be \"empty\" ie only Back,\nForward, and Home should be listed.\n\n* * *\n\n  * [Site Map](/sitemap)\n  * [Security Updates](../../../../../security/)\n  * [Contact Us](../../../../../contact/)\n  * [Donate](/foundation/donate)\n\nPortions of this content are (C) 1998-2009 by individual mozilla.org contributors; content available under a Creative Commons license | [Details](http://www.mozilla.org/foundation/licensing/website-content).\n\nLast modified March 3, 2007 [Document History](http://bonsai-\nwww.mozilla.org/cvslog.cgi?file=mozilla-org/html/quality/browser/front-\nend/testcases/history/new-session.html&rev=&root=/www/)"
            }
        ],
        "reference": [
            {
                "title": "Contents",
                "content": "* 1 Introduction\n  * 2 Places history features\n  * 3 Example\n  * 4 Bookmark pages and notes\n  * 5 Required information\n  * 6 Database design\n  * 7 Performance\n    * 7.1 Link coloring\n    * 7.2 Database size"
            },
            {
                "title": "Introduction",
                "content": "The places history system is a redesign of the Firefox global history system\nusing the new SQLite-based mozStorage APIs. This system provides additional\nperformance, flexibility, and querying capabilities.\n\nSee also:\n\n  * [Places](/Places \"Places\")\n  * [Annotations](/Annotations \"Annotations\")\n  * [Firefox:2.0_Bookmarks](/Firefox:2.0_Bookmarks \"Firefox:2.0 Bookmarks\")"
            },
            {
                "title": "Places history features",
                "content": "The major places history views will be queries over places visited by time.\nThe user will be able to select any date range and see when they visited each\npage. Actually showing which pages were visited during a given time period\nmeans we will have to store every time the user visits any page, rather than\njust the last visit time. This fixes some problems with the old history system\nwhere items would move around if you visited them again.\n\nThese view should be as organized and as concise as possible. The old history\nsystem includes many redirect pages in the view, and doesn't have things like\nfavicons and good grouping that might make it easier to locate pages of\ninterest. As a result, favicons for every page will be stored for viewing in\nhistory, and we will provide better domain-style grouping and a calendar for\npicking days rather than a tree view.\n\nThe second most user-visible history feature will be keyword searching. This\nwill be essentially unchanged from the old system, which is too bad because\nthe current system sucks. Because there is no word index, we do a brute-force\nsearch over all titles for the keyword in question. While sometimes useful,\nthis is not always what you want, resulting in a number of third-party history\nindexing products. Long term, it would be nice to index pages you visit. For\nthe coming release it might be nice to provide a hook for third-party products\nso they can provide text searching capabilities to the places system.\n\nThe last major change will be the ability to define complex queries over the\nhistory and bookmark systems. Most users will not be generating such queries,\nbut they can be used to provide a variety of nice features. For example, a\nquery folder can be created for \"My favorite pages\" which contains the 20 most\nfrequently visited URLs in history. A query for the most frequently visited\npages that are not bookmarked provides a good candidate list for suggesting\nbookmarks."
            },
            {
                "title": "Example",
                "content": "This screenshot shows some of these ideas:\n\n[](/File:History_grouping.png)  \n_Image credit: Brett Wilson,<http://maxradi.us/>_\n\nAll pages have favicons for better visual differentiation and grouping. Pages\nare arranged into \"sessions\" consisting of followed links. Typing a new URL or\nfollowing a bookmark gives you a new \"session\" which appears as a dotted line\nin this image. This is an actual screenshot, but the ugly redirect pages have\nbeen manually removed. Proper tracking of redirect pages is pending, see\n[Browser_History:Redirects](/Browser_History:Redirects \"Browser\nHistory:Redirects\").\n\nAn informal goal is to save and expose enough information for a variety of\ninteresting visualization or suggestion extensions to be created. For example:\n\n  * A graph of the user's browsing behavior, showing which pages were visited and when and how the user navigated between them.\n  * Suggesting links. By looking at what link the user frequently visits from the current page, perhaps some sort of suggestion or prefetching could take place. For some pages, this indication would be very strong. Other AI-like things could potentially be done. For example, many people visit the same set of sites when they open the browser in the morning. It would be nice if something could be done to make this nicer."
            },
            {
                "title": "Bookmark pages and notes",
                "content": "Firefox 2 will likely have some kind of bookmark button for easy bookmarking\nof pages. This button will be illuminated whenever the user is on a bookmarked\npage, but redirects provide an extra problem. If the bookmark page is moved,\nor more commonly, if the user manually sets a bookmark, for example\n\"amazon.com\", they will be redirected. This destination page won't be\nbookmarked, so the button will not be illuminated. The old history system also\nhad problems with redirected bookmarks because the favicons would never get\nset properly. Therefore, we need to know more about redirects to handle these\ncases correctly.\n\nIf other annotations are stored with pages, redirects could also pose\nproblems. For example, if I have notes on a page and it is redirected, my\nnotes will not be available to me. There should be a way for services using\nannotation functionality to see if the current page was ever redirected from\nsomewhere else, and to also check those pages for annotations of interest.\nMore on redirects can be read on\n[Browser_History:Redirects](/Browser_History:Redirects \"Browser\nHistory:Redirects\")."
            },
            {
                "title": "Required information",
                "content": "It will be necessary to collect and store much more information than is done\nin the old history system. To extract information about sequences of page\nviews, we need to know exactly which page generated each navigation. Because\nthe same page could be opened in more than one tab/window at once, the URL is\nnot sufficient for this task."
            },
            {
                "title": "Database design",
                "content": "The history will be stored in two SQL tables — \"moz_history\" and\n\"moz_historyvisit\".\n\nThe \"history\" table essentially duplicates the functionality of the current\n[Mork](/Mork \"Mork\") history table: It contains:\n\n  * Unique ID (primary key)\n  * URL\n  * Title\n  * User-defined title\n  * Visit count\n  * Last visit date\n  * Host name (see below)\n  * Hidden (bool)\n  * Typed (bool)\n\nNote that the host name is stored backwards, unlike the current table. This is\ndone so that it can be indexed alphabetically and we can quickly pull out all\npages within any \"mozilla.org\" domain by asking for hostname fields that begin\nwith \"gro.allizom.\" A period is always appended to the reversed hostname.\n\nThe second table stores transitions between pages, which is information\nunavailable now.\n\n  * Source *visit* ID\n  * Destination page ID\n  * Time\n  * Transition type\n\nTransition type will hopefully contain info about whether the link was a\nredirect clicked, opened in new tab/window, typed, just an image on the page,\netc.\n\nBecause the source for each visit is another visit, not just a URL, we can\ntrack transitions between specific viewings of pages."
            },
            {
                "title": "Performance",
                "content": "The SQLite database system does file-level locking to manage access to the\ndatabase. This means that for every transaction (even read), the database file\nmust be checked for changes to update the cache, and locked. Most systems can\ndo this quickly, although this operation is clearly not good for performance.\nSome Linux/Unix users may have their home directories and profiles stored on a\nnetwork-mounted drive. In these cases, individual database accesses can be\nrelatively expensive.\n\nTherefore, it is very important that database access be minimized and grouped\nin transactions. A new query/result format will be used instead of RDF. RDF\nrequires many extra transactions, to retrieve the ID of a URL, then to\nretrieve the title, then to retrieve the visit date, etc. This makes\nperformance, especially for network users, unacceptably slow. The new query\nsystem will retrieve one set of results for one query, meaning that there will\nbe only one database access or the accesses can be internally grouped in a\ntransaction. Initial tests of this system show that is is plenty fast enough\nover a good network and virtually instant for local users (the majority).\n\n### Link coloring\n\nLink coloring is perhaps the most important performance issue, since this\ndirectly affects page load time. A naive approach requires querying the\ndatabase for each link that comes in. Even when the history database is local,\nasking the OS for a file lock for each link on a page will be very bad for\nperformance.\n\nTo solve this problem, URLs will be loaded into an in-memory database when the\napplication starts (or, perhaps, the first time they are required). These\nlinks can be sorted so they can be accessed very quickly, and require no OS\ncalls or file locks. This list will only contain URLs, and none of the extra\ninformation such as visit dates, visit counts, and titles.\n\nBecause these data will reside in memory, it is important to not take too much\nspace. If we succeed in the goal of allowing users to keep large amounts of\nhistory, size could be significant. We will, therefore, want to limit the\nnumber of URLs that we bring into memory, either allowing, for example, the\npast 10,000 URLs, or the past 30 days of visits.\n\nA two-level approach may improve perceived size. Most URLs in the table are\nadvertisements and random images from Web sites to which the user will never\nsee a link, and probably wouldn't even care about if they did. Then there are\nthe top-level pages (with hidden=false) that are the top-level URLs that the\nuser actually visited. They are much more likely to care about these top-level\nlinks. To save space and speed things up, we could keep the past X URLs in\nmemory, plus the previous Y top-level URLs. It is unlikely that users will\neven notice that most of their history links are not being used for link\ncoloring.\n\n### Database size\n\nI just imported my [Mork](/Mork \"Mork\") history database file into the\nequivalent SQLite format. The SQLite file size was one-tenth of the original\nMork file. So, even though we will be storing more information (every time a\npage is visited) overall database size will probably be smaller.\n\nRetrieved from\n\"[https://wiki.mozilla.org/index.php?title=Browser_History&oldid=976107](https://wiki.mozilla.org/index.php?title=Browser_History&oldid=976107)\""
            },
            {
                "title": "Navigation menu",
                "content": "###  Personal tools\n\n  * [Log in](/index.php?title=Special:UserLogin&returnto=Browser+History \"You are encouraged to log in; however, it is not mandatory \\[o\\]\")\n  * [Request account](/Special:RequestAccount \"You are encouraged to create an account and log in; however, it is not mandatory\")\n\n###  Namespaces\n\n  * [Page](/Browser_History \"View the content page \\[c\\]\")\n  * [Discussion](/Talk:Browser_History \"Discussion about the content page \\[t\\]\")\n\nEnglish\n\n###  Views\n\n  * [Read](/Browser_History)\n  * [View source](/index.php?title=Browser_History&action=edit \"This page is protected.\nYou can view its source \\[e\\]\")\n\n  * [View history](/index.php?title=Browser_History&action=history \"Past revisions of this page \\[h\\]\")\n\nMore\n\n###  Search\n\n[](/Main_Page \"Visit the main page\")\n\n###  Navigation\n\n  * [Main page](/Main_Page \"Visit the main page \\[z\\]\")\n  * [Product releases](/Releases)\n  * [New pages](/Special:NewPages)\n  * [Recent changes](/Special:RecentChanges \"A list of recent changes in the wiki \\[r\\]\")\n  * [Recent uploads](/Special:NewFiles)\n  * [Help](/MozillaWiki:Help \"The place to find out\")\n\n###  How to Contribute\n\n  * [Contribute to Mozilla](/Contribute)\n  * [Community Portal](//community.mozilla.org)\n  * [Community Participation Guidelines](//www.mozilla.org/en-US/about/governance/policies/participation/)\n\n###  MozillaWiki\n\n  * [About](/MozillaWiki:About)\n  * [Team](/MozillaWiki:Team)\n  * [Policies](/MozillaWiki:Policies)\n  * [Report a wiki bug](//bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=wiki.mozilla.org)\n\n###  Around Mozilla\n\n  * [Mozilla Support](//support.mozilla.org/)\n  * [Give product Feedback](//connect.mozilla.org/)\n  * [Mozilla Developer Network](//developer.mozilla.org/)\n  * [Planet Mozilla](//planet.mozilla.org/)\n\n###  Tools\n\n  * [What links here](/Special:WhatLinksHere/Browser_History \"A list of all wiki pages that link here \\[j\\]\")\n  * [Related changes](/Special:RecentChangesLinked/Browser_History \"Recent changes in pages linked from this page \\[k\\]\")\n  * [Special pages](/Special:SpecialPages \"A list of all special pages \\[q\\]\")\n  * [Printable version](javascript:print\\(\\); \"Printable version of this page \\[p\\]\")\n  * [Permanent link](/index.php?title=Browser_History&oldid=976107 \"Permanent link to this revision of this page\")\n  * [Page information](/index.php?title=Browser_History&action=info \"More information about this page\")\n\n  * This page was last edited on 12 May 2014, at 22:33.\n\n  * [Privacy policy](/MozillaWiki:Privacy_policy)\n  * [About MozillaWiki](/MozillaWiki:About)\n  * [Mobile view](https://wiki.mozilla.org/index.php?title=Browser_History&mobileaction=toggle_view_mobile)\n\n  * [](https://www.mediawiki.org/)"
            }
        ]
    },
    {
        "feature": "Session History",
        "sub_feature": "Back and forward with named anchors",
        "description": "Verify browser goes back and forward correctly from sites that use named anchors",
        "tc_name": {
            "title": "anchor-history",
            "content": "https://www-archive.mozilla.org//quality/browser/front-end/testcases/history/anchor-history"
        },
        "test_case": [
            {
                "title": "Purpose",
                "content": "This testcase is designed to verify that anchored links are properly added to\nthe global history file."
            },
            {
                "title": "Initial Conditions",
                "content": "Make the window short enough so that you can only see the Steps/Description\nportion of this document."
            },
            {
                "title": "Steps/Description",
                "content": "1. Click on this anchor link to the purpose.\n  2. Click on this anchor link to the steps.\n  3. Click on this anchor link to the links.\n  4. Click \"Back\" three times. Click forward three times.\n  5. Select Go|History."
            },
            {
                "title": "Expected Results",
                "content": "1. You'll see the view scroll as you follow each link, the url should be updated with the #<anchorname> appended to the url.\n  2. Step(4) should load the pages in this order; #steps, #purpose, main page, #pupose, #steps, #links.\n  3. The Global History window should list each named anchor as a separate entry.\n\n* * *\n\n  * [Site Map](/sitemap)\n  * [Security Updates](../../../../../security/)\n  * [Contact Us](../../../../../contact/)\n  * [Donate](/foundation/donate)\n\nPortions of this content are (C) 1998-2009 by individual mozilla.org contributors; content available under a Creative Commons license | [Details](http://www.mozilla.org/foundation/licensing/website-content).\n\nLast modified March 3, 2007 [Document History](http://bonsai-\nwww.mozilla.org/cvslog.cgi?file=mozilla-org/html/quality/browser/front-\nend/testcases/history/anchor-history.html&rev=&root=/www/)"
            }
        ],
        "reference": [
            {
                "title": "Contents",
                "content": "* 1 Introduction\n  * 2 Places history features\n  * 3 Example\n  * 4 Bookmark pages and notes\n  * 5 Required information\n  * 6 Database design\n  * 7 Performance\n    * 7.1 Link coloring\n    * 7.2 Database size"
            },
            {
                "title": "Introduction",
                "content": "The places history system is a redesign of the Firefox global history system\nusing the new SQLite-based mozStorage APIs. This system provides additional\nperformance, flexibility, and querying capabilities.\n\nSee also:\n\n  * [Places](/Places \"Places\")\n  * [Annotations](/Annotations \"Annotations\")\n  * [Firefox:2.0_Bookmarks](/Firefox:2.0_Bookmarks \"Firefox:2.0 Bookmarks\")"
            },
            {
                "title": "Places history features",
                "content": "The major places history views will be queries over places visited by time.\nThe user will be able to select any date range and see when they visited each\npage. Actually showing which pages were visited during a given time period\nmeans we will have to store every time the user visits any page, rather than\njust the last visit time. This fixes some problems with the old history system\nwhere items would move around if you visited them again.\n\nThese view should be as organized and as concise as possible. The old history\nsystem includes many redirect pages in the view, and doesn't have things like\nfavicons and good grouping that might make it easier to locate pages of\ninterest. As a result, favicons for every page will be stored for viewing in\nhistory, and we will provide better domain-style grouping and a calendar for\npicking days rather than a tree view.\n\nThe second most user-visible history feature will be keyword searching. This\nwill be essentially unchanged from the old system, which is too bad because\nthe current system sucks. Because there is no word index, we do a brute-force\nsearch over all titles for the keyword in question. While sometimes useful,\nthis is not always what you want, resulting in a number of third-party history\nindexing products. Long term, it would be nice to index pages you visit. For\nthe coming release it might be nice to provide a hook for third-party products\nso they can provide text searching capabilities to the places system.\n\nThe last major change will be the ability to define complex queries over the\nhistory and bookmark systems. Most users will not be generating such queries,\nbut they can be used to provide a variety of nice features. For example, a\nquery folder can be created for \"My favorite pages\" which contains the 20 most\nfrequently visited URLs in history. A query for the most frequently visited\npages that are not bookmarked provides a good candidate list for suggesting\nbookmarks."
            },
            {
                "title": "Example",
                "content": "This screenshot shows some of these ideas:\n\n[](/File:History_grouping.png)  \n_Image credit: Brett Wilson,<http://maxradi.us/>_\n\nAll pages have favicons for better visual differentiation and grouping. Pages\nare arranged into \"sessions\" consisting of followed links. Typing a new URL or\nfollowing a bookmark gives you a new \"session\" which appears as a dotted line\nin this image. This is an actual screenshot, but the ugly redirect pages have\nbeen manually removed. Proper tracking of redirect pages is pending, see\n[Browser_History:Redirects](/Browser_History:Redirects \"Browser\nHistory:Redirects\").\n\nAn informal goal is to save and expose enough information for a variety of\ninteresting visualization or suggestion extensions to be created. For example:\n\n  * A graph of the user's browsing behavior, showing which pages were visited and when and how the user navigated between them.\n  * Suggesting links. By looking at what link the user frequently visits from the current page, perhaps some sort of suggestion or prefetching could take place. For some pages, this indication would be very strong. Other AI-like things could potentially be done. For example, many people visit the same set of sites when they open the browser in the morning. It would be nice if something could be done to make this nicer."
            },
            {
                "title": "Bookmark pages and notes",
                "content": "Firefox 2 will likely have some kind of bookmark button for easy bookmarking\nof pages. This button will be illuminated whenever the user is on a bookmarked\npage, but redirects provide an extra problem. If the bookmark page is moved,\nor more commonly, if the user manually sets a bookmark, for example\n\"amazon.com\", they will be redirected. This destination page won't be\nbookmarked, so the button will not be illuminated. The old history system also\nhad problems with redirected bookmarks because the favicons would never get\nset properly. Therefore, we need to know more about redirects to handle these\ncases correctly.\n\nIf other annotations are stored with pages, redirects could also pose\nproblems. For example, if I have notes on a page and it is redirected, my\nnotes will not be available to me. There should be a way for services using\nannotation functionality to see if the current page was ever redirected from\nsomewhere else, and to also check those pages for annotations of interest.\nMore on redirects can be read on\n[Browser_History:Redirects](/Browser_History:Redirects \"Browser\nHistory:Redirects\")."
            },
            {
                "title": "Required information",
                "content": "It will be necessary to collect and store much more information than is done\nin the old history system. To extract information about sequences of page\nviews, we need to know exactly which page generated each navigation. Because\nthe same page could be opened in more than one tab/window at once, the URL is\nnot sufficient for this task."
            },
            {
                "title": "Database design",
                "content": "The history will be stored in two SQL tables — \"moz_history\" and\n\"moz_historyvisit\".\n\nThe \"history\" table essentially duplicates the functionality of the current\n[Mork](/Mork \"Mork\") history table: It contains:\n\n  * Unique ID (primary key)\n  * URL\n  * Title\n  * User-defined title\n  * Visit count\n  * Last visit date\n  * Host name (see below)\n  * Hidden (bool)\n  * Typed (bool)\n\nNote that the host name is stored backwards, unlike the current table. This is\ndone so that it can be indexed alphabetically and we can quickly pull out all\npages within any \"mozilla.org\" domain by asking for hostname fields that begin\nwith \"gro.allizom.\" A period is always appended to the reversed hostname.\n\nThe second table stores transitions between pages, which is information\nunavailable now.\n\n  * Source *visit* ID\n  * Destination page ID\n  * Time\n  * Transition type\n\nTransition type will hopefully contain info about whether the link was a\nredirect clicked, opened in new tab/window, typed, just an image on the page,\netc.\n\nBecause the source for each visit is another visit, not just a URL, we can\ntrack transitions between specific viewings of pages."
            },
            {
                "title": "Performance",
                "content": "The SQLite database system does file-level locking to manage access to the\ndatabase. This means that for every transaction (even read), the database file\nmust be checked for changes to update the cache, and locked. Most systems can\ndo this quickly, although this operation is clearly not good for performance.\nSome Linux/Unix users may have their home directories and profiles stored on a\nnetwork-mounted drive. In these cases, individual database accesses can be\nrelatively expensive.\n\nTherefore, it is very important that database access be minimized and grouped\nin transactions. A new query/result format will be used instead of RDF. RDF\nrequires many extra transactions, to retrieve the ID of a URL, then to\nretrieve the title, then to retrieve the visit date, etc. This makes\nperformance, especially for network users, unacceptably slow. The new query\nsystem will retrieve one set of results for one query, meaning that there will\nbe only one database access or the accesses can be internally grouped in a\ntransaction. Initial tests of this system show that is is plenty fast enough\nover a good network and virtually instant for local users (the majority).\n\n### Link coloring\n\nLink coloring is perhaps the most important performance issue, since this\ndirectly affects page load time. A naive approach requires querying the\ndatabase for each link that comes in. Even when the history database is local,\nasking the OS for a file lock for each link on a page will be very bad for\nperformance.\n\nTo solve this problem, URLs will be loaded into an in-memory database when the\napplication starts (or, perhaps, the first time they are required). These\nlinks can be sorted so they can be accessed very quickly, and require no OS\ncalls or file locks. This list will only contain URLs, and none of the extra\ninformation such as visit dates, visit counts, and titles.\n\nBecause these data will reside in memory, it is important to not take too much\nspace. If we succeed in the goal of allowing users to keep large amounts of\nhistory, size could be significant. We will, therefore, want to limit the\nnumber of URLs that we bring into memory, either allowing, for example, the\npast 10,000 URLs, or the past 30 days of visits.\n\nA two-level approach may improve perceived size. Most URLs in the table are\nadvertisements and random images from Web sites to which the user will never\nsee a link, and probably wouldn't even care about if they did. Then there are\nthe top-level pages (with hidden=false) that are the top-level URLs that the\nuser actually visited. They are much more likely to care about these top-level\nlinks. To save space and speed things up, we could keep the past X URLs in\nmemory, plus the previous Y top-level URLs. It is unlikely that users will\neven notice that most of their history links are not being used for link\ncoloring.\n\n### Database size\n\nI just imported my [Mork](/Mork \"Mork\") history database file into the\nequivalent SQLite format. The SQLite file size was one-tenth of the original\nMork file. So, even though we will be storing more information (every time a\npage is visited) overall database size will probably be smaller.\n\nRetrieved from\n\"[https://wiki.mozilla.org/index.php?title=Browser_History&oldid=976107](https://wiki.mozilla.org/index.php?title=Browser_History&oldid=976107)\""
            },
            {
                "title": "Navigation menu",
                "content": "###  Personal tools\n\n  * [Log in](/index.php?title=Special:UserLogin&returnto=Browser+History \"You are encouraged to log in; however, it is not mandatory \\[o\\]\")\n  * [Request account](/Special:RequestAccount \"You are encouraged to create an account and log in; however, it is not mandatory\")\n\n###  Namespaces\n\n  * [Page](/Browser_History \"View the content page \\[c\\]\")\n  * [Discussion](/Talk:Browser_History \"Discussion about the content page \\[t\\]\")\n\nEnglish\n\n###  Views\n\n  * [Read](/Browser_History)\n  * [View source](/index.php?title=Browser_History&action=edit \"This page is protected.\nYou can view its source \\[e\\]\")\n\n  * [View history](/index.php?title=Browser_History&action=history \"Past revisions of this page \\[h\\]\")\n\nMore\n\n###  Search\n\n[](/Main_Page \"Visit the main page\")\n\n###  Navigation\n\n  * [Main page](/Main_Page \"Visit the main page \\[z\\]\")\n  * [Product releases](/Releases)\n  * [New pages](/Special:NewPages)\n  * [Recent changes](/Special:RecentChanges \"A list of recent changes in the wiki \\[r\\]\")\n  * [Recent uploads](/Special:NewFiles)\n  * [Help](/MozillaWiki:Help \"The place to find out\")\n\n###  How to Contribute\n\n  * [Contribute to Mozilla](/Contribute)\n  * [Community Portal](//community.mozilla.org)\n  * [Community Participation Guidelines](//www.mozilla.org/en-US/about/governance/policies/participation/)\n\n###  MozillaWiki\n\n  * [About](/MozillaWiki:About)\n  * [Team](/MozillaWiki:Team)\n  * [Policies](/MozillaWiki:Policies)\n  * [Report a wiki bug](//bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=wiki.mozilla.org)\n\n###  Around Mozilla\n\n  * [Mozilla Support](//support.mozilla.org/)\n  * [Give product Feedback](//connect.mozilla.org/)\n  * [Mozilla Developer Network](//developer.mozilla.org/)\n  * [Planet Mozilla](//planet.mozilla.org/)\n\n###  Tools\n\n  * [What links here](/Special:WhatLinksHere/Browser_History \"A list of all wiki pages that link here \\[j\\]\")\n  * [Related changes](/Special:RecentChangesLinked/Browser_History \"Recent changes in pages linked from this page \\[k\\]\")\n  * [Special pages](/Special:SpecialPages \"A list of all special pages \\[q\\]\")\n  * [Printable version](javascript:print\\(\\); \"Printable version of this page \\[p\\]\")\n  * [Permanent link](/index.php?title=Browser_History&oldid=976107 \"Permanent link to this revision of this page\")\n  * [Page information](/index.php?title=Browser_History&action=info \"More information about this page\")\n\n  * This page was last edited on 12 May 2014, at 22:33.\n\n  * [Privacy policy](/MozillaWiki:Privacy_policy)\n  * [About MozillaWiki](/MozillaWiki:About)\n  * [Mobile view](https://wiki.mozilla.org/index.php?title=Browser_History&mobileaction=toggle_view_mobile)\n\n  * [](https://www.mediawiki.org/)"
            }
        ]
    }
]